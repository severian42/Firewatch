import{r as Ll,g as Ur}from"./react-vendor-DJG_os-6.js";var tn={exports:{}},lt={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei;function Fl(){if(Ei)return lt;Ei=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,l){var a=null;if(l!==void 0&&(a=""+l),o.key!==void 0&&(a=""+o.key),"key"in o){l={};for(var u in o)u!=="key"&&(l[u]=o[u])}else l=o;return o=l.ref,{$$typeof:t,type:i,key:a,ref:o!==void 0?o:null,props:l}}return lt.Fragment=e,lt.jsx=n,lt.jsxs=n,lt}var bi;function Ul(){return bi||(bi=1,tn.exports=Fl()),tn.exports}var m=Ul(),F=Ll();const Vl=()=>m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Vr=()=>m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),ql=({className:t="w-6 h-6"})=>m.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.917l9 3 9-3a12.02 12.02 0 00-2.382-9.971z"})}),Bl=()=>m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),qr=({className:t="w-6 h-6"})=>m.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16.712 4.33a9.027 9.027 0 011.652 1.306c.51.51.944 1.064 1.306 1.652M16.712 4.33l-3.448 4.138m3.448-4.138a9.014 9.014 0 00-9.424 0M19.67 7.288l-4.138 3.448m4.138-3.448a9.014 9.014 0 010 9.424m-2.36-2.36l-4.138 3.448m0 0a9.027 9.027 0 01-1.652-1.306c-.51-.51-.944-1.064-1.306-1.652m0 0l3.448-4.138m0 0a9.014 9.014 0 019.424 0M4.33 16.712l4.138-3.448m0 0a9.014 9.014 0 010-9.424"})}),Gl=({className:t="w-6 h-6"})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.05.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.332.183-.582.495-.645.87l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.282c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.645-.87l.213-1.281z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Br=({className:t="w-5 h-5"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),Fe=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Sn=({className:t="w-8 h-8"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),Jt=({className:t="h-6 w-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),zl=({className:t="w-6 h-6"})=>m.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Yt=({className:t="h-6 w-6"})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),yt=({className:t="h-6 w-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Yn=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),$l=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m0 10l-6-3m6 3V7m0 10L9 7"})}),Gr=({className:t="w-5 h-5"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a.75.75 0 00-1.06-1.06L9 10.94l-1.72-1.72a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.06 0l3.75-3.75z",clipRule:"evenodd"})}),Pt=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z"})}),Rt=({className:t="w-8 h-8"})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.722.26c-1.131.079-2.274-.216-3.227-.792L11.25 14.51l-3.722-.261c-1.131-.079-2.274.216-3.227.792L.75 15.25l-.01-4.286c0-.97.616-1.813 1.5-2.097L4.5 7.5l3.75 3.75 3.75-3.75 3.75 1.011z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 7.5v6m15-6v6"})]}),Hl=({className:t="w-8 h-8"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),Jl=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 015.25 6h.008a2.25 2.25 0 012.242 2.15 2.25 2.25 0 01-.672 1.586m5.8 0c-.346.241-.69.46-1.044.643a2.25 2.25 0 01-2.286 0c-.354-.183-.698-.398-1.044-.643m5.8 0l4.87-3.327a2.25 2.25 0 00-2.18-4.002H8.25a2.25 2.25 0 00-2.18 4.002l4.87 3.327M12 21a2.25 2.25 0 01-2.25-2.25V15a2.25 2.25 0 012.25-2.25h.008a2.25 2.25 0 012.25 2.25v3.75a2.25 2.25 0 01-2.25 2.25H12z"})}),Ai=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Yl=({className:t="w-4 h-4"})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.665l3-3z"}),m.jsx("path",{d:"M8.603 14.53a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 005.656 5.656l3-3a4 4 0 00-.225-5.865.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.665l-3 3z"})]}),Wl=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Ol=({className:t="w-5 h-5"})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:[m.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),m.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]}),Kl=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),Ql=({className:t="w-6 h-6"})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.254 2.729 7.89 6.536 9.167.48.089.654-.208.654-.46V19.03c-2.718.592-3.295-1.246-3.295-1.246-.444-1.127-1.085-1.428-1.085-1.428-.887-.604.068-.592.068-.592.98.07 1.496.994 1.496.994.87 1.494 2.285 1.063 2.838.812.088-.631.341-1.064.62-1.309-2.169-.245-4.44-1.084-4.44-4.834 0-1.064.38-1.93.996-2.613-.1-.247-.43-1.238.096-2.583 0 0 .81-.26 2.64.996.775-.215 1.603-.323 2.427-.323.824 0 1.652.108 2.427.323 1.83-1.256 2.64-.996 2.64-.996.526 1.345.195 2.336.096 2.583.617.683.996 1.549.996 2.613 0 3.76-2.274 4.583-4.448 4.825.347.298.653.882.653 1.776v2.632c0 .256.17.553.658.455C20.274 19.89 23 16.257 23 12c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),Xl=({className:t="w-6 h-6"})=>m.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),nn=["Officer, am I being detained, or am I free to go?","I am going to remain silent.","I want to speak with a lawyer.","I do not consent to a search of my person, property, or vehicle.","Please show me the warrant."],Zl=[{text:"Note the date, time, and location of the incident.",completed:!1},{text:"Get officer names and badge numbers.",completed:!1},{text:"Write down patrol car numbers.",completed:!1},{text:"Record any injuries and take photos.",completed:!1},{text:"Note potential witnesses and get their contact information.",completed:!1},{text:"Write down everything you remember as soon as possible.",completed:!1},{text:"Do not resist, even if you believe the arrest is unlawful.",completed:!1}],rS=[{id:"Home",label:"Home",icon:m.jsx(Vl,{})},{id:"Alerts",label:"Alerts",icon:m.jsx(Vr,{})},{id:"Rights",label:"Rights",icon:m.jsx(ql,{})},{id:"Document",label:"Document",icon:m.jsx(Bl,{})},{id:"Guide",label:"Guide",icon:m.jsx(qr,{})},{id:"Settings",label:"Settings",icon:m.jsx(Gl,{})}],jl=[{id:"traffic_stop",title:"Traffic Stop",icon:"ðŸš—"},{id:"home_visit",title:"Home Visit",icon:"ðŸ "},{id:"workplace_raid",title:"Workplace Raid",icon:"ðŸ¢"},{id:"public_protest",title:"Public Protest",icon:"ðŸ“£"},{id:"questioning",title:"Being Questioned",icon:"â“"},{id:"filming_police",title:"Filming Police",icon:"ðŸ“¹"}],ea=[{id:"traffic_stop_sim",title:"Traffic Stop Simulation",icon:m.jsx(Rt,{className:"w-8 h-8"})},{id:"workplace_raid_sim",title:"Workplace Raid Response",icon:m.jsx(Rt,{className:"w-8 h-8"})},{id:"home_visit_sim",title:"Home Visit Encounter",icon:m.jsx(Rt,{className:"w-8 h-8"})},{id:"rights_quiz",title:"Know Your Rights Quiz",icon:m.jsx(Hl,{className:"w-8 h-8"})}];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ta,na;function ia(){return{geminiUrl:ta,vertexUrl:na}}function oa(t,e,n){var i,o,l;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const a=ia();return t.vertexai?(o=a.vertexUrl)!==null&&o!==void 0?o:e:(l=a.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qe{}function q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function s(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(n))for(let c=0;c<f.length;c++){const d=f[c];s(d,e.slice(l+1),n[c])}else for(const c of f)s(c,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];s(f[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(a=>r(a,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ii;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ii||(Ii={}));var _i;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_i||(_i={}));var j;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(j||(j={}));var Ni;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ni||(Ni={}));var Mi;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Mi||(Mi={}));var Pi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Pi||(Pi={}));var Ri;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ri||(Ri={}));var Di;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Di||(Di={}));var Li;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Li||(Li={}));var Fi;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fi||(Fi={}));var Ui;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Ui||(Ui={}));var Vi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Vi||(Vi={}));var qi;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qi||(qi={}));var Bi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bi||(Bi={}));var Gi;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Gi||(Gi={}));var zi;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zi||(zi={}));var Vt;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Vt||(Vt={}));var $i;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($i||($i={}));var kn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kn||(kn={}));var Hi;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Hi||(Hi={}));var Ji;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ji||(Ji={}));var Yi;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Yi||(Yi={}));var Wi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wi||(Wi={}));var Oi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Oi||(Oi={}));var Ki;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ki||(Ki={}));var Qi;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Qi||(Qi={}));var Xi;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Xi||(Xi={}));var Zi;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zi||(Zi={}));var ji;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ji||(ji={}));var eo;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(eo||(eo={}));var to;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(to||(to={}));var no;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(no||(no={}));var io;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(io||(io={}));var oo;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(oo||(oo={}));var ro;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ro||(ro={}));var so;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(so||(so={}));var lo;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lo||(lo={}));var ao;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ao||(ao={}));var uo;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uo||(uo={}));var co;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(co||(co={}));var fo;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fo||(fo={}));var We;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(We||(We={}));class En{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class at{get text(){var e,n,i,o,l,a,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const h of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,y]of Object.entries(h))g!=="text"&&g!=="thought"&&(y!==null||y!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,i,o,l,a,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const p of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&d.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,l,a,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,l,a,u,f,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,l,a,u,f,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class po{}class mo{}class ra{}class sa{}class ho{}class go{}class yo{}class la{}class xo{}class vo{}class Co{}class aa{}class ua{}class ca{}class To{}class fa{get text(){var e,n,i;let o="",l=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,o+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,n,i;let o="";const l=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(o+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class da{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function zr(t,e){const n=O(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function $r(t){return Array.isArray(t)?t.map(e=>qt(e)):[qt(t)]}function qt(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Hr(t){const e=qt(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jr(t){const e=qt(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wo(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Yr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>wo(e)):[wo(t)]}function bn(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function So(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ko(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function oe(t){if(t==null)throw new Error("ContentUnion is required");return bn(t)?t:{role:"user",parts:Yr(t)}}function Wr(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=oe(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=oe(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>oe(n)):[oe(e)]}function he(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(So(t)||ko(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[oe(t)]}const e=[],n=[],i=bn(t[0]);for(const o of t){const l=bn(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(So(o)||ko(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:Yr(n)}),e}function pa(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(j).includes(n[0].toUpperCase())?n[0].toUpperCase():j.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(j).includes(i.toUpperCase())?i.toUpperCase():j.TYPE_UNSPECIFIED})}}function Oe(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&pa(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(j).includes(u.toUpperCase())?u.toUpperCase():j.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Oe(u);else if(i.includes(a)){const f=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}f.push(Oe(c))}e[a]=f}else if(o.includes(a)){const f={};for(const[c,d]of Object.entries(u))f[c]=Oe(d);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Wn(t){return Oe(t)}function On(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Kn(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ze(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Oe(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Oe(e.response));return t}function je(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ma(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Ae(t,e){if(typeof e!="string")throw new Error("name must be a string");return ma(t,e,"cachedContents")}function Or(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ie(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function ha(t){return t!=null&&typeof t=="object"&&"name"in t}function ga(t){return t!=null&&typeof t=="object"&&"video"in t}function ya(t){return t!=null&&typeof t=="object"&&"uri"in t}function Kr(t){var e;let n;if(ha(t)&&(n=t.name),!(ya(t)&&(n=t.uri,n===void 0))&&!(ga(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Qr(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xr(t){for(const e of["models","tunedModels","publisherModels"])if(xa(t,e))return t[e];return[]}function xa(t,e){return t!==null&&typeof t=="object"&&e in t}function va(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ca(t,e={}){const n=[],i=new Set;for(const o of t){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const a=va(o,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Zr(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Ta(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function et(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function jr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wa(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Sa(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ka(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ea(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],wa(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Sa(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],ka(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function es(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Ea(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function ba(t){const e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=r(t,["default"]);i!=null&&s(e,["default"],i);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const a=r(t,["example"]);a!=null&&s(e,["example"],a);const u=r(t,["format"]);u!=null&&s(e,["format"],u);const f=r(t,["items"]);f!=null&&s(e,["items"],f);const c=r(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=r(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=r(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const h=r(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=r(t,["minItems"]);g!=null&&s(e,["minItems"],g);const y=r(t,["minLength"]);y!=null&&s(e,["minLength"],y);const x=r(t,["minProperties"]);x!=null&&s(e,["minProperties"],x);const w=r(t,["minimum"]);w!=null&&s(e,["minimum"],w);const v=r(t,["nullable"]);v!=null&&s(e,["nullable"],v);const S=r(t,["pattern"]);S!=null&&s(e,["pattern"],S);const k=r(t,["properties"]);k!=null&&s(e,["properties"],k);const I=r(t,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=r(t,["required"]);_!=null&&s(e,["required"],_);const b=r(t,["title"]);b!=null&&s(e,["title"],b);const L=r(t,["type"]);return L!=null&&s(e,["type"],L),e}function Aa(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&s(e,["category"],n);const i=r(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function Ia(t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=r(t,["response"]);u!=null&&s(e,["response"],u);const f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function _a(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Na(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],_a(n)),e}function Ma(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Pa(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ma(n)),e}function Ra(){return{}}function Da(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Ia(c))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],Na(i));const o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Pa(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Ra());const a=r(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=r(t,["computerUse"]);return u!=null&&s(e,["computerUse"],u),e}function La(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Fa(t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Ua(t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Fa(n));const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Va(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],La(n));const i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Ua(i)),e}function qa(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function ts(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],qa(n)),e}function Ba(t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],ts(i)),e}function Ga(t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ba(o))),s(e,["speakerVoiceConfigs"],i)}return e}function za(t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],ts(n));const i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Ga(i));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function $a(t){const e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Ha(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],es(oe(o)));const l=r(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=r(e,["topP"]);a!=null&&s(i,["topP"],a);const u=r(e,["topK"]);u!=null&&s(i,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=r(e,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const d=r(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=r(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=r(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const y=r(e,["frequencyPenalty"]);y!=null&&s(i,["frequencyPenalty"],y);const x=r(e,["seed"]);x!=null&&s(i,["seed"],x);const w=r(e,["responseMimeType"]);w!=null&&s(i,["responseMimeType"],w);const v=r(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],ba(Wn(v)));const S=r(e,["responseJsonSchema"]);if(S!=null&&s(i,["responseJsonSchema"],S),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=r(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(R=>Aa(R))),s(n,["safetySettings"],M)}const I=r(e,["tools"]);if(n!==void 0&&I!=null){let M=je(I);Array.isArray(M)&&(M=M.map(R=>Da(Ze(R)))),s(n,["tools"],M)}const _=r(e,["toolConfig"]);if(n!==void 0&&_!=null&&s(n,["toolConfig"],Va(_)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=r(e,["cachedContent"]);n!==void 0&&b!=null&&s(n,["cachedContent"],Ae(t,b));const L=r(e,["responseModalities"]);L!=null&&s(i,["responseModalities"],L);const z=r(e,["mediaResolution"]);z!=null&&s(i,["mediaResolution"],z);const D=r(e,["speechConfig"]);if(D!=null&&s(i,["speechConfig"],za(On(D))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const E=r(e,["thinkingConfig"]);return E!=null&&s(i,["thinkingConfig"],$a(E)),i}function Ja(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["request","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>es(u))),s(n,["request","contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["request","generationConfig"],Ha(t,l,n)),n}function Ya(t,e){const n={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=r(e,["fileName"]);i!=null&&s(n,["fileName"],i);const o=r(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Ja(t,a))),s(n,["requests","requests"],l)}return n}function Wa(t,e){const n={},i=r(t,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Oa(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["src"]);o!=null&&s(n,["batch","inputConfig"],Ya(t,Zr(t,o)));const l=r(e,["config"]);return l!=null&&s(n,["config"],Wa(l,n)),n}function Ka(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Qa(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Xa(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);if(e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Za(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Xa(n,e)),e}function ja(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function eu(t){const e={},n=r(t,["format"]);n!=null&&s(e,["instancesFormat"],n);const i=r(t,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);const o=r(t,["bigqueryUri"]);if(o!=null&&s(e,["bigquerySource","inputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tu(t){const e={},n=r(t,["format"]);n!=null&&s(e,["predictionsFormat"],n);const i=r(t,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);const o=r(t,["bigqueryUri"]);if(o!=null&&s(e,["bigqueryDestination","outputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function nu(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const o=r(t,["dest"]);return e!==void 0&&o!=null&&s(e,["outputConfig"],tu(Ta(o))),n}function iu(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["model"],O(t,i));const o=r(e,["src"]);o!=null&&s(n,["inputConfig"],eu(Zr(t,o)));const l=r(e,["config"]);return l!=null&&s(n,["config"],nu(l,n)),n}function ou(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function ru(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function su(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);const l=r(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function lu(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],su(n,e)),e}function au(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],et(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function ns(){return{}}function uu(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function cu(t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function fu(t){const e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function du(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],uu(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],cu(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],fu(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function pu(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>du(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function mu(t){const e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function hu(t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function gu(t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>hu(o))),s(e,["urlMetadata"],i)}return e}function yu(t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],pu(n));const i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],mu(i));const o=r(t,["tokenCount"]);o!=null&&s(e,["tokenCount"],o);const l=r(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=r(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],gu(a));const u=r(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=r(t,["index"]);c!=null&&s(e,["index"],c);const d=r(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=r(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function xu(t){const e={},n=r(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>yu(u))),s(e,["candidates"],a)}const i=r(t,["modelVersion"]);i!=null&&s(e,["modelVersion"],i);const o=r(t,["promptFeedback"]);o!=null&&s(e,["promptFeedback"],o);const l=r(t,["usageMetadata"]);return l!=null&&s(e,["usageMetadata"],l),e}function vu(t){const e={},n=r(t,["response"]);return n!=null&&s(e,["response"],xu(n)),r(t,["error"])!=null&&s(e,["error"],ns()),e}function Cu(t){const e={},n=r(t,["responsesFile"]);n!=null&&s(e,["fileName"],n);const i=r(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>vu(l))),s(e,["inlinedResponses"],o)}return e}function An(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["metadata","state"]);o!=null&&s(e,["state"],jr(o));const l=r(t,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=r(t,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=r(t,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const f=r(t,["metadata","model"]);f!=null&&s(e,["model"],f);const c=r(t,["metadata","output"]);return c!=null&&s(e,["dest"],Cu(c)),e}function Tu(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>An(l))),s(e,["batchJobs"],o)}return e}function wu(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["done"]);return i!=null&&s(e,["done"],i),r(t,["error"])!=null&&s(e,["error"],ns()),e}function is(t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const i=r(t,["code"]);i!=null&&s(e,["code"],i);const o=r(t,["message"]);return o!=null&&s(e,["message"],o),e}function Su(t){const e={},n=r(t,["instancesFormat"]);n!=null&&s(e,["format"],n);const i=r(t,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);const o=r(t,["bigquerySource","inputUri"]);return o!=null&&s(e,["bigqueryUri"],o),e}function ku(t){const e={},n=r(t,["predictionsFormat"]);n!=null&&s(e,["format"],n);const i=r(t,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);const o=r(t,["bigqueryDestination","outputUri"]);return o!=null&&s(e,["bigqueryUri"],o),e}function In(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["state"]);o!=null&&s(e,["state"],jr(o));const l=r(t,["error"]);l!=null&&s(e,["error"],is(l));const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const u=r(t,["startTime"]);u!=null&&s(e,["startTime"],u);const f=r(t,["endTime"]);f!=null&&s(e,["endTime"],f);const c=r(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const d=r(t,["model"]);d!=null&&s(e,["model"],d);const p=r(t,["inputConfig"]);p!=null&&s(e,["src"],Su(p));const h=r(t,["outputConfig"]);return h!=null&&s(e,["dest"],ku(h)),e}function Eu(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>In(l))),s(e,["batchJobs"],o)}return e}function bu(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["done"]);i!=null&&s(e,["done"],i);const o=r(t,["error"]);return o!=null&&s(e,["error"],is(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ue;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ue||(Ue={}));class Ct{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};i?typeof i=="object"?a=Object.assign({},i):a=i:a={config:{}},a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(o=a.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Au extends qe{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${o}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Ct(Ue.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=iu(this.apiClient,e);return u=q("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>In(d))}else{const c=Oa(this.apiClient,e);return u=q("{model}:batchGenerateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>An(d))}}async get(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ou(this.apiClient,e);return u=q("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>In(d))}else{const c=Ka(this.apiClient,e);return u=q("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>An(d))}}async cancel(e){var n,i,o,l;let a="",u={};if(this.apiClient.isVertexAI()){const f=ru(this.apiClient,e);a=q("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=Qa(this.apiClient,e);a=q("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=lu(e);return u=q("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Eu(d),h=new To;return Object.assign(h,p),h})}else{const c=Za(e);return u=q("batches",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Tu(d),h=new To;return Object.assign(h,p),h})}}async delete(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=au(this.apiClient,e);return u=q("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>bu(d))}else{const c=ja(this.apiClient,e);return u=q("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>wu(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iu(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function _u(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Nu(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Mu(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Iu(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],_u(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Nu(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function Eo(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Mu(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Pu(t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=r(t,["response"]);u!=null&&s(e,["response"],u);const f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Ru(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Du(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ru(n)),e}function Lu(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Fu(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Lu(n)),e}function Uu(){return{}}function Vu(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Pu(c))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],Du(i));const o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Fu(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Uu());const a=r(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=r(t,["computerUse"]);return u!=null&&s(e,["computerUse"],u),e}function qu(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Bu(t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Gu(t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Bu(n));const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function zu(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],qu(n));const i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Gu(i)),e}function $u(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const o=r(t,["expireTime"]);e!==void 0&&o!=null&&s(e,["expireTime"],o);const l=r(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let d=he(a);Array.isArray(d)&&(d=d.map(p=>Eo(p))),s(e,["contents"],d)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],Eo(oe(u)));const f=r(t,["tools"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(p=>Vu(p))),s(e,["tools"],d)}const c=r(t,["toolConfig"]);if(e!==void 0&&c!=null&&s(e,["toolConfig"],zu(c)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Hu(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["model"],zr(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],$u(o,n)),n}function Ju(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Yu(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Wu(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const o=r(t,["expireTime"]);return e!==void 0&&o!=null&&s(e,["expireTime"],o),n}function Ou(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],Wu(o,n)),n}function Ku(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function Qu(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Ku(n,e)),e}function Xu(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Zu(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["data"]);i!=null&&s(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ju(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ec(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Xu(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Zu(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],ju(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function bo(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ec(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function tc(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const i=r(t,["name"]);i!=null&&s(e,["name"],i);const o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);const l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function nc(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ic(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],nc(n)),e}function oc(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function rc(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],oc(n)),e}function sc(){return{}}function lc(t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function ac(t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],lc(n));const i=r(t,["authType"]);i!=null&&s(e,["authType"],i);const o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=r(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=r(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function uc(t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],ac(n)),e}function cc(){return{}}function fc(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>tc(h))),s(e,["functionDeclarations"],p)}const i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],ic(o));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],rc(l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],sc());const u=r(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],uc(u)),r(t,["urlContext"])!=null&&s(e,["urlContext"],cc());const c=r(t,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const d=r(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function dc(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function pc(t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function mc(t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],pc(n));const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function hc(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],dc(n));const i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],mc(i)),e}function gc(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const o=r(t,["expireTime"]);e!==void 0&&o!=null&&s(e,["expireTime"],o);const l=r(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let p=he(a);Array.isArray(p)&&(p=p.map(h=>bo(h))),s(e,["contents"],p)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],bo(oe(u)));const f=r(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>fc(h))),s(e,["tools"],p)}const c=r(t,["toolConfig"]);e!==void 0&&c!=null&&s(e,["toolConfig"],hc(c));const d=r(t,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),n}function yc(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["model"],zr(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],gc(o,n)),n}function xc(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function vc(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Cc(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const o=r(t,["expireTime"]);return e!==void 0&&o!=null&&s(e,["expireTime"],o),n}function Tc(t,e){const n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],Ae(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],Cc(o,n)),n}function wc(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function Sc(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],wc(n,e)),e}function Dt(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["model"]);o!=null&&s(e,["model"],o);const l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=r(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=r(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=r(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function kc(){return{}}function Ec(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Dt(l))),s(e,["cachedContents"],o)}return e}function Lt(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["model"]);o!=null&&s(e,["model"],o);const l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=r(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=r(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=r(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function bc(){return{}}function Ac(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Lt(l))),s(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ic extends qe{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(Ue.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=yc(this.apiClient,e);return u=q("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Lt(d))}else{const c=Hu(this.apiClient,e);return u=q("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Dt(d))}}async get(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=xc(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Lt(d))}else{const c=Ju(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Dt(d))}}async delete(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=vc(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=bc(),p=new vo;return Object.assign(p,d),p})}else{const c=Yu(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=kc(),p=new vo;return Object.assign(p,d),p})}}async update(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Tc(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Lt(d))}else{const c=Ou(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Dt(d))}}async listInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Sc(e);return u=q("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Ac(d),h=new Co;return Object.assign(h,p),h})}else{const c=Qu(e);return u=q("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Ec(d),h=new Co;return Object.assign(h,p),h})}}}function Ao(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t){return this instanceof Z?(this.v=t,this):new Z(t)}function Ke(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(g){return function(y){return Promise.resolve(y).then(g,p)}}function u(g,y){i[g]&&(o[g]=function(x){return new Promise(function(w,v){l.push([g,x,w,v])>1||f(g,x)})},y&&(o[g]=y(o[g])))}function f(g,y){try{c(i[g](y))}catch(x){h(l[0][3],x)}}function c(g){g.value instanceof Z?Promise.resolve(g.value.v).then(d,p):h(l[0][2],g)}function d(g){f("next",g)}function p(g){f("throw",g)}function h(g,y){g(y),l.shift(),l.length&&f(l[0][0],l[0][1])}}function pt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ao=="function"?Ao(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=t[l]&&function(a){return new Promise(function(u,f){a=t[l](a),o(u,f,a.done,a.value)})}}function o(l,a,u,f){Promise.resolve(f).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _c(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:os(n)}function os(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Nc(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Io(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let l=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),l&&!os(t[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class Mc{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Pc(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pc{constructor(e,n,i,o={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Nc(l)}async sendMessage(e){var n;await this.sendPromise;const i=oe(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,u;const f=await o,c=(a=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];d!=null&&(h=(u=d.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=oe(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const n=e?Io(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Ke(this,arguments,function*(){var a,u,f,c;const d=[];try{for(var p=!0,h=pt(e),g;g=yield Z(h.next()),a=g.done,!a;p=!0){c=g.value,p=!1;const y=c;if(_c(y)){const x=(o=(i=y.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;x!==void 0&&d.push(x)}yield yield Z(y)}}catch(y){u={error:y}}finally{try{!p&&!a&&(f=h.return)&&(yield Z(f.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Io(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wt extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wt.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rc(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function Dc(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Rc(n,e)),e}function Lc(t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const i=r(t,["message"]);i!=null&&s(e,["message"],i);const o=r(t,["code"]);return o!=null&&s(e,["code"],o),e}function Fc(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);const l=r(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const u=r(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=r(t,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const d=r(t,["uri"]);d!=null&&s(e,["uri"],d);const p=r(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const h=r(t,["state"]);h!=null&&s(e,["state"],h);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const x=r(t,["error"]);return x!=null&&s(e,["error"],Lc(x)),e}function Uc(t){const e={},n=r(t,["file"]);n!=null&&s(e,["file"],Fc(n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Vc(t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],Kr(n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function qc(t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],Kr(n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Bc(t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const i=r(t,["message"]);i!=null&&s(e,["message"],i);const o=r(t,["code"]);return o!=null&&s(e,["code"],o),e}function _n(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);const l=r(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const u=r(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=r(t,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const d=r(t,["uri"]);d!=null&&s(e,["uri"],d);const p=r(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const h=r(t,["state"]);h!=null&&s(e,["state"],h);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const x=r(t,["error"]);return x!=null&&s(e,["error"],Bc(x)),e}function Gc(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>_n(l))),s(e,["files"],o)}return e}function zc(){return{}}function $c(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hc extends qe{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(Ue.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>_n(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dc(e);return l=q("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Gc(f),d=new aa;return Object.assign(d,c),d})}}async createInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Uc(e);return l=q("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=zc(),c=new ua;return Object.assign(c,f),c})}}async get(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vc(e);return l=q("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>_n(f))}}async delete(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qc(e);return l=q("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=$c(),c=new ca;return Object.assign(c,f),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jc(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Yc(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function rs(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Jc(n)),e}function Wc(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Yc(n)),e}function Oc(t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],rs(i)),e}function Kc(t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Oc(o))),s(e,["speakerVoiceConfigs"],i)}return e}function Qc(t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],rs(n));const i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Kc(i));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Xc(t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],Wc(n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Zc(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function jc(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function ef(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function tf(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["data"]);i!=null&&s(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function nf(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function of(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function rf(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Zc(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],ef(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],nf(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function sf(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],jc(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],tf(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],of(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function lf(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>rf(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function af(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>sf(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function uf(t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=r(t,["response"]);u!=null&&s(e,["response"],u);const f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function cf(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const i=r(t,["name"]);i!=null&&s(e,["name"],i);const o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);const l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function ff(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function df(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function pf(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],ff(n)),e}function mf(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],df(n)),e}function hf(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function gf(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function yf(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],hf(n)),e}function xf(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],gf(n)),e}function vf(){return{}}function Cf(t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Tf(t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Cf(n));const i=r(t,["authType"]);i!=null&&s(e,["authType"],i);const o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=r(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=r(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function wf(t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Tf(n)),e}function Sf(){return{}}function kf(){return{}}function Ef(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>uf(c))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],pf(i));const o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],yf(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Sf());const a=r(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=r(t,["computerUse"]);return u!=null&&s(e,["computerUse"],u),e}function bf(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>cf(h))),s(e,["functionDeclarations"],p)}const i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],mf(o));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],xf(l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],vf());const u=r(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],wf(u)),r(t,["urlContext"])!=null&&s(e,["urlContext"],kf());const c=r(t,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const d=r(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function Af(t){const e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function If(t){const e={},n=r(t,["handle"]);n!=null&&s(e,["handle"],n);const i=r(t,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function _o(){return{}}function No(){return{}}function _f(t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=r(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Nf(t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=r(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Mf(t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],_f(n));const i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function Pf(t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Nf(n));const i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function Rf(t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Df(t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Lf(t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],Rf(i)),e}function Ff(t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],Df(i)),e}function Uf(t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Vf(t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function qf(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=r(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=r(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Qc(Kn(p)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],lf(oe(g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let _=je(y);Array.isArray(_)&&(_=_.map(b=>Ef(Ze(b)))),s(e,["setup","tools"],_)}const x=r(t,["sessionResumption"]);e!==void 0&&x!=null&&s(e,["setup","sessionResumption"],Af(x));const w=r(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&s(e,["setup","inputAudioTranscription"],_o());const v=r(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],_o());const S=r(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&s(e,["setup","realtimeInputConfig"],Mf(S));const k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],Lf(k));const I=r(t,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Uf(I)),n}function Bf(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=r(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=r(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Xc(Kn(p)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],af(oe(g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let _=je(y);Array.isArray(_)&&(_=_.map(b=>bf(Ze(b)))),s(e,["setup","tools"],_)}const x=r(t,["sessionResumption"]);e!==void 0&&x!=null&&s(e,["setup","sessionResumption"],If(x));const w=r(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&s(e,["setup","inputAudioTranscription"],No());const v=r(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],No());const S=r(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&s(e,["setup","realtimeInputConfig"],Pf(S));const k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],Ff(k));const I=r(t,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Vf(I)),n}function Gf(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],qf(o,n)),n}function zf(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],Bf(o,n)),n}function $f(){return{}}function Hf(){return{}}function Jf(){return{}}function Yf(){return{}}function Wf(t){const e={},n=r(t,["media"]);n!=null&&s(e,["mediaChunks"],$r(n));const i=r(t,["audio"]);i!=null&&s(e,["audio"],Jr(i));const o=r(t,["audioStreamEnd"]);o!=null&&s(e,["audioStreamEnd"],o);const l=r(t,["video"]);l!=null&&s(e,["video"],Hr(l));const a=r(t,["text"]);return a!=null&&s(e,["text"],a),r(t,["activityStart"])!=null&&s(e,["activityStart"],$f()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],Jf()),e}function Of(t){const e={},n=r(t,["media"]);n!=null&&s(e,["mediaChunks"],$r(n));const i=r(t,["audio"]);i!=null&&s(e,["audio"],Jr(i));const o=r(t,["audioStreamEnd"]);o!=null&&s(e,["audioStreamEnd"],o);const l=r(t,["video"]);l!=null&&s(e,["video"],Hr(l));const a=r(t,["text"]);return a!=null&&s(e,["text"],a),r(t,["activityStart"])!=null&&s(e,["activityStart"],Hf()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],Yf()),e}function ss(t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const i=r(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function Kf(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ss(o))),s(e,["weightedPrompts"],i)}return e}function ls(t){const e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);const i=r(t,["topK"]);i!=null&&s(e,["topK"],i);const o=r(t,["seed"]);o!=null&&s(e,["seed"],o);const l=r(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=r(t,["bpm"]);a!=null&&s(e,["bpm"],a);const u=r(t,["density"]);u!=null&&s(e,["density"],u);const f=r(t,["brightness"]);f!=null&&s(e,["brightness"],f);const c=r(t,["scale"]);c!=null&&s(e,["scale"],c);const d=r(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=r(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const h=r(t,["onlyBassAndDrums"]);return h!=null&&s(e,["onlyBassAndDrums"],h),e}function Qf(t){const e={},n=r(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],ls(n)),e}function as(t){const e={},n=r(t,["model"]);return n!=null&&s(e,["model"],n),e}function us(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ss(o))),s(e,["weightedPrompts"],i)}return e}function Nn(t){const e={},n=r(t,["setup"]);n!=null&&s(e,["setup"],as(n));const i=r(t,["clientContent"]);i!=null&&s(e,["clientContent"],us(i));const o=r(t,["musicGenerationConfig"]);o!=null&&s(e,["musicGenerationConfig"],ls(o));const l=r(t,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function Xf(){return{}}function Zf(t){const e={},n=r(t,["sessionId"]);return n!=null&&s(e,["sessionId"],n),e}function jf(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function ed(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function td(t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function nd(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["data"]);i!=null&&s(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function id(t){const e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function od(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function rd(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],jf(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],td(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],id(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function sd(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ed(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],nd(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],od(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function ld(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>rd(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function ad(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>sd(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Mo(t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const i=r(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function Po(t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const i=r(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function ud(t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function cd(t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ud(o))),s(e,["urlMetadata"],i)}return e}function fd(t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],ld(n));const i=r(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const o=r(t,["interrupted"]);o!=null&&s(e,["interrupted"],o);const l=r(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=r(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=r(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Mo(u));const f=r(t,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],Mo(f));const c=r(t,["urlContextMetadata"]);return c!=null&&s(e,["urlContextMetadata"],cd(c)),e}function dd(t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],ad(n));const i=r(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const o=r(t,["interrupted"]);o!=null&&s(e,["interrupted"],o);const l=r(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=r(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=r(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Po(u));const f=r(t,["outputTranscription"]);return f!=null&&s(e,["outputTranscription"],Po(f)),e}function pd(t){const e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);const i=r(t,["args"]);i!=null&&s(e,["args"],i);const o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function md(t){const e={},n=r(t,["args"]);n!=null&&s(e,["args"],n);const i=r(t,["name"]);return i!=null&&s(e,["name"],i),e}function hd(t){const e={},n=r(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pd(o))),s(e,["functionCalls"],i)}return e}function gd(t){const e={},n=r(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>md(o))),s(e,["functionCalls"],i)}return e}function yd(t){const e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function xd(t){const e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Et(t){const e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);const i=r(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function bt(t){const e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);const i=r(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function vd(t){const e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const i=r(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const o=r(t,["responseTokenCount"]);o!=null&&s(e,["responseTokenCount"],o);const l=r(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=r(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=r(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=r(t,["promptTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Et(g))),s(e,["promptTokensDetails"],h)}const c=r(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Et(g))),s(e,["cacheTokensDetails"],h)}const d=r(t,["responseTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>Et(g))),s(e,["responseTokensDetails"],h)}const p=r(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>Et(g))),s(e,["toolUsePromptTokensDetails"],h)}return e}function Cd(t){const e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const i=r(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const o=r(t,["candidatesTokenCount"]);o!=null&&s(e,["responseTokenCount"],o);const l=r(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=r(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=r(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=r(t,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>bt(y))),s(e,["promptTokensDetails"],g)}const c=r(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>bt(y))),s(e,["cacheTokensDetails"],g)}const d=r(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>bt(y))),s(e,["responseTokensDetails"],g)}const p=r(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>bt(y))),s(e,["toolUsePromptTokensDetails"],g)}const h=r(t,["trafficType"]);return h!=null&&s(e,["trafficType"],h),e}function Td(t){const e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function wd(t){const e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function Sd(t){const e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const i=r(t,["resumable"]);i!=null&&s(e,["resumable"],i);const o=r(t,["lastConsumedClientMessageIndex"]);return o!=null&&s(e,["lastConsumedClientMessageIndex"],o),e}function kd(t){const e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const i=r(t,["resumable"]);i!=null&&s(e,["resumable"],i);const o=r(t,["lastConsumedClientMessageIndex"]);return o!=null&&s(e,["lastConsumedClientMessageIndex"],o),e}function Ed(t){const e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],Xf());const i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],fd(i));const o=r(t,["toolCall"]);o!=null&&s(e,["toolCall"],hd(o));const l=r(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],yd(l));const a=r(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],vd(a));const u=r(t,["goAway"]);u!=null&&s(e,["goAway"],Td(u));const f=r(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],Sd(f)),e}function bd(t){const e={},n=r(t,["setupComplete"]);n!=null&&s(e,["setupComplete"],Zf(n));const i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],dd(i));const o=r(t,["toolCall"]);o!=null&&s(e,["toolCall"],gd(o));const l=r(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],xd(l));const a=r(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Cd(a));const u=r(t,["goAway"]);u!=null&&s(e,["goAway"],wd(u));const f=r(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],kd(f)),e}function Ad(){return{}}function Id(t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const i=r(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function _d(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Id(o))),s(e,["weightedPrompts"],i)}return e}function Nd(t){const e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);const i=r(t,["topK"]);i!=null&&s(e,["topK"],i);const o=r(t,["seed"]);o!=null&&s(e,["seed"],o);const l=r(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=r(t,["bpm"]);a!=null&&s(e,["bpm"],a);const u=r(t,["density"]);u!=null&&s(e,["density"],u);const f=r(t,["brightness"]);f!=null&&s(e,["brightness"],f);const c=r(t,["scale"]);c!=null&&s(e,["scale"],c);const d=r(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=r(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const h=r(t,["onlyBassAndDrums"]);return h!=null&&s(e,["onlyBassAndDrums"],h),e}function Md(t){const e={},n=r(t,["clientContent"]);n!=null&&s(e,["clientContent"],_d(n));const i=r(t,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],Nd(i)),e}function Pd(t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);i!=null&&s(e,["mimeType"],i);const o=r(t,["sourceMetadata"]);return o!=null&&s(e,["sourceMetadata"],Md(o)),e}function Rd(t){const e={},n=r(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pd(o))),s(e,["audioChunks"],i)}return e}function Dd(t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const i=r(t,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function Ld(t){const e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],Ad());const i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],Rd(i));const o=r(t,["filteredPrompt"]);return o!=null&&s(e,["filteredPrompt"],Dd(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fd(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Ud(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Vd(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function qd(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Fd(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Ud(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Vd(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ot(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>qd(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Bd(t){const e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=r(t,["default"]);i!=null&&s(e,["default"],i);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const a=r(t,["example"]);a!=null&&s(e,["example"],a);const u=r(t,["format"]);u!=null&&s(e,["format"],u);const f=r(t,["items"]);f!=null&&s(e,["items"],f);const c=r(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=r(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=r(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const h=r(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=r(t,["minItems"]);g!=null&&s(e,["minItems"],g);const y=r(t,["minLength"]);y!=null&&s(e,["minLength"],y);const x=r(t,["minProperties"]);x!=null&&s(e,["minProperties"],x);const w=r(t,["minimum"]);w!=null&&s(e,["minimum"],w);const v=r(t,["nullable"]);v!=null&&s(e,["nullable"],v);const S=r(t,["pattern"]);S!=null&&s(e,["pattern"],S);const k=r(t,["properties"]);k!=null&&s(e,["properties"],k);const I=r(t,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=r(t,["required"]);_!=null&&s(e,["required"],_);const b=r(t,["title"]);b!=null&&s(e,["title"],b);const L=r(t,["type"]);return L!=null&&s(e,["type"],L),e}function Gd(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&s(e,["category"],n);const i=r(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function zd(t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=r(t,["response"]);u!=null&&s(e,["response"],u);const f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function $d(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Hd(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],$d(n)),e}function Jd(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Yd(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Jd(n)),e}function Wd(){return{}}function Od(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>zd(c))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],Hd(i));const o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Yd(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Wd());const a=r(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=r(t,["computerUse"]);return u!=null&&s(e,["computerUse"],u),e}function Kd(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Qd(t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Xd(t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Qd(n));const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Zd(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Kd(n));const i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Xd(i)),e}function jd(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function cs(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],jd(n)),e}function ep(t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],cs(i)),e}function tp(t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ep(o))),s(e,["speakerVoiceConfigs"],i)}return e}function np(t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],cs(n));const i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],tp(i));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ip(t){const e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function op(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],Ot(oe(o)));const l=r(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=r(e,["topP"]);a!=null&&s(i,["topP"],a);const u=r(e,["topK"]);u!=null&&s(i,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=r(e,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const d=r(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=r(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=r(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const y=r(e,["frequencyPenalty"]);y!=null&&s(i,["frequencyPenalty"],y);const x=r(e,["seed"]);x!=null&&s(i,["seed"],x);const w=r(e,["responseMimeType"]);w!=null&&s(i,["responseMimeType"],w);const v=r(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],Bd(Wn(v)));const S=r(e,["responseJsonSchema"]);if(S!=null&&s(i,["responseJsonSchema"],S),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=r(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(R=>Gd(R))),s(n,["safetySettings"],M)}const I=r(e,["tools"]);if(n!==void 0&&I!=null){let M=je(I);Array.isArray(M)&&(M=M.map(R=>Od(Ze(R)))),s(n,["tools"],M)}const _=r(e,["toolConfig"]);if(n!==void 0&&_!=null&&s(n,["toolConfig"],Zd(_)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=r(e,["cachedContent"]);n!==void 0&&b!=null&&s(n,["cachedContent"],Ae(t,b));const L=r(e,["responseModalities"]);L!=null&&s(i,["responseModalities"],L);const z=r(e,["mediaResolution"]);z!=null&&s(i,["mediaResolution"],z);const D=r(e,["speechConfig"]);if(D!=null&&s(i,["speechConfig"],np(On(D))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const E=r(e,["thinkingConfig"]);return E!=null&&s(i,["thinkingConfig"],ip(E)),i}function Ro(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>Ot(u))),s(n,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["generationConfig"],op(t,l,n)),n}function rp(t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const o=r(t,["title"]);e!==void 0&&o!=null&&s(e,["requests[]","title"],o);const l=r(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);o!=null&&s(n,["requests[]","content"],Wr(t,o));const l=r(e,["config"]);l!=null&&s(n,["config"],rp(l,n));const a=r(e,["model"]);return a!==void 0&&s(n,["requests[]","model"],O(t,a)),n}function lp(t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const o=r(t,["aspectRatio"]);e!==void 0&&o!=null&&s(e,["parameters","aspectRatio"],o);const l=r(t,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=r(t,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const f=r(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&s(e,["parameters","includeSafetyAttributes"],f);const c=r(t,["includeRaiReason"]);e!==void 0&&c!=null&&s(e,["parameters","includeRaiReason"],c);const d=r(t,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=r(t,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const h=r(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&s(e,["parameters","outputOptions","compressionQuality"],h),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ap(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);const l=r(e,["config"]);return l!=null&&s(n,["config"],lp(l,n)),n}function up(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function cp(t,e,n){const i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&s(n,["_query","pageSize"],o);const l=r(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=r(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],Qr(t,u)),i}function fp(t,e){const n={},i=r(e,["config"]);return i!=null&&s(n,["config"],cp(t,i,n)),n}function dp(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const o=r(t,["description"]);e!==void 0&&o!=null&&s(e,["description"],o);const l=r(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function pp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],dp(o,n)),n}function mp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function hp(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>Ot(u))),s(n,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["config"],hp(l)),n}function yp(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],Ie(n));const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function xp(t,e){const n={},i=r(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=r(t,["durationSeconds"]);if(e!==void 0&&o!=null&&s(e,["parameters","durationSeconds"],o),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(t,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=r(t,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=r(t,["negativePrompt"]);e!==void 0&&u!=null&&s(e,["parameters","negativePrompt"],u);const f=r(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&s(e,["parameters","enhancePrompt"],f),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function vp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);const l=r(e,["image"]);if(l!=null&&s(n,["instances[0]","image"],yp(l)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=r(e,["config"]);return a!=null&&s(n,["config"],xp(a,n)),n}function Cp(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Tp(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["data"]);i!=null&&s(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function wp(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Sp(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Cp(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Tp(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],wp(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function tt(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Sp(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function kp(t){const e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=r(t,["default"]);i!=null&&s(e,["default"],i);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const a=r(t,["example"]);a!=null&&s(e,["example"],a);const u=r(t,["format"]);u!=null&&s(e,["format"],u);const f=r(t,["items"]);f!=null&&s(e,["items"],f);const c=r(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=r(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=r(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const h=r(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=r(t,["minItems"]);g!=null&&s(e,["minItems"],g);const y=r(t,["minLength"]);y!=null&&s(e,["minLength"],y);const x=r(t,["minProperties"]);x!=null&&s(e,["minProperties"],x);const w=r(t,["minimum"]);w!=null&&s(e,["minimum"],w);const v=r(t,["nullable"]);v!=null&&s(e,["nullable"],v);const S=r(t,["pattern"]);S!=null&&s(e,["pattern"],S);const k=r(t,["properties"]);k!=null&&s(e,["properties"],k);const I=r(t,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=r(t,["required"]);_!=null&&s(e,["required"],_);const b=r(t,["title"]);b!=null&&s(e,["title"],b);const L=r(t,["type"]);return L!=null&&s(e,["type"],L),e}function Ep(t){const e={},n=r(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function bp(t){const e={},n=r(t,["method"]);n!=null&&s(e,["method"],n);const i=r(t,["category"]);i!=null&&s(e,["category"],i);const o=r(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Ap(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const i=r(t,["name"]);i!=null&&s(e,["name"],i);const o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);const l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Ip(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function _p(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ip(n)),e}function Np(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Mp(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Np(n)),e}function Pp(){return{}}function Rp(t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Dp(t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Rp(n));const i=r(t,["authType"]);i!=null&&s(e,["authType"],i);const o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=r(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=r(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Lp(t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Dp(n)),e}function Fp(){return{}}function fs(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Ap(h))),s(e,["functionDeclarations"],p)}const i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],_p(o));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Mp(l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Pp());const u=r(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],Lp(u)),r(t,["urlContext"])!=null&&s(e,["urlContext"],Fp());const c=r(t,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const d=r(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function Up(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Vp(t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function qp(t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Vp(n));const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Bp(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Up(n));const i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],qp(i)),e}function Gp(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function zp(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Gp(n)),e}function $p(t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],zp(n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Hp(t){const e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Jp(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],tt(oe(o)));const l=r(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=r(e,["topP"]);a!=null&&s(i,["topP"],a);const u=r(e,["topK"]);u!=null&&s(i,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);const c=r(e,["maxOutputTokens"]);c!=null&&s(i,["maxOutputTokens"],c);const d=r(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=r(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=r(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const y=r(e,["frequencyPenalty"]);y!=null&&s(i,["frequencyPenalty"],y);const x=r(e,["seed"]);x!=null&&s(i,["seed"],x);const w=r(e,["responseMimeType"]);w!=null&&s(i,["responseMimeType"],w);const v=r(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],kp(Wn(v)));const S=r(e,["responseJsonSchema"]);S!=null&&s(i,["responseJsonSchema"],S);const k=r(e,["routingConfig"]);k!=null&&s(i,["routingConfig"],k);const I=r(e,["modelSelectionConfig"]);I!=null&&s(i,["modelConfig"],Ep(I));const _=r(e,["safetySettings"]);if(n!==void 0&&_!=null){let B=_;Array.isArray(B)&&(B=B.map(ee=>bp(ee))),s(n,["safetySettings"],B)}const b=r(e,["tools"]);if(n!==void 0&&b!=null){let B=je(b);Array.isArray(B)&&(B=B.map(ee=>fs(Ze(ee)))),s(n,["tools"],B)}const L=r(e,["toolConfig"]);n!==void 0&&L!=null&&s(n,["toolConfig"],Bp(L));const z=r(e,["labels"]);n!==void 0&&z!=null&&s(n,["labels"],z);const D=r(e,["cachedContent"]);n!==void 0&&D!=null&&s(n,["cachedContent"],Ae(t,D));const E=r(e,["responseModalities"]);E!=null&&s(i,["responseModalities"],E);const M=r(e,["mediaResolution"]);M!=null&&s(i,["mediaResolution"],M);const R=r(e,["speechConfig"]);R!=null&&s(i,["speechConfig"],$p(On(R)));const U=r(e,["audioTimestamp"]);U!=null&&s(i,["audioTimestamp"],U);const V=r(e,["thinkingConfig"]);return V!=null&&s(i,["thinkingConfig"],Hp(V)),i}function Do(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>tt(u))),s(n,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["generationConfig"],Jp(t,l,n)),n}function Yp(t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);const o=r(t,["title"]);e!==void 0&&o!=null&&s(e,["instances[]","title"],o);const l=r(t,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=r(t,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=r(t,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),n}function Wp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);o!=null&&s(n,["instances[]","content"],Wr(t,o));const l=r(e,["config"]);return l!=null&&s(n,["config"],Yp(l,n)),n}function Op(t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&s(e,["parameters","negativePrompt"],o);const l=r(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=r(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=r(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const d=r(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=r(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=r(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=r(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const x=r(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&s(e,["parameters","outputOptions","compressionQuality"],x);const w=r(t,["addWatermark"]);e!==void 0&&w!=null&&s(e,["parameters","addWatermark"],w);const v=r(t,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),n}function Kp(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);const l=r(e,["config"]);return l!=null&&s(n,["config"],Op(l,n)),n}function Kt(t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=r(t,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Ie(i));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Qp(t){const e={},n=r(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);const i=r(t,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);const o=r(t,["maskDilation"]);return o!=null&&s(e,["dilation"],o),e}function Xp(t){const e={},n=r(t,["controlType"]);n!=null&&s(e,["controlType"],n);const i=r(t,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function Zp(t){const e={},n=r(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function jp(t){const e={},n=r(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);const i=r(t,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function em(t){const e={},n=r(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],Kt(n));const i=r(t,["referenceId"]);i!=null&&s(e,["referenceId"],i);const o=r(t,["referenceType"]);o!=null&&s(e,["referenceType"],o);const l=r(t,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Qp(l));const a=r(t,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Xp(a));const u=r(t,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],Zp(u));const f=r(t,["subjectImageConfig"]);return f!=null&&s(e,["subjectImageConfig"],jp(f)),e}function tm(t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&s(e,["parameters","negativePrompt"],o);const l=r(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=r(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=r(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const d=r(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=r(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=r(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=r(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const x=r(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&s(e,["parameters","outputOptions","compressionQuality"],x);const w=r(t,["editMode"]);e!==void 0&&w!=null&&s(e,["parameters","editMode"],w);const v=r(t,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),n}function nm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);const l=r(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>em(f))),s(n,["instances[0]","referenceImages"],u)}const a=r(e,["config"]);return a!=null&&s(n,["config"],tm(a,n)),n}function im(t,e){const n={},i=r(t,["includeRaiReason"]);e!==void 0&&i!=null&&s(e,["parameters","includeRaiReason"],i);const o=r(t,["outputMimeType"]);e!==void 0&&o!=null&&s(e,["parameters","outputOptions","mimeType"],o);const l=r(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=r(t,["enhanceInputImage"]);e!==void 0&&a!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=r(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&s(e,["parameters","sampleCount"],f);const c=r(t,["mode"]);return e!==void 0&&c!=null&&s(e,["parameters","mode"],c),n}function om(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["image"]);o!=null&&s(n,["instances[0]","image"],Kt(o));const l=r(e,["upscaleFactor"]);l!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=r(e,["config"]);return a!=null&&s(n,["config"],im(a,n)),n}function rm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function sm(t,e,n){const i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&s(n,["_query","pageSize"],o);const l=r(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=r(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],Qr(t,u)),i}function lm(t,e){const n={},i=r(e,["config"]);return i!=null&&s(n,["config"],sm(t,i,n)),n}function am(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const o=r(t,["description"]);e!==void 0&&o!=null&&s(e,["description"],o);const l=r(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function um(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],am(o,n)),n}function cm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function fm(t,e){const n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],tt(oe(i)));const o=r(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>fs(u))),s(e,["tools"],a)}const l=r(t,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),n}function dm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>tt(u))),s(n,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["config"],fm(l,n)),n}function pm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["contents"]);if(o!=null){let a=he(o);Array.isArray(a)&&(a=a.map(u=>tt(u))),s(n,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(n,["config"],l),n}function mm(t){const e={},n=r(t,["uri"]);n!=null&&s(e,["gcsUri"],n);const i=r(t,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Ie(i));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function hm(t,e){const n={},i=r(t,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const l=r(t,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=r(t,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=r(t,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const f=r(t,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);const c=r(t,["resolution"]);e!==void 0&&c!=null&&s(e,["parameters","resolution"],c);const d=r(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=r(t,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const h=r(t,["negativePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","negativePrompt"],h);const g=r(t,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const y=r(t,["generateAudio"]);e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y);const x=r(t,["lastFrame"]);e!==void 0&&x!=null&&s(e,["instances[0]","lastFrame"],Kt(x));const w=r(t,["compressionQuality"]);return e!==void 0&&w!=null&&s(e,["parameters","compressionQuality"],w),n}function gm(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],O(t,i));const o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);const l=r(e,["image"]);l!=null&&s(n,["instances[0]","image"],Kt(l));const a=r(e,["video"]);a!=null&&s(n,["instances[0]","video"],mm(a));const u=r(e,["config"]);return u!=null&&s(n,["config"],hm(u,n)),n}function ym(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function xm(t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function vm(t){const e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Cm(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ym(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],xm(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],vm(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function Tm(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Cm(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function wm(t){const e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Sm(t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function km(t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Sm(o))),s(e,["urlMetadata"],i)}return e}function Em(t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],Tm(n));const i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],wm(i));const o=r(t,["tokenCount"]);o!=null&&s(e,["tokenCount"],o);const l=r(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=r(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],km(a));const u=r(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=r(t,["index"]);c!=null&&s(e,["index"],c);const d=r(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=r(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Lo(t){const e={},n=r(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Em(u))),s(e,["candidates"],a)}const i=r(t,["modelVersion"]);i!=null&&s(e,["modelVersion"],i);const o=r(t,["promptFeedback"]);o!=null&&s(e,["promptFeedback"],o);const l=r(t,["usageMetadata"]);return l!=null&&s(e,["usageMetadata"],l),e}function bm(t){const e={},n=r(t,["values"]);return n!=null&&s(e,["values"],n),e}function Am(){return{}}function Im(t){const e={},n=r(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>bm(l))),s(e,["embeddings"],o)}return r(t,["metadata"])!=null&&s(e,["metadata"],Am()),e}function _m(t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],Ie(n));const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ds(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const o=r(t,["contentType"]);return o!=null&&s(e,["contentType"],o),e}function Nm(t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],_m(n));const i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const o=r(t,["_self"]);return o!=null&&s(e,["safetyAttributes"],ds(o)),e}function Mm(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Nm(l))),s(e,["generatedImages"],o)}const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&s(e,["positivePromptSafetyAttributes"],ds(i)),e}function Pm(t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);const o=r(t,["updateTime"]);return o!=null&&s(e,["updateTime"],o),e}function Mn(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const l=r(t,["version"]);l!=null&&s(e,["version"],l);const a=r(t,["_self"]);a!=null&&s(e,["tunedModelInfo"],Pm(a));const u=r(t,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const f=r(t,["outputTokenLimit"]);f!=null&&s(e,["outputTokenLimit"],f);const c=r(t,["supportedGenerationMethods"]);return c!=null&&s(e,["supportedActions"],c),e}function Rm(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["_self"]);if(i!=null){let o=Xr(i);Array.isArray(o)&&(o=o.map(l=>Mn(l))),s(e,["models"],o)}return e}function Dm(){return{}}function Lm(t){const e={},n=r(t,["totalTokens"]);n!=null&&s(e,["totalTokens"],n);const i=r(t,["cachedContentTokenCount"]);return i!=null&&s(e,["cachedContentTokenCount"],i),e}function Fm(t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],Ie(i));const o=r(t,["encoding"]);return o!=null&&s(e,["mimeType"],o),e}function Um(t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],Fm(n)),e}function Vm(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Um(a))),s(e,["generatedVideos"],l)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function qm(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const o=r(t,["done"]);o!=null&&s(e,["done"],o);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const a=r(t,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Vm(a)),e}function Bm(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Gm(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["data"]);i!=null&&s(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function zm(t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function $m(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Bm(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Gm(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],zm(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function Hm(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>$m(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Jm(t){const e={},n=r(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function Ym(t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function Wm(t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ym(o))),s(e,["urlMetadata"],i)}return e}function Om(t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],Hm(n));const i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Jm(i));const o=r(t,["finishMessage"]);o!=null&&s(e,["finishMessage"],o);const l=r(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=r(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Wm(a));const u=r(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=r(t,["index"]);c!=null&&s(e,["index"],c);const d=r(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=r(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Fo(t){const e={},n=r(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Om(c))),s(e,["candidates"],f)}const i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);const o=r(t,["responseId"]);o!=null&&s(e,["responseId"],o);const l=r(t,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=r(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=r(t,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Km(t){const e={},n=r(t,["truncated"]);n!=null&&s(e,["truncated"],n);const i=r(t,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function Qm(t){const e={},n=r(t,["values"]);n!=null&&s(e,["values"],n);const i=r(t,["statistics"]);return i!=null&&s(e,["statistics"],Km(i)),e}function Xm(t){const e={},n=r(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function Zm(t){const e={},n=r(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Qm(l))),s(e,["embeddings"],o)}const i=r(t,["metadata"]);return i!=null&&s(e,["metadata"],Xm(i)),e}function jm(t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],Ie(i));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ps(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const o=r(t,["contentType"]);return o!=null&&s(e,["contentType"],o),e}function Qn(t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],jm(n));const i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const o=r(t,["_self"]);o!=null&&s(e,["safetyAttributes"],ps(o));const l=r(t,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function eh(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Qn(l))),s(e,["generatedImages"],o)}const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&s(e,["positivePromptSafetyAttributes"],ps(i)),e}function th(t){const e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Qn(o))),s(e,["generatedImages"],i)}return e}function nh(t){const e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Qn(o))),s(e,["generatedImages"],i)}return e}function ih(t){const e={},n=r(t,["endpoint"]);n!=null&&s(e,["name"],n);const i=r(t,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function oh(t){const e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);const i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);const o=r(t,["updateTime"]);return o!=null&&s(e,["updateTime"],o),e}function rh(t){const e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const i=r(t,["epoch"]);i!=null&&s(e,["epoch"],i);const o=r(t,["step"]);return o!=null&&s(e,["step"],o),e}function Pn(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const l=r(t,["versionId"]);l!=null&&s(e,["version"],l);const a=r(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>ih(h))),s(e,["endpoints"],p)}const u=r(t,["labels"]);u!=null&&s(e,["labels"],u);const f=r(t,["_self"]);f!=null&&s(e,["tunedModelInfo"],oh(f));const c=r(t,["defaultCheckpointId"]);c!=null&&s(e,["defaultCheckpointId"],c);const d=r(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>rh(h))),s(e,["checkpoints"],p)}return e}function sh(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["_self"]);if(i!=null){let o=Xr(i);Array.isArray(o)&&(o=o.map(l=>Pn(l))),s(e,["models"],o)}return e}function lh(){return{}}function ah(t){const e={},n=r(t,["totalTokens"]);return n!=null&&s(e,["totalTokens"],n),e}function uh(t){const e={},n=r(t,["tokensInfo"]);return n!=null&&s(e,["tokensInfo"],n),e}function ch(t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],Ie(i));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function fh(t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],ch(n)),e}function dh(t){const e={},n=r(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>fh(a))),s(e,["generatedVideos"],l)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function ph(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const o=r(t,["done"]);o!=null&&s(e,["done"],o);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const a=r(t,["response"]);return a!=null&&s(e,["response"],dh(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mh="Content-Type",hh="X-Server-Timeout",gh="User-Agent",Rn="x-goog-api-client",yh="1.9.0",xh=`google-genai-sdk/${yh}`,vh="v1beta1",Ch="v1beta",Uo=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Th{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vh,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Ch,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))o.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(n))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&wh(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Vo(o),new En(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Vo(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Ke(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield Z(o.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(f,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),g=h.status,y=h.code,x=`got status: ${g}. ${JSON.stringify(p)}`;if(y>=400&&y<600)throw new Wt({message:x,status:y})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let d=a.match(Uo);for(;d;){const p=d[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Z(new En(h)),a=a.slice(d[0].length),d=a.match(Uo)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=xh+" "+this.clientOptions.userAgentExtra;return e[gh]=n,e[Rn]=n,e[mh]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(hh,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);o.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return l.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:q("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Vo(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Wt({message:o,status:n}):new Error(o)}}function wh(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,a){const u=Object.assign({},l);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const c=a[f],d=u[f];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?u[f]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),u[f]=c)}return u}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sh="mcp_used/unknown";function ms(t){for(const e of t)if(Xn(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function hs(t){var e;const n=(e=t[Rn])!==null&&e!==void 0?e:"";t[Rn]=(n+` ${Sh}`).trimStart()}function kh(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Xn(o)))!==null&&i!==void 0?i:!1}function Eh(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Xn(o)))!==null&&i!==void 0?i:!1}function Xn(t){return t!==null&&typeof t=="object"&&t instanceof Zn}function bh(t,e=100){return Ke(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield Z(t.listTools({cursor:i}));for(const a of l.tools)yield yield Z(a),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Zn{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Zn(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var u=!0,f=(n=void 0,pt(bh(d))),c;c=await f.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const p=o;a.push(p);const h=p.name;if(l[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);l[h]=d}}catch(p){n={error:p}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Ca(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await o.callTool({name:i.name,arguments:i.args},void 0,l);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ah(t,e,n){const i=new da;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const l=Ld(o);Object.assign(i,l),e(i)}class Ih{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Mh(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const d=new Promise(k=>{c=k}),p=e.callbacks,h=function(){c({})},g=this.apiClient,y={onopen:h,onmessage:k=>{Ah(g,p.onmessage,k)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(k){}},x=this.webSocketFactory.create(f,Nh(a),y);x.connect(),await d;const w=O(this.apiClient,e.model),v=as({model:w}),S=Nn({setup:v});return x.send(JSON.stringify(S)),new _h(x,this.apiClient)}}class _h{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Kf(e),i=us(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Qf(e),i=Nn(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Nn({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(We.PLAY)}pause(){this.sendPlaybackControl(We.PAUSE)}stop(){this.sendPlaybackControl(We.STOP)}resetContext(){this.sendPlaybackControl(We.RESET_CONTEXT)}close(){this.conn.close()}}function Nh(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Mh(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ph="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Rh(t,e,n){const i=new fa;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(t.isVertexAI()){const a=bd(l);Object.assign(i,a)}else{const a=Ed(l);Object.assign(i,a)}e(i)}class Dh{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Ih(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,l,a,u;const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&ms(e.config.tools)&&hs(p);const h=Vh(p);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const D=this.apiClient.getApiKey();let E="BidiGenerateContent",M="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),E="BidiGenerateContentConstrained",M="access_token"),d=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${E}?${M}=${D}`}let g=()=>{};const y=new Promise(D=>{g=D}),x=e.callbacks,w=function(){var D;(D=x==null?void 0:x.onopen)===null||D===void 0||D.call(x),g({})},v=this.apiClient,S={onopen:w,onmessage:D=>{Rh(v,x.onmessage,D)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(D){}},k=this.webSocketFactory.create(d,Uh(h),S);k.connect(),await y;let I=O(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const D=this.apiClient.getProject(),E=this.apiClient.getLocation();I=`projects/${D}/locations/${E}/`+I}let _={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vt.AUDIO]}:e.config.responseModalities=[Vt.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],L=[];for(const D of b)if(this.isCallableTool(D)){const E=D;L.push(await E.tool())}else L.push(D);L.length>0&&(e.config.tools=L);const z={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=zf(this.apiClient,z):_=Gf(this.apiClient,z),delete _.config,k.send(JSON.stringify(_)),new Fh(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Lh={turnComplete:!0};class Fh{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=he(n.turns),e.isVertexAI()?i=i.map(o=>tt(o)):i=i.map(o=>Ot(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Ph)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Lh),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Of(e)}:n={realtimeInput:Wf(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Uh(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Vh(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qo=10;function Bo(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ft(a)){o=!0;break}if(!o)return!0;const l=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ft(t){return"callTool"in t&&typeof t.callTool=="function"}function Go(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qh extends qe{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,l,a,u;const f=await this.processParamsForMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!kh(n)||Bo(n.config))return await this.generateContentInternal(f);if(Eh(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const p=he(f.contents),h=(l=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:qo;let g=0;for(;g<h&&(c=await this.generateContentInternal(f),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,x=[];for(const w of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Ft(w)){const S=await w.callTool(c.functionCalls);x.push(...S)}g++,d={role:"user",parts:x},f.contents=he(f.contents),f.contents.push(y),f.contents.push(d),Go(f.config)&&(p.push(y),p.push(d))}return Go(f.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Bo(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let l;const a=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:a.push(f);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ct(Ue.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsForMcpUsage(e){var n,i,o;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async f=>Ft(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&ms(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),hs(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,i,o;const l=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ft(a)){const u=a,f=await u.tool();for(const c of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var n,i,o;const l=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:qo;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return function(c,d,p){var h,g;return Ke(this,arguments,function*(){for(var y,x,w,v;u<l;){a&&(u++,a=!1);const _=yield Z(c.processParamsForMcpUsage(p)),b=yield Z(c.generateContentStreamInternal(_)),L=[],z=[];try{for(var S=!0,k=(x=void 0,pt(b)),I;I=yield Z(k.next()),y=I.done,!y;S=!0){v=I.value,S=!1;const D=v;if(yield yield Z(D),D.candidates&&(!((h=D.candidates[0])===null||h===void 0)&&h.content)){z.push(D.candidates[0].content);for(const E of(g=D.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&E.functionCall){if(!E.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(E.functionCall.name)){const M=yield Z(d.get(E.functionCall.name).callTool([E.functionCall]));L.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${E.functionCall.name}`)}}}}catch(D){x={error:D}}finally{try{!S&&!y&&(w=k.return)&&(yield Z(w.call(k)))}finally{if(x)throw x.error}}if(L.length>0){a=!0;const D=new at;D.candidates=[{content:{role:"user",parts:L}}],yield yield Z(D);const E=[];E.push(...z),E.push({role:"user",parts:L});const M=he(p.contents).concat(E);p.contents=M}else break}})}(this,f,e)}async generateContentInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Do(this.apiClient,e);return u=q("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Fo(d),h=new at;return Object.assign(h,p),h})}else{const c=Ro(this.apiClient,e);return u=q("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Lo(d),h=new at;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Do(this.apiClient,e);return u=q("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return Ke(this,arguments,function*(){var h,g,y,x;try{for(var w=!0,v=pt(p),S;S=yield Z(v.next()),h=S.done,!h;w=!0){x=S.value,w=!1;const I=Fo(yield Z(x.json())),_=new at;Object.assign(_,I),yield yield Z(_)}}catch(k){g={error:k}}finally{try{!w&&!h&&(y=v.return)&&(yield Z(y.call(v)))}finally{if(g)throw g.error}}})})}else{const c=Ro(this.apiClient,e);return u=q("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return Ke(this,arguments,function*(){var h,g,y,x;try{for(var w=!0,v=pt(p),S;S=yield Z(v.next()),h=S.done,!h;w=!0){x=S.value,w=!1;const I=Lo(yield Z(x.json())),_=new at;Object.assign(_,I),yield yield Z(_)}}catch(k){g={error:k}}finally{try{!w&&!h&&(y=v.return)&&(yield Z(y.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Wp(this.apiClient,e);return u=q("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Zm(d),h=new po;return Object.assign(h,p),h})}else{const c=sp(this.apiClient,e);return u=q("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Im(d),h=new po;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Kp(this.apiClient,e);return u=q("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=eh(d),h=new mo;return Object.assign(h,p),h})}else{const c=ap(this.apiClient,e);return u=q("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Mm(d),h=new mo;return Object.assign(h,p),h})}}async editImageInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=nm(this.apiClient,e);return l=q("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=th(f),d=new ra;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=om(this.apiClient,e);return l=q("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=nh(f),d=new sa;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=rm(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Pn(d))}else{const c=up(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Mn(d))}}async listInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=lm(this.apiClient,e);return u=q("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=sh(d),h=new ho;return Object.assign(h,p),h})}else{const c=fp(this.apiClient,e);return u=q("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Rm(d),h=new ho;return Object.assign(h,p),h})}}async update(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=um(this.apiClient,e);return u=q("{model}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Pn(d))}else{const c=pp(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Mn(d))}}async delete(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=cm(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=lh(),p=new go;return Object.assign(p,d),p})}else{const c=mp(this.apiClient,e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Dm(),p=new go;return Object.assign(p,d),p})}}async countTokens(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=dm(this.apiClient,e);return u=q("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=ah(d),h=new yo;return Object.assign(h,p),h})}else{const c=gp(this.apiClient,e);return u=q("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Lm(d),h=new yo;return Object.assign(h,p),h})}}async computeTokens(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=pm(this.apiClient,e);return l=q("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=uh(f),d=new la;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=gm(this.apiClient,e);return u=q("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ph(d))}else{const c=vp(this.apiClient,e);return u=q("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>qm(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bh(t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Gh(t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function zh(t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["operationName"],n);const i=r(t,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function $h(t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],Ie(i));const o=r(t,["encoding"]);return o!=null&&s(e,["mimeType"],o),e}function Hh(t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],$h(n)),e}function Jh(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Hh(a))),s(e,["generatedVideos"],l)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function Yh(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const o=r(t,["done"]);o!=null&&s(e,["done"],o);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const a=r(t,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Jh(a)),e}function Wh(t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],Ie(i));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Oh(t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],Wh(n)),e}function Kh(t){const e={},n=r(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Oh(a))),s(e,["generatedVideos"],l)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function zo(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const o=r(t,["done"]);o!=null&&s(e,["done"],o);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const a=r(t,["response"]);return a!=null&&s(e,["response"],Kh(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qh extends qe{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;return i&&"httpOptions"in i&&(l=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Gh(e);return u=q("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>zo(d))}else{const c=Bh(e);return u=q("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Yh(d))}}async fetchPredictVideosOperationInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=zh(e);return l=q("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>zo(f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xh(t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function gs(t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Xh(n)),e}function Zh(t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],gs(i)),e}function jh(t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Zh(o))),s(e,["speakerVoiceConfigs"],i)}return e}function eg(t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],gs(n));const i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],jh(i));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function tg(t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function ng(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ig(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function og(t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],tg(n));const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],ng(o));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],ig(l));const a=r(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=r(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const f=r(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function rg(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>og(l))),s(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function sg(t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=r(t,["response"]);u!=null&&s(e,["response"],u);const f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function lg(t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ag(t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],lg(n)),e}function ug(t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function cg(t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ug(n)),e}function fg(){return{}}function dg(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>sg(c))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],ag(i));const o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],cg(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],fg());const a=r(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=r(t,["computerUse"]);return u!=null&&s(e,["computerUse"],u),e}function pg(t){const e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $o(){return{}}function mg(t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=r(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function hg(t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],mg(n));const i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function gg(t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function yg(t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],gg(i)),e}function xg(t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function vg(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=r(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=r(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],eg(Kn(p)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],rg(oe(g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let _=je(y);Array.isArray(_)&&(_=_.map(b=>dg(Ze(b)))),s(e,["setup","tools"],_)}const x=r(t,["sessionResumption"]);e!==void 0&&x!=null&&s(e,["setup","sessionResumption"],pg(x));const w=r(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&s(e,["setup","inputAudioTranscription"],$o());const v=r(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],$o());const S=r(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&s(e,["setup","realtimeInputConfig"],hg(S));const k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],yg(k));const I=r(t,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],xg(I)),n}function Cg(t,e){const n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],O(t,i));const o=r(e,["config"]);return o!=null&&s(n,["config"],vg(o,n)),n}function Tg(t,e,n){const i={},o=r(e,["expireTime"]);n!==void 0&&o!=null&&s(n,["expireTime"],o);const l=r(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&s(n,["newSessionExpireTime"],l);const a=r(e,["uses"]);n!==void 0&&a!=null&&s(n,["uses"],a);const u=r(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&s(n,["bidiGenerateContentSetup"],Cg(t,u));const f=r(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&s(n,["fieldMask"],f),i}function wg(t,e){const n={},i=r(e,["config"]);return i!=null&&s(n,["config"],Tg(t,i,n)),n}function Sg(t){const e={},n=r(t,["name"]);return n!=null&&s(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kg(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${n}.${l}`);e.push(...o)}else e.push(n)}return e.join(",")}function Eg(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const l=kg(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>a.includes(c)?`generationConfig.${c}`:c));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class bg extends qe{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=wg(this.apiClient,e);l=q("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=Eg(u,e.config);return o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>Sg(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ag(t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Ig(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);const l=r(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function _g(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Ig(n,e)),e}function Ng(t){const e={},n=r(t,["textInput"]);n!=null&&s(e,["textInput"],n);const i=r(t,["output"]);return i!=null&&s(e,["output"],i),e}function Mg(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=r(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ng(o))),s(e,["examples","examples"],i)}return e}function Pg(t,e){const n={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=r(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=r(t,["epochCount"]);e!==void 0&&o!=null&&s(e,["tuningTask","hyperparameters","epochCount"],o);const l=r(t,["learningRateMultiplier"]);if(l!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=r(t,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=r(t,["learningRate"]);return e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),n}function Rg(t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=r(t,["trainingDataset"]);i!=null&&s(e,["tuningTask","trainingData"],Mg(i));const o=r(t,["config"]);return o!=null&&s(e,["config"],Pg(o,e)),e}function Dg(t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Lg(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);const l=r(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Fg(t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Lg(n,e)),e}function Ug(t,e){const n={},i=r(t,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);const o=r(t,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Vg(t,e){const n={},i=r(t,["gcsUri"]);i!=null&&s(n,["validationDatasetUri"],i);const o=r(t,["vertexDatasetResource"]);return e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),n}function qg(t,e){const n={},i=r(t,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],Vg(i,n));const o=r(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&s(e,["tunedModelDisplayName"],o);const l=r(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=r(t,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=r(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=r(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const c=r(t,["adapterSize"]);if(e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Bg(t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=r(t,["trainingDataset"]);i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],Ug(i,e));const o=r(t,["config"]);return o!=null&&s(e,["config"],qg(o,e)),e}function Gg(t){const e={},n=r(t,["name"]);n!=null&&s(e,["model"],n);const i=r(t,["name"]);return i!=null&&s(e,["endpoint"],i),e}function ys(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["state"]);i!=null&&s(e,["state"],Or(i));const o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);const l=r(t,["tuningTask","startTime"]);l!=null&&s(e,["startTime"],l);const a=r(t,["tuningTask","completeTime"]);a!=null&&s(e,["endTime"],a);const u=r(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const f=r(t,["description"]);f!=null&&s(e,["description"],f);const c=r(t,["baseModel"]);c!=null&&s(e,["baseModel"],c);const d=r(t,["_self"]);d!=null&&s(e,["tunedModel"],Gg(d));const p=r(t,["distillationSpec"]);p!=null&&s(e,["distillationSpec"],p);const h=r(t,["experiment"]);h!=null&&s(e,["experiment"],h);const g=r(t,["labels"]);g!=null&&s(e,["labels"],g);const y=r(t,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const x=r(t,["satisfiesPzi"]);x!=null&&s(e,["satisfiesPzi"],x);const w=r(t,["satisfiesPzs"]);w!=null&&s(e,["satisfiesPzs"],w);const v=r(t,["serviceAccount"]);v!=null&&s(e,["serviceAccount"],v);const S=r(t,["tunedModelDisplayName"]);return S!=null&&s(e,["tunedModelDisplayName"],S),e}function zg(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ys(l))),s(e,["tuningJobs"],o)}return e}function $g(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const o=r(t,["done"]);o!=null&&s(e,["done"],o);const l=r(t,["error"]);return l!=null&&s(e,["error"],l),e}function Hg(t){const e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const i=r(t,["epoch"]);i!=null&&s(e,["epoch"],i);const o=r(t,["step"]);o!=null&&s(e,["step"],o);const l=r(t,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function Jg(t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],n);const i=r(t,["endpoint"]);i!=null&&s(e,["endpoint"],i);const o=r(t,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Hg(a))),s(e,["checkpoints"],l)}return e}function Dn(t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["state"]);i!=null&&s(e,["state"],Or(i));const o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);const l=r(t,["startTime"]);l!=null&&s(e,["startTime"],l);const a=r(t,["endTime"]);a!=null&&s(e,["endTime"],a);const u=r(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const f=r(t,["error"]);f!=null&&s(e,["error"],f);const c=r(t,["description"]);c!=null&&s(e,["description"],c);const d=r(t,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=r(t,["tunedModel"]);p!=null&&s(e,["tunedModel"],Jg(p));const h=r(t,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const g=r(t,["tuningDataStats"]);g!=null&&s(e,["tuningDataStats"],g);const y=r(t,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const x=r(t,["partnerModelTuningSpec"]);x!=null&&s(e,["partnerModelTuningSpec"],x);const w=r(t,["distillationSpec"]);w!=null&&s(e,["distillationSpec"],w);const v=r(t,["experiment"]);v!=null&&s(e,["experiment"],v);const S=r(t,["labels"]);S!=null&&s(e,["labels"],S);const k=r(t,["pipelineJob"]);k!=null&&s(e,["pipelineJob"],k);const I=r(t,["satisfiesPzi"]);I!=null&&s(e,["satisfiesPzi"],I);const _=r(t,["satisfiesPzs"]);_!=null&&s(e,["satisfiesPzs"],_);const b=r(t,["serviceAccount"]);b!=null&&s(e,["serviceAccount"],b);const L=r(t,["tunedModelDisplayName"]);return L!=null&&s(e,["tunedModelDisplayName"],L),e}function Yg(t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Dn(l))),s(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wg extends qe{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ct(Ue.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:kn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Dg(e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Dn(d))}else{const c=Ag(e);return u=q("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ys(d))}}async listInternal(e){var n,i,o,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Fg(e);return u=q("tuningJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Yg(d),h=new xo;return Object.assign(h,p),h})}else{const c=_g(e);return u=q("tunedModels",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=zg(d),h=new xo;return Object.assign(h,p),h})}}async tuneInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=Bg(e);return l=q("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Dn(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rg(e);return l=q("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>$g(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Og{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Kg=1024*1024*8,Qg=3,Xg=1e3,Zg=2,on="x-goog-upload-status";async function jg(t,e,n){var i,o,l;let a=0,u=0,f=new En(new Response),c="upload";for(a=t.size;u<a;){const p=Math.min(Kg,a-u),h=t.slice(u,u+p);u+p>=a&&(c+=", finalize");let g=0,y=Xg;for(;g<Qg&&(f=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[on]));)g++,await ty(y),y=y*Zg;if(u+=p,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[on])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[on])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function ey(t){return{size:t.size,type:t.type}}function ty(t){return new Promise(e=>setTimeout(e,t))}class ny{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jg(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ey(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iy{create(e,n,i){return new oy(e,n,i)}}class oy{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ho="x-goog-api-key";class ry{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ho)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ho,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sy="gl-node/";class ly{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=oa(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new ry(this.apiKey);this.apiClient=new Th({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:sy+"web",uploader:new ny,downloader:new Og}),this.models=new qh(this.apiClient),this.live=new Dh(this.apiClient,o,new iy),this.batches=new Au(this.apiClient),this.chats=new Mc(this.models,this.apiClient),this.caches=new Ic(this.apiClient),this.files=new Hc(this.apiClient),this.operations=new Qh(this.apiClient),this.authTokens=new bg(this.apiClient),this.tunings=new Wg(this.apiClient)}}const jn=()=>{try{const t=localStorage.getItem("firewatch_user_settings");if(t){const e=JSON.parse(t);return{apiKey:e.geminiApiKey||"",model:e.geminiModel||"gemini-2.5-flash"}}}catch(t){console.error("Error reading user settings:",t)}return{apiKey:"",model:"gemini-2.5-flash"}},ei=()=>{const t=jn();if(!t.apiKey)throw new Error("No Gemini API key configured. Please set your API key in Settings. Your API key is stored securely in your browser only.");return new ly({apiKey:t.apiKey})};j.OBJECT,j.STRING,j.STRING,j.STRING,j.STRING,j.STRING,j.STRING,j.BOOLEAN;const ay=async t=>{var e,n,i;try{const o=ei(),{model:l}=jn(),u=`Perform a comprehensive search for recent events and news ${typeof t=="string"?`in or around ${t}`:`around latitude ${t.lat} and longitude ${t.lon}`}, covering the entire perimeter and larger area, not just the exact pinpoint spot. Scan diverse and useful web sources, including news articles, social media discussions, and official alerts posted in the last 72 hours. Focus on topics relevant to a civil rights protection app, such as: - Protests or demonstrations - Law enforcement activity (e.g., police checkpoints, ICE raids, increased patrols, arrests) - Community safety alerts and advisories - Reports of rights violations or civil liberties concerns - Activist alerts. Provide a concise summary of your findings, highlighting any specific actionable information. If there are no relevant events or notable activity, state that the area appears clear based on available data.`,f=await o.models.generateContent({model:l,contents:u,config:{tools:[{googleSearch:{}}]}}),c=f.text,p=(((i=(n=(e=f.candidates)==null?void 0:e[0])==null?void 0:n.groundingMetadata)==null?void 0:i.groundingChunks)??[]).map(h=>h.web).filter(h=>h&&h.uri).map(h=>({uri:h.uri,title:h.title||h.uri})).filter((h,g,y)=>y.findIndex(x=>x.uri===h.uri)===g);return{text:f.text||"",sources:p}}catch(o){throw console.error("Error scanning for local alerts with Gemini API:",o),new Error("An unknown error occurred during the scan.")}},uy={type:j.OBJECT,properties:{consentType:{type:j.STRING,description:'The consent type. Must be one of: "One-Party", "Two-Party", "Varies", or "Unclear".'},summary:{type:j.STRING,description:"A brief, one-sentence summary for a layperson."},disclaimer:{type:j.STRING,description:"A standard disclaimer that this is not legal advice and is for informational purposes only."}},required:["consentType","summary","disclaimer"]},cy=async t=>{var e;try{const n=ei(),i=`Analyze the laws for the state of "${t}". Is it a "One-Party" or "Two-Party" consent state for recording audio conversations where there is a reasonable expectation of privacy? If the law is complex (e.g., differs for in-person vs. electronic), classify as "Varies". Provide a brief, one-sentence summary for a layperson. Include a disclaimer. Respond ONLY with the JSON object.`,l=(e=(await n.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:uy}})).text)==null?void 0:e.trim();return l?JSON.parse(l):(console.error(`Gemini API returned an empty response for recording law for ${t}.`),null)}catch(n){return console.error(`Error fetching recording law for ${t}:`,n),null}},fy={type:j.OBJECT,properties:{term:{type:j.STRING},explanation:{type:j.STRING,description:"A simple explanation (1-2 sentences) for a non-lawyer."}},required:["term","explanation"]},dy=async t=>{var e;try{const n=ei(),{model:i}=jn(),o=`Explain the legal term "${t}" in simple, easy-to-understand language for a non-lawyer. Keep the explanation to 1-2 sentences. Respond ONLY with the JSON object.`,a=(e=(await n.models.generateContent({model:i,contents:o,config:{responseMimeType:"application/json",responseSchema:fy}})).text)==null?void 0:e.trim();return a?JSON.parse(a):(console.error(`Gemini API returned an empty response for legal term "${t}".`),null)}catch(n){return console.error(`Error explaining legal term "${t}":`,n),null}},Bt=()=>m.jsx("div",{className:"flex justify-center items-center py-10",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-400"})}),py=({onClose:t})=>{const[e,n]=F.useState(Zl),i=o=>{const l=[...e];l[o].completed=!l[o].completed,n(l)};return m.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md max-h-[90vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4",children:"Incident Checklist"}),m.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:m.jsx("ul",{className:"space-y-3",children:e.map((o,l)=>m.jsxs("li",{onClick:()=>i(l),className:"flex items-center gap-3 p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",children:[m.jsx("div",{className:`w-6 h-6 rounded-full border-2 ${o.completed?"border-green-400 bg-green-400":"border-gray-500"} flex items-center justify-center flex-shrink-0`,children:o.completed&&m.jsx("svg",{className:"w-4 h-4 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),m.jsx("span",{className:`flex-1 ${o.completed?"line-through text-gray-500":"text-gray-200"}`,children:o.text})]},l))})}),m.jsx("button",{onClick:t,className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Close"})]})})},my=({onClose:t})=>{const e=[{name:"Emergency Services",number:"911"},{name:"ACLU National",number:"1-212-549-2500"},{name:"National Lawyers Guild",number:"1-212-679-5100"},{name:"Immigration Hotline",number:"1-844-363-1423"},{name:"Bail Fund Network",number:"1-800-898-0692"}];return m.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md max-h-[90vh] flex flex-col",onClick:n=>n.stopPropagation(),children:[m.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:"Emergency Resources"}),m.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Quick Actions"}),m.jsx("button",{onClick:()=>window.open("tel:911"),className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg mb-2",children:"ðŸš¨ Call 911"}),m.jsx("button",{onClick:()=>window.open("sms:?&body=Emergency! I need help. My location: [GPS will be attached]"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg",children:"ðŸ“± Text Emergency Contacts"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Legal Hotlines"}),e.map((n,i)=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded-lg mb-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:n.name}),m.jsx("p",{className:"text-sm text-gray-300",children:n.number})]}),m.jsx("button",{onClick:()=>window.open(`tel:${n.number}`),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Call"})]},i))]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Your Rights Card"}),m.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[m.jsx("p",{className:"text-sm text-gray-200 mb-2",children:"ðŸ“‹ Keep this info ready:"}),m.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[m.jsx("li",{children:"â€¢ Right to remain silent"}),m.jsx("li",{children:"â€¢ Right to refuse searches"}),m.jsx("li",{children:"â€¢ Right to attorney"}),m.jsx("li",{children:"â€¢ Right to record police"})]})]})]})]})}),m.jsx("button",{onClick:t,className:"mt-6 w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:"Close"})]})})},hy=()=>{const[t,e]=F.useState(0),[n,i]=F.useState(""),[o,l]=F.useState(""),[a,u]=F.useState(null),[f,c]=F.useState(!1),[d,p]=F.useState(null),[h,g]=F.useState(!1),[y,x]=F.useState(""),[w,v]=F.useState(null),[S,k]=F.useState(!1),[I,_]=F.useState(null),b=F.useCallback(()=>{e(R=>(R+1)%nn.length)},[]),L=F.useCallback(()=>{navigator.clipboard.writeText(nn[t]).then(()=>{i("Copied!"),setTimeout(()=>i(""),2e3)},()=>{i("Failed to copy"),setTimeout(()=>i(""),2e3)})},[t]),z=F.useCallback(async R=>{if(R.preventDefault(),!o.trim()){p("Please enter a state name.");return}c(!0),p(null),u(null);const U=await cy(o.trim());U?u(U):p("Could not retrieve data. Please try again."),c(!1)},[o]),D=F.useCallback(async R=>{if(R.preventDefault(),!y.trim()){_("Please enter a legal term.");return}k(!0),_(null),v(null);const U=await dy(y.trim());U?v(U):_("Could not define this term. Please try another."),k(!1)},[y]),[E,M]=F.useState(!1);return m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[h&&m.jsx(py,{onClose:()=>g(!1)}),E&&m.jsx(my,{onClose:()=>M(!1)}),m.jsx("h2",{className:"text-lg font-semibold text-purple-400 mb-4",children:"Dashboard Toolkit"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg flex flex-col h-56",children:[m.jsxs("div",{className:"flex items-center gap-3 text-purple-300 mb-3",children:[m.jsx(Rt,{className:"w-7 h-7"}),m.jsx("h3",{className:"font-bold",children:"Know Your Script"})]}),m.jsxs("p",{className:"flex-1 text-gray-200 text-lg font-medium italic text-center flex items-center justify-center",children:['"',nn[t],'"']}),m.jsxs("div",{className:"flex gap-2 mt-3",children:[m.jsx("button",{onClick:b,className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white text-sm font-semibold py-2 px-3 rounded-md transition-colors",children:"Next Phrase"}),m.jsx("button",{onClick:L,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 px-3 rounded-md transition-colors relative",children:n?m.jsx("span",{className:"text-green-300",children:n}):"Copy Script"})]})]}),m.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg flex flex-col h-56",children:[m.jsxs("div",{className:"flex items-center gap-3 text-purple-300 mb-3",children:[m.jsx($l,{className:"w-7 h-7"}),m.jsx("h3",{className:"font-bold",children:"State Recording Law"})]}),f?m.jsx(Bt,{}):a?m.jsxs("div",{className:"text-center flex-1 flex flex-col justify-center items-center",children:[m.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[a.consentType," Consent"]}),m.jsx("p",{className:"text-sm text-gray-300 mt-2",children:a.summary}),m.jsx("p",{className:"text-xs text-gray-500 mt-3 italic",children:a.disclaimer})]}):m.jsxs("form",{onSubmit:z,className:"flex-1 flex flex-col justify-center gap-2",children:[m.jsx("input",{type:"text",value:o,onChange:R=>l(R.target.value),placeholder:"Enter State (e.g., California)",className:"bg-gray-800 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5 focus:ring-blue-500 focus:border-blue-500"}),m.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Check Law"}),d&&m.jsx("p",{className:"text-red-400 text-xs text-center mt-1",children:d})]})]}),m.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg flex flex-col h-56 justify-between cursor-pointer hover:bg-gray-700/80 transition-colors",onClick:()=>g(!0),children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-3 text-purple-300 mb-3",children:[m.jsx(Jl,{className:"w-7 h-7"}),m.jsx("h3",{className:"font-bold",children:"Incident Checklist"})]}),m.jsx("p",{className:"text-sm text-gray-300",children:"Key details to document during an encounter. Tap to view and track."})]}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("span",{className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"View Checklist"})})]}),m.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg flex flex-col h-56",children:[m.jsxs("div",{className:"flex items-center gap-3 text-purple-300 mb-3",children:[m.jsx(Wl,{className:"w-7 h-7"}),m.jsx("h3",{className:"font-bold",children:"Legal Jargon Buster"})]}),S?m.jsx(Bt,{}):w?m.jsxs("div",{className:"text-center flex-1 flex flex-col justify-center",children:[m.jsx("p",{className:"font-bold text-lg text-green-400",children:w.term}),m.jsx("p",{className:"text-sm text-gray-300 mt-2",children:w.explanation}),m.jsx("button",{onClick:()=>v(null),className:"text-blue-400 text-xs mt-3 hover:underline",children:"Define another term"})]}):m.jsxs("form",{onSubmit:D,className:"flex-1 flex flex-col justify-center gap-2",children:[m.jsx("input",{type:"text",value:y,onChange:R=>x(R.target.value),placeholder:"e.g., Probable Cause",className:"bg-gray-800 border border-gray-600 text-white text-sm rounded-lg w-full p-2.5 focus:ring-blue-500 focus:border-blue-500"}),m.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Define Term"}),I&&m.jsx("p",{className:"text-red-400 text-xs text-center mt-1",children:I})]})]}),m.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg flex flex-col h-56 justify-between cursor-pointer hover:bg-gray-700/80 transition-colors",onClick:()=>M(!0),children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-3 text-red-300 mb-3",children:[m.jsx(Sn,{className:"w-7 h-7"}),m.jsx("h3",{className:"font-bold",children:"Emergency Resources"})]}),m.jsx("p",{className:"text-sm text-gray-300",children:"Quick access to legal hotlines, emergency contacts, and your rights."})]}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("span",{className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"Get Help Now"})})]})]})]})},xs=({evidence:t,onSelect:e})=>{const n=()=>{switch(t.mediaType){case"video":return m.jsx(Jt,{className:"w-6 h-6 text-blue-400"});case"audio":return m.jsx(yt,{className:"w-6 h-6 text-green-400"});case"photo":return m.jsx(Yt,{className:"w-6 h-6 text-purple-400"});default:return null}},i=o=>new Date(o).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"});return m.jsxs("li",{onClick:e,className:"bg-gray-700 rounded-lg p-3 flex items-center space-x-4 transition-colors hover:bg-gray-600 cursor-pointer",children:[m.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center",children:n()}),m.jsxs("div",{className:"flex-1 overflow-hidden",children:[m.jsx("p",{className:"font-semibold text-gray-100 truncate",children:t.incidentType}),m.jsx("p",{className:"text-sm text-gray-400",children:i(t.timestamp)})]}),m.jsx("svg",{className:"w-5 h-5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})},vs="firewatch_evidence_list",gy=()=>{try{const t=window.localStorage.getItem(vs);if(t)return JSON.parse(t)}catch(t){console.error("Error reading evidence from localStorage",t)}return[]},yy=()=>{const[t,e]=F.useState(gy);F.useEffect(()=>{try{window.localStorage.setItem(vs,JSON.stringify(t))}catch(l){console.error("Error saving evidence to localStorage",l)}},[t]);const n=F.useCallback(l=>{e(a=>[l,...a])},[]),i=F.useCallback(l=>{e(a=>a.filter(u=>u.id!==l))},[]),o=F.useCallback((l,a)=>{e(u=>u.map(f=>f.id===l?{...f,...a}:f))},[]);return{evidence:t,addEvidence:n,deleteEvidence:i,updateEvidence:o}},sS=({setActiveScreen:t,onPanicActivate:e})=>{const{evidence:n}=yy();return m.jsx("div",{className:"bg-gray-900",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[e&&m.jsx("div",{className:"mb-8",children:m.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold py-6 px-8 rounded-xl shadow-2xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] animate-pulse-slow hover:animate-none relative overflow-hidden","aria-label":"Emergency Panic Button - Activates emergency broadcast and recording",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[m.jsx(Sn,{className:"w-12 h-12"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-2xl font-black",children:"EMERGENCY"}),m.jsx("div",{className:"text-sm opacity-90",children:"Tap to activate panic mode"})]}),m.jsx(Sn,{className:"w-12 h-12"})]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-red-600 opacity-0 hover:opacity-20 transition-opacity duration-300"}),m.jsx("style",{children:`
                @keyframes pulse-slow {
                  0%, 100% {
                    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
                  }
                  70% {
                    box-shadow: 0 0 0 20px rgba(220, 38, 38, 0);
                  }
                }
                .animate-pulse-slow {
                  animation: pulse-slow 3s infinite;
                }
              `})]})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[m.jsxs("div",{className:"lg:col-span-2",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Welcome to Firewatch"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Your civil rights protection companion. Document, report, and stay informed."}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("button",{onClick:()=>t("Rights"),className:"bg-red-50 p-4 rounded-lg hover:bg-red-100 transition-colors cursor-pointer text-left",children:[m.jsx("h3",{className:"font-semibold text-gray-800",children:"Know Your Rights"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Quick access to your legal protections"})]}),m.jsxs("button",{onClick:()=>t("Document"),className:"bg-blue-50 p-4 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer text-left",children:[m.jsx("h3",{className:"font-semibold text-gray-800",children:"Document Safely"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Secure recording with legal guidance"})]})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[m.jsx("h2",{className:"text-lg font-semibold text-blue-400 mb-3",children:"Area Status"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-3 rounded-lg bg-gray-900/50 border-l-4 border-gray-500",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"font-bold text-lg text-gray-400",children:"READY"}),m.jsx("span",{className:"px-2 py-1 text-xs font-bold text-gray-900 rounded-full bg-gray-500",children:"STANDBY"})]}),m.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"System ready. Use tools below to scan your area."})]}),m.jsx("p",{className:"text-xs text-gray-500 text-center pt-2",children:"Status updates when you scan your location"})]})]})]}),m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Active Alerts"}),m.jsx("div",{className:"space-y-3",children:m.jsxs("div",{className:"border-l-4 border-gray-300 pl-3",children:[m.jsx("h3",{className:"font-medium text-sm text-gray-800",children:"No active alerts"}),m.jsx("p",{className:"text-xs text-gray-600",children:"Scan your area to check for updates"})]})})]})})]}),m.jsx(hy,{}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6",children:[m.jsxs("div",{className:"p-4 border-b border-gray-200",children:[m.jsx("div",{className:"flex items-center space-x-2",children:m.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Community Safety Map"})}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time community reports and safety information from our partners"})]}),m.jsx("div",{className:"relative",children:m.jsx("iframe",{src:"https://padlet.com/embed/lf0l47ljszbto2uj",className:"w-full h-[600px] md:h-[700px] lg:h-[800px]",style:{border:"none",display:"block"},allow:"camera;microphone;geolocation",title:"Community Safety Map"})}),m.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:m.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ”’ This map is embedded from an external service. Your location and data remain private to your device."})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Evidence"}),n.length>0?m.jsx("div",{className:"space-y-3",children:n.slice(0,3).map(i=>m.jsx(xs,{evidence:i,onSelect:()=>{}},i.id))}):m.jsx("p",{className:"text-gray-500 text-center py-8",children:"No evidence recorded yet. Use the camera to start documenting."})]})]})})},xy=[],vy=t=>{const e=new Date(t),i=Math.floor((new Date().getTime()-e.getTime())/1e3);if(i<60)return`${i}s ago`;const o=Math.floor(i/60);if(o<60)return`${o}m ago`;const l=Math.floor(o/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`},Cy={"Immediate Threat":{borderColor:"border-red-500",iconColor:"text-red-400",icon:m.jsx(Pt,{className:"w-8 h-8"})},"Area Watch":{borderColor:"border-yellow-500",iconColor:"text-yellow-400",icon:m.jsx(Pt,{className:"w-8 h-8"})},"Pattern Alert":{borderColor:"border-blue-500",iconColor:"text-blue-400",icon:m.jsx(Pt,{className:"w-8 h-8"})},"All Clear":{borderColor:"border-green-500",iconColor:"text-green-400",icon:m.jsx(Gr,{className:"w-8 h-8"})}},Ty=({alert:t})=>{const e=Cy[t.type];return m.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 shadow-lg border-l-4 ${e.borderColor} flex space-x-4 items-start`,children:[m.jsx("div",{className:`flex-shrink-0 w-10 pt-1 ${e.iconColor}`,children:e.icon}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-lg text-gray-100",children:t.title}),m.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.location})]}),m.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[m.jsx("p",{className:"text-xs text-gray-500 font-medium",children:vy(t.timestamp)}),t.verified&&m.jsxs("div",{className:"mt-1 inline-flex items-center bg-green-900/50 border border-green-700/50 text-green-300 text-xs font-semibold px-2 py-0.5 rounded-full",children:[m.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Verified"]})]})]}),m.jsx("p",{className:"mt-2 text-gray-300 leading-relaxed text-sm",children:t.description}),m.jsxs("div",{className:"mt-3 p-3 bg-red-900/40 border border-red-700 rounded-lg text-red-200 text-sm shadow-inner",children:[m.jsxs("p",{className:"font-bold flex items-center",children:[m.jsx(Pt,{className:"w-5 h-5 mr-2 text-red-400"}),"Status Note:"]}),m.jsxs("p",{className:"mt-1 text-xs leading-tight",children:["The current status (",m.jsx("span",{className:"font-bold text-red-400",children:"Area Status: High Threat - Red"}),") is based on community-sourced reports and may not be exhaustive or immediately verifiable. Always prioritize your safety and cross-reference information if possible."]})]})]})]})},wy=[{name:"Emergency Contact 1",phone:"15551234567"},{name:"Emergency Contact 2",phone:"15557654321"}],Cs="firewatch_user_settings",At={fallbackLocation:{city:"",state:"",zip:""},emergencyContacts:wy,geminiApiKey:"",geminiModel:"gemini-2.5-flash"},Sy=()=>{try{const t=window.localStorage.getItem(Cs);if(t){const e=JSON.parse(t);return{...At,...e,fallbackLocation:{...At.fallbackLocation,...e.fallbackLocation},emergencyContacts:e.emergencyContacts||At.emergencyContacts}}}catch(t){console.error("Error reading user settings from localStorage",t)}return At},ti=()=>{const[t,e]=F.useState(Sy);F.useEffect(()=>{try{window.localStorage.setItem(Cs,JSON.stringify(t))}catch(i){console.error("Error saving user settings to localStorage",i)}},[t]);const n=F.useCallback(i=>{e(o=>({...o,...i}))},[]);return{settings:t,saveSettings:n}},ky=()=>{const[t,e]=F.useState(!1),[n,i]=F.useState(null),[o,l]=F.useState(null),[a,u]=F.useState(!1),{settings:f}=ti(),[c,d]=F.useState(f.fallbackLocation);F.useEffect(()=>{d(f.fallbackLocation)},[f.fallbackLocation]);const p=F.useCallback(async(w,v=!1)=>{if(e(!0),l(null),i(null),v){const{city:S,state:k,zip:I}=f.fallbackLocation,_=`${S} ${k} ${I}`.trim();l(`Could not determine your current location. Using your saved fallback location to scan: ${_}`)}try{const S=await ay(w);S?i(S):l(k=>(k?k+`
`:"")+"The scan returned no results. This may be an issue with the AI service.")}catch(S){l(k=>(k?k+`
`:"")+(S.message||"An unknown error occurred during the scan."))}finally{e(!1)}},[f.fallbackLocation]),h=F.useCallback(()=>{if(!navigator.geolocation){l("Geolocation is not supported by your browser."),u(!0);return}navigator.geolocation.getCurrentPosition(w=>{const v={lat:w.coords.latitude,lon:w.coords.longitude};p(v)},()=>{const{city:w,state:v,zip:S}=f.fallbackLocation,k=`${w} ${v} ${S}`.trim();k?p(k,!0):l("Location permission denied. Please enable location access, or pre-configure a fallback location in Settings to use this feature."),u(!0)})},[p,f.fallbackLocation]),g=w=>{const{name:v,value:S}=w.target;d(k=>({...k,[v]:S}))},y=w=>{w.preventDefault();const{city:v,state:S,zip:k}=c;if(!v.trim()&&!k.trim()){l("Please provide at least a City or Zip Code to scan.");return}const I=`${v} ${S} ${k}`.trim();p(I)},x=a?"Scan With My Location Instead":"Scan My Area";return m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-3",children:"Live Area Scan"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:a?"Enter a location to search for recent civil rights related events and alerts, covering the entire perimeter and larger area.":"Use our AI-powered scanner to search for recent civil rights related events in your vicinity, covering the entire perimeter and larger area."}),!t&&m.jsxs("button",{onClick:h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 ease-in-out transform hover:scale-105","aria-label":"Scan My Area",children:[m.jsx(Ai,{className:"w-6 h-6"}),x]}),!a&&!t&&m.jsx("button",{onClick:()=>u(!0),className:"w-full text-center text-sm text-blue-400 hover:text-blue-300 mt-3",children:"or scan a different location"}),t&&m.jsx(Bt,{}),o&&m.jsxs("div",{className:"mt-4 bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg whitespace-pre-wrap",role:"alert",children:[m.jsx("p",{className:"font-bold",children:"Scan Notice"}),m.jsx("p",{className:"text-sm",children:o})]}),a&&!t&&m.jsxs("form",{onSubmit:y,className:"mt-4 space-y-4 animate-fade-in",children:[m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3",children:[m.jsx("input",{type:"text",name:"city",value:c.city,onChange:g,placeholder:"City","aria-label":"City",className:"sm:col-span-2 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"}),m.jsx("input",{type:"text",name:"state",value:c.state,onChange:g,placeholder:"State","aria-label":"State",maxLength:20,className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"}),m.jsx("input",{type:"text",name:"zip",value:c.zip,onChange:g,placeholder:"Zip Code","aria-label":"Zip Code",inputMode:"numeric",pattern:"[\\d\\s-]*",className:"sm:col-span-2 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"})]}),m.jsxs("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors","aria-label":"Scan This Location",children:[m.jsx(Ai,{className:"w-6 h-6"}),"Scan This Location"]}),m.jsx("style",{children:`
             @keyframes fade-in {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
             }
             .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
           `})]}),n&&m.jsxs("div",{className:"mt-4 space-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Scan Summary"}),m.jsx("div",{className:"text-gray-300 bg-gray-900/50 p-4 rounded-lg whitespace-pre-wrap font-sans",children:n.text})]}),n.sources&&n.sources.length>0&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Sources"}),m.jsx("ul",{className:"space-y-2",children:n.sources.map((w,v)=>m.jsx("li",{className:"bg-gray-700 hover:bg-gray-600/70 p-3 rounded-lg transition-colors",children:m.jsxs("a",{href:w.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-blue-300 hover:text-blue-200",children:[m.jsx(Yl,{className:"w-5 h-5 flex-shrink-0"}),m.jsx("span",{className:"truncate",title:w.title,children:w.title})]})},v))})]})]})]})},lS=()=>{const[t,e]=F.useState(xy),[n,i]=F.useState(!0),[o,l]=F.useState(null);F.useEffect(()=>{const f=setTimeout(()=>i(!1),500);return()=>clearTimeout(f)},[]);const{settings:a}=ti(),u=!!a.geminiApiKey;return m.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-center text-blue-400",children:"Alerts"}),m.jsx("p",{className:"mt-4 text-lg text-center text-gray-300",children:"Real-time enforcement activity and community alerts."})]}),!u&&m.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-100 px-6 py-4 rounded-lg text-center my-6 shadow-xl animate-pulse",children:[m.jsx("p",{className:"font-bold text-lg mb-2",children:"ðŸš¨ Attention: Test Data Displayed! ðŸš¨"}),m.jsxs("p",{className:"text-sm leading-relaxed",children:["Currently, you're viewing ",m.jsx("span",{className:"font-bold text-red-50",children:"sample alerts"})," for demonstration purposes. These are not live, real-time incidents. To ensure your safety and receive accurate, localized threat intelligence, please ",m.jsx("a",{href:"/settings",className:"underline font-bold text-red-50 hover:text-white transition-colors duration-200",children:"securely configure your API key in Settings"}),". Once set up, activate the ",m.jsx("span",{className:"font-bold text-red-50",children:"Location Scanner"})," below to actively monitor your immediate area. Your protection is our priority, and live data ensures you're truly informed."]})]}),m.jsx("div",{className:"my-8",children:m.jsx(ky,{})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-4",children:"Community Verified Alerts"}),n&&m.jsx(Bt,{}),o&&m.jsx("div",{className:"bg-red-900 border border-red-500 text-red-200 px-4 py-3 rounded-lg my-4",role:"alert",children:m.jsx("p",{children:o})}),!n&&t.length>0?m.jsx("ul",{className:"space-y-4",children:t.map(f=>m.jsx("li",{children:m.jsx(Ty,{alert:f})},f.id))}):!n&&m.jsxs("div",{className:"text-center py-8 px-4 text-gray-500 bg-gray-800 rounded-lg flex flex-col items-center justify-center",children:[m.jsx(Vr,{}),m.jsx("p",{className:"mt-2 font-semibold",children:"No Active Alerts"}),m.jsx("p",{className:"text-sm",children:"It's all quiet for now. New alerts will appear here."})]})]})]})},Ey={traffic_stop:`
# Traffic Stop

## What to Do
* Turn on your interior light if it's dark.
* Keep your hands on the steering wheel where the officer can see them.
* Limit your movements.
* If you need to get your license and registration, tell the officer where they are and ask for permission before reaching for them.
* You do not have to consent to a search of your car. If the officer asks, you can say "Officer, I do not consent to searches."
* If the officer has probable cause, they may be able to search your car anyway.

## What to Say
* Provide your driver's license, registration, and proof of insurance when requested.
* You are only required to identify yourself. You do not have to answer questions about where you are going or where you are coming from.
* You can state, "I am going to remain silent."
* If you wish to end the interaction, you can ask, "Am I free to go?"

## Important Rights
* **The Fourth Amendment** protects you from unreasonable searches and seizures. Generally, police need a warrant to search your property, but there are exceptions for vehicles.
* **The Fifth Amendment** gives you the right to remain silent to avoid self-incrimination.
`,home_visit:`
# Home Visit

## What to Do
* Do not open your door to law enforcement unless they have a warrant signed by a judge.
* If they say they have a warrant, ask them to slip it under the door or hold it up to a window so you can read it.
* A warrant must specify the address to be searched and the people or things to be seized.
* If they do not have a warrant, you do not have to let them in, and you do not have to answer their questions. You can speak to them through the closed door.

## What to Say
* "Officer, do you have a warrant?"
* If they don't have a warrant: "I do not consent to you entering my home."
* "I am going to remain silent. I want to speak with a lawyer."
* You do not have to answer any questions.

## Important Rights
* **The Fourth Amendment** provides the strongest protection for your home. Police cannot enter without a warrant, your consent, or an emergency situation (like hearing screams for help).
* You have the right to refuse entry if police do not have a warrant.
`,workplace_raid:`
# Workplace Raid

## What to Do
* Do not run or resist arrest, even if you believe the raid is unjust. This could lead to additional charges.
* Stay calm and do not provide false documents or information.
* Do not physically obstruct officers.
* Pay attention to the details of the raid: who is being arrested, what areas are being searched.

## What to Say
* You have the right to remain silent. You can say, "I am going to remain silent and I want to speak to a lawyer."
* Do not answer questions about your immigration status or where you were born.
* If you are an employer, you can state that you do not consent to a search of non-public areas of your business without a warrant.

## Important Rights
* **The Fourth Amendment** protects against unreasonable searches of your person and workplace, though the level of protection is different from your home.
* **The Fifth Amendment** protects your right to remain silent. This applies to all individuals, regardless of citizenship status.
`,public_protest:`
# Public Protest

## What to Do
* You can generally protest in public spaces like streets, sidewalks, and parks.
* You may need a permit for larger protests, marches, or if you are using sound amplification. Check local regulations.
* Police can order you to disperse if the protest becomes violent or is blocking access to public or private property. You should follow lawful orders to disperse.
* Stay on public property. Protesting on private property without permission is trespassing.

## What to Say
* You do not have to answer questions from law enforcement about your political beliefs or affiliations.
* If an officer stops you, you can ask, "Am I free to go?"
* If you are being arrested, you can say, "I am going to remain silent. I would like a lawyer."

## Important Rights
* **The First Amendment** protects your rights to freedom of speech and peaceful assembly.
* These rights are not absolute. The government can place reasonable "time, place, and manner" restrictions on protests to ensure public safety.
`,questioning:`
# Being Questioned

## What to Do
* Determine if you are free to leave. You can ask the officer, "Am I being detained, or am I free to go?"
* If you are free to go, you can calmly walk away.
* If you are being detained or are under arrest, do not resist physically.
* Do not lie or provide false documents.

## What to Say
* You can and should say, "I am going to remain silent."
* You can and should say, "I want to speak with a lawyer."
* You only need to provide your name if you are being detained or arrested. You do not need to answer other questions.
* Repeat these phrases as necessary. Answering one question can sometimes be interpreted as waiving your right to remain silent for further questions.

## Important Rights
* **The Fifth Amendment** gives you the right to remain silent and not incriminate yourself.
* **The Sixth Amendment** gives you the right to an attorney. You should invoke this right immediately upon being arrested.
`,filming_police:`
# Filming Police

## What to Do
* You have a right to film police officers in public while they are performing their official duties.
* Stay at a safe distance and do not interfere with their actions. If they give you a lawful order to step back, do so.
* You can film openly. You do not need to hide your camera.
* Police cannot delete your footage or confiscate your device without a warrant.

## What to Say
* If an officer tells you to stop recording, you can say, "I have a First Amendment right to record police in public."
* Do not antagonize the officers. The goal is to document, not escalate.
* If they ask for your phone to view the video, you can say, "I do not consent to a search of my phone."

## Important Rights
* **The First Amendment** has been interpreted by most federal courts to protect the right to record police officers in public.
* **The Fourth Amendment** protects your phone and its contents from being searched without a warrant.
`};function by(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ay=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Iy=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_y={};function Jo(t,e){return(_y.jsx?Iy:Ay).test(t)}const Ny=/[ \t\n\f\r]/g;function My(t){return typeof t=="object"?t.type==="text"?Yo(t.value):!1:Yo(t)}function Yo(t){return t.replace(Ny,"")===""}class Tt{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Tt.prototype.normal={};Tt.prototype.property={};Tt.prototype.space=void 0;function Ts(t,e){const n={},i={};for(const o of t)Object.assign(n,o.property),Object.assign(i,o.normal);return new Tt(n,i,e)}function Ln(t){return t.toLowerCase()}class ue{constructor(e,n){this.attribute=n,this.property=e}}ue.prototype.attribute="";ue.prototype.booleanish=!1;ue.prototype.boolean=!1;ue.prototype.commaOrSpaceSeparated=!1;ue.prototype.commaSeparated=!1;ue.prototype.defined=!1;ue.prototype.mustUseProperty=!1;ue.prototype.number=!1;ue.prototype.overloadedBoolean=!1;ue.prototype.property="";ue.prototype.spaceSeparated=!1;ue.prototype.space=void 0;let Py=0;const H=Be(),te=Be(),Fn=Be(),N=Be(),X=Be(),Qe=Be(),fe=Be();function Be(){return 2**++Py}const Un=Object.freeze(Object.defineProperty({__proto__:null,boolean:H,booleanish:te,commaOrSpaceSeparated:fe,commaSeparated:Qe,number:N,overloadedBoolean:Fn,spaceSeparated:X},Symbol.toStringTag,{value:"Module"})),rn=Object.keys(Un);class ni extends ue{constructor(e,n,i,o){let l=-1;if(super(e,n),Wo(this,"space",o),typeof i=="number")for(;++l<rn.length;){const a=rn[l];Wo(this,rn[l],(i&Un[a])===Un[a])}}}ni.prototype.defined=!0;function Wo(t,e,n){n&&(t[e]=n)}function nt(t){const e={},n={};for(const[i,o]of Object.entries(t.properties)){const l=new ni(i,t.transform(t.attributes||{},i),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),e[i]=l,n[Ln(i)]=i,n[Ln(l.attribute)]=i}return new Tt(e,n,t.space)}const ws=nt({properties:{ariaActiveDescendant:null,ariaAtomic:te,ariaAutoComplete:null,ariaBusy:te,ariaChecked:te,ariaColCount:N,ariaColIndex:N,ariaColSpan:N,ariaControls:X,ariaCurrent:null,ariaDescribedBy:X,ariaDetails:null,ariaDisabled:te,ariaDropEffect:X,ariaErrorMessage:null,ariaExpanded:te,ariaFlowTo:X,ariaGrabbed:te,ariaHasPopup:null,ariaHidden:te,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:X,ariaLevel:N,ariaLive:null,ariaModal:te,ariaMultiLine:te,ariaMultiSelectable:te,ariaOrientation:null,ariaOwns:X,ariaPlaceholder:null,ariaPosInSet:N,ariaPressed:te,ariaReadOnly:te,ariaRelevant:null,ariaRequired:te,ariaRoleDescription:X,ariaRowCount:N,ariaRowIndex:N,ariaRowSpan:N,ariaSelected:te,ariaSetSize:N,ariaSort:null,ariaValueMax:N,ariaValueMin:N,ariaValueNow:N,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ss(t,e){return e in t?t[e]:e}function ks(t,e){return Ss(t,e.toLowerCase())}const Ry=nt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qe,acceptCharset:X,accessKey:X,action:null,allow:null,allowFullScreen:H,allowPaymentRequest:H,allowUserMedia:H,alt:null,as:null,async:H,autoCapitalize:null,autoComplete:X,autoFocus:H,autoPlay:H,blocking:X,capture:null,charSet:null,checked:H,cite:null,className:X,cols:N,colSpan:null,content:null,contentEditable:te,controls:H,controlsList:X,coords:N|Qe,crossOrigin:null,data:null,dateTime:null,decoding:null,default:H,defer:H,dir:null,dirName:null,disabled:H,download:Fn,draggable:te,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:H,formTarget:null,headers:X,height:N,hidden:Fn,high:N,href:null,hrefLang:null,htmlFor:X,httpEquiv:X,id:null,imageSizes:null,imageSrcSet:null,inert:H,inputMode:null,integrity:null,is:null,isMap:H,itemId:null,itemProp:X,itemRef:X,itemScope:H,itemType:X,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:H,low:N,manifest:null,max:null,maxLength:N,media:null,method:null,min:null,minLength:N,multiple:H,muted:H,name:null,nonce:null,noModule:H,noValidate:H,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:H,optimum:N,pattern:null,ping:X,placeholder:null,playsInline:H,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:H,referrerPolicy:null,rel:X,required:H,reversed:H,rows:N,rowSpan:N,sandbox:X,scope:null,scoped:H,seamless:H,selected:H,shadowRootClonable:H,shadowRootDelegatesFocus:H,shadowRootMode:null,shape:null,size:N,sizes:null,slot:null,span:N,spellCheck:te,src:null,srcDoc:null,srcLang:null,srcSet:null,start:N,step:null,style:null,tabIndex:N,target:null,title:null,translate:null,type:null,typeMustMatch:H,useMap:null,value:te,width:N,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:X,axis:null,background:null,bgColor:null,border:N,borderColor:null,bottomMargin:N,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:H,declare:H,event:null,face:null,frame:null,frameBorder:null,hSpace:N,leftMargin:N,link:null,longDesc:null,lowSrc:null,marginHeight:N,marginWidth:N,noResize:H,noHref:H,noShade:H,noWrap:H,object:null,profile:null,prompt:null,rev:null,rightMargin:N,rules:null,scheme:null,scrolling:te,standby:null,summary:null,text:null,topMargin:N,valueType:null,version:null,vAlign:null,vLink:null,vSpace:N,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:H,disableRemotePlayback:H,prefix:null,property:null,results:N,security:null,unselectable:null},space:"html",transform:ks}),Dy=nt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fe,accentHeight:N,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:N,amplitude:N,arabicForm:null,ascent:N,attributeName:null,attributeType:null,azimuth:N,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:N,by:null,calcMode:null,capHeight:N,className:X,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:N,diffuseConstant:N,direction:null,display:null,dur:null,divisor:N,dominantBaseline:null,download:H,dx:null,dy:null,edgeMode:null,editable:null,elevation:N,enableBackground:null,end:null,event:null,exponent:N,externalResourcesRequired:null,fill:null,fillOpacity:N,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qe,g2:Qe,glyphName:Qe,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:N,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:N,horizOriginX:N,horizOriginY:N,id:null,ideographic:N,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:N,k:N,k1:N,k2:N,k3:N,k4:N,kernelMatrix:fe,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:N,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:N,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:N,overlineThickness:N,paintOrder:null,panose1:null,path:null,pathLength:N,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:X,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:N,pointsAtY:N,pointsAtZ:N,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fe,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fe,rev:fe,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fe,requiredFeatures:fe,requiredFonts:fe,requiredFormats:fe,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:N,specularExponent:N,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:N,strikethroughThickness:N,string:null,stroke:null,strokeDashArray:fe,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:N,strokeOpacity:N,strokeWidth:null,style:null,surfaceScale:N,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fe,tabIndex:N,tableValues:null,target:null,targetX:N,targetY:N,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fe,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:N,underlineThickness:N,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:N,values:null,vAlphabetic:N,vMathematical:N,vectorEffect:null,vHanging:N,vIdeographic:N,version:null,vertAdvY:N,vertOriginX:N,vertOriginY:N,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:N,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ss}),Es=nt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),bs=nt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ks}),As=nt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Ly={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Fy=/[A-Z]/g,Oo=/-[a-z]/g,Uy=/^data[-\w.:]+$/i;function Vy(t,e){const n=Ln(e);let i=e,o=ue;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Uy.test(e)){if(e.charAt(4)==="-"){const l=e.slice(5).replace(Oo,By);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=e.slice(4);if(!Oo.test(l)){let a=l.replace(Fy,qy);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}o=ni}return new o(i,e)}function qy(t){return"-"+t.toLowerCase()}function By(t){return t.charAt(1).toUpperCase()}const Gy=Ts([ws,Ry,Es,bs,As],"html"),ii=Ts([ws,Dy,Es,bs,As],"svg");function zy(t){return t.join(" ").trim()}var He={},sn,Ko;function $y(){if(Ko)return sn;Ko=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,c="/",d="*",p="",h="comment",g="declaration";sn=function(x,w){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];w=w||{};var v=1,S=1;function k(U){var V=U.match(e);V&&(v+=V.length);var B=U.lastIndexOf(f);S=~B?U.length-B:S+U.length}function I(){var U={line:v,column:S};return function(V){return V.position=new _(U),z(),V}}function _(U){this.start=U,this.end={line:v,column:S},this.source=w.source}_.prototype.content=x;function b(U){var V=new Error(w.source+":"+v+":"+S+": "+U);if(V.reason=U,V.filename=w.source,V.line=v,V.column=S,V.source=x,!w.silent)throw V}function L(U){var V=U.exec(x);if(V){var B=V[0];return k(B),x=x.slice(B.length),V}}function z(){L(n)}function D(U){var V;for(U=U||[];V=E();)V!==!1&&U.push(V);return U}function E(){var U=I();if(!(c!=x.charAt(0)||d!=x.charAt(1))){for(var V=2;p!=x.charAt(V)&&(d!=x.charAt(V)||c!=x.charAt(V+1));)++V;if(V+=2,p===x.charAt(V-1))return b("End of comment missing");var B=x.slice(2,V-2);return S+=2,k(B),x=x.slice(V),S+=2,U({type:h,comment:B})}}function M(){var U=I(),V=L(i);if(V){if(E(),!L(o))return b("property missing ':'");var B=L(l),ee=U({type:g,property:y(V[0].replace(t,p)),value:B?y(B[0].replace(t,p)):p});return L(a),ee}}function R(){var U=[];D(U);for(var V;V=M();)V!==!1&&(U.push(V),D(U));return U}return z(),R()};function y(x){return x?x.replace(u,p):p}return sn}var Qo;function Hy(){if(Qo)return He;Qo=1;var t=He&&He.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(He,"__esModule",{value:!0}),He.default=n;var e=t($y());function n(i,o){var l=null;if(!i||typeof i!="string")return l;var a=(0,e.default)(i),u=typeof o=="function";return a.forEach(function(f){if(f.type==="declaration"){var c=f.property,d=f.value;u?o(c,d,f):d&&(l=l||{},l[c]=d)}}),l}return He}var ut={},Xo;function Jy(){if(Xo)return ut;Xo=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,l=function(c){return!c||n.test(c)||t.test(c)},a=function(c,d){return d.toUpperCase()},u=function(c,d){return"".concat(d,"-")},f=function(c,d){return d===void 0&&(d={}),l(c)?c:(c=c.toLowerCase(),d.reactCompat?c=c.replace(o,u):c=c.replace(i,u),c.replace(e,a))};return ut.camelCase=f,ut}var ct,Zo;function Yy(){if(Zo)return ct;Zo=1;var t=ct&&ct.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},e=t(Hy()),n=Jy();function i(o,l){var a={};return!o||typeof o!="string"||(0,e.default)(o,function(u,f){u&&f&&(a[(0,n.camelCase)(u,l)]=f)}),a}return i.default=i,ct=i,ct}var Wy=Yy();const Oy=Ur(Wy),Is=_s("end"),oi=_s("start");function _s(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Ky(t){const e=oi(t),n=Is(t);if(e&&n)return{start:e,end:n}}function mt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?jo(t.position):"start"in t||"end"in t?jo(t):"line"in t||"column"in t?Vn(t):""}function Vn(t){return er(t&&t.line)+":"+er(t&&t.column)}function jo(t){return Vn(t&&t.start)+"-"+Vn(t&&t.end)}function er(t){return t&&typeof t=="number"?t:1}class se extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",l={},a=!1;if(n&&("line"in n&&"column"in n?l={place:n}:"start"in n&&"end"in n?l={place:n}:"type"in n?l={ancestors:[n],place:n.position}:l={...n}),typeof e=="string"?o=e:!l.cause&&e&&(a=!0,o=e.message,l.cause=e),!l.ruleId&&!l.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?l.ruleId=i:(l.source=i.slice(0,f),l.ruleId=i.slice(f+1))}if(!l.place&&l.ancestors&&l.ancestors){const f=l.ancestors[l.ancestors.length-1];f&&(l.place=f.position)}const u=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=o,this.line=u?u.line:void 0,this.name=mt(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=a&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}se.prototype.file="";se.prototype.name="";se.prototype.reason="";se.prototype.message="";se.prototype.stack="";se.prototype.column=void 0;se.prototype.line=void 0;se.prototype.ancestors=void 0;se.prototype.cause=void 0;se.prototype.fatal=void 0;se.prototype.place=void 0;se.prototype.ruleId=void 0;se.prototype.source=void 0;const ri={}.hasOwnProperty,Qy=new Map,Xy=/[A-Z]/g,Zy=new Set(["table","tbody","thead","tfoot","tr"]),jy=new Set(["td","th"]),Ns="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ex(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=ax(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=lx(n,e.jsx,e.jsxs)}const o={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ii:Gy,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},l=Ms(o,t,void 0);return l&&typeof l!="string"?l:o.create(t,o.Fragment,{children:l||void 0},void 0)}function Ms(t,e,n){if(e.type==="element")return tx(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return nx(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return ox(t,e,n);if(e.type==="mdxjsEsm")return ix(t,e);if(e.type==="root")return rx(t,e,n);if(e.type==="text")return sx(t,e)}function tx(t,e,n){const i=t.schema;let o=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=ii,t.schema=o),t.ancestors.push(e);const l=Rs(t,e.tagName,!1),a=ux(t,e);let u=li(t,e);return Zy.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!My(f):!0})),Ps(t,a,l,e),si(a,u),t.ancestors.pop(),t.schema=i,t.create(e,l,a,n)}function nx(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}xt(t,e.position)}function ix(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);xt(t,e.position)}function ox(t,e,n){const i=t.schema;let o=i;e.name==="svg"&&i.space==="html"&&(o=ii,t.schema=o),t.ancestors.push(e);const l=e.name===null?t.Fragment:Rs(t,e.name,!0),a=cx(t,e),u=li(t,e);return Ps(t,a,l,e),si(a,u),t.ancestors.pop(),t.schema=i,t.create(e,l,a,n)}function rx(t,e,n){const i={};return si(i,li(t,e)),t.create(e,t.Fragment,i,n)}function sx(t,e){return e.value}function Ps(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function si(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function lx(t,e,n){return i;function i(o,l,a,u){const c=Array.isArray(a.children)?n:e;return u?c(l,a,u):c(l,a)}}function ax(t,e){return n;function n(i,o,l,a){const u=Array.isArray(l.children),f=oi(i);return e(o,l,a,u,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function ux(t,e){const n={};let i,o;for(o in e.properties)if(o!=="children"&&ri.call(e.properties,o)){const l=fx(t,o,e.properties[o]);if(l){const[a,u]=l;t.tableCellAlignToStyle&&a==="align"&&typeof u=="string"&&jy.has(e.tagName)?i=u:n[a]=u}}if(i){const l=n.style||(n.style={});l[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function cx(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const l=i.data.estree.body[0];l.type;const a=l.expression;a.type;const u=a.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else xt(t,e.position);else{const o=i.name;let l;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const u=i.value.data.estree.body[0];u.type,l=t.evaluater.evaluateExpression(u.expression)}else xt(t,e.position);else l=i.value===null?!0:i.value;n[o]=l}return n}function li(t,e){const n=[];let i=-1;const o=t.passKeys?new Map:Qy;for(;++i<e.children.length;){const l=e.children[i];let a;if(t.passKeys){const f=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(f){const c=o.get(f)||0;a=f+"-"+c,o.set(f,c+1)}}const u=Ms(t,l,a);u!==void 0&&n.push(u)}return n}function fx(t,e,n){const i=Vy(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?by(n):zy(n)),i.property==="style"){let o=typeof n=="object"?n:dx(t,String(n));return t.stylePropertyNameCase==="css"&&(o=px(o)),["style",o]}return[t.elementAttributeNameCase==="react"&&i.space?Ly[i.property]||i.property:i.attribute,n]}}function dx(t,e){try{return Oy(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,o=new se("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=Ns+"#cannot-parse-style-attribute",o}}function Rs(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const o=e.split(".");let l=-1,a;for(;++l<o.length;){const u=Jo(o[l])?{type:"Identifier",name:o[l]}:{type:"Literal",value:o[l]};a=a?{type:"MemberExpression",object:a,property:u,computed:!!(l&&u.type==="Literal"),optional:!1}:u}i=a}else i=Jo(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const o=i.value;return ri.call(t.components,o)?t.components[o]:o}if(t.evaluater)return t.evaluater.evaluateExpression(i);xt(t)}function xt(t,e){const n=new se("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ns+"#cannot-handle-mdx-estrees-without-createevaluater",n}function px(t){const e={};let n;for(n in t)ri.call(t,n)&&(e[mx(n)]=t[n]);return e}function mx(t){let e=t.replace(Xy,hx);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function hx(t){return"-"+t.toLowerCase()}const ln={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gx={};function ai(t,e){const n=gx,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ds(t,i,o)}function Ds(t,e,n){if(yx(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return tr(t.children,e,n)}return Array.isArray(t)?tr(t,e,n):""}function tr(t,e,n){const i=[];let o=-1;for(;++o<t.length;)i[o]=Ds(t[o],e,n);return i.join("")}function yx(t){return!!(t&&typeof t=="object")}const nr=document.createElement("i");function ui(t){const e="&"+t+";";nr.innerHTML=e;const n=nr.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function de(t,e,n,i){const o=t.length;let l=0,a;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);l<i.length;)a=i.slice(l,l+1e4),a.unshift(e,0),t.splice(...a),l+=1e4,e+=1e4}function me(t,e){return t.length>0?(de(t,t.length,0,e),t):e}const ir={}.hasOwnProperty;function Ls(t){const e={};let n=-1;for(;++n<t.length;)xx(e,t[n]);return e}function xx(t,e){let n;for(n in e){const o=(ir.call(t,n)?t[n]:void 0)||(t[n]={}),l=e[n];let a;if(l)for(a in l){ir.call(o,a)||(o[a]=[]);const u=l[a];vx(o[a],Array.isArray(u)?u:u?[u]:[])}}}function vx(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);de(t,0,0,i)}function Fs(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function Ce(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const le=Pe(/[A-Za-z]/),re=Pe(/[\dA-Za-z]/),Cx=Pe(/[#-'*+\--9=?A-Z^-~]/);function Gt(t){return t!==null&&(t<32||t===127)}const qn=Pe(/\d/),Tx=Pe(/[\dA-Fa-f]/),wx=Pe(/[!-/:-@[-`{-~]/);function G(t){return t!==null&&t<-2}function Q(t){return t!==null&&(t<0||t===32)}function J(t){return t===-2||t===-1||t===32}const Qt=Pe(new RegExp("\\p{P}|\\p{S}","u")),Ve=Pe(/\s/);function Pe(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function it(t){const e=[];let n=-1,i=0,o=0;for(;++n<t.length;){const l=t.charCodeAt(n);let a="";if(l===37&&re(t.charCodeAt(n+1))&&re(t.charCodeAt(n+2)))o=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(a=String.fromCharCode(l));else if(l>55295&&l<57344){const u=t.charCodeAt(n+1);l<56320&&u>56319&&u<57344?(a=String.fromCharCode(l,u),o=1):a="ï¿½"}else a=String.fromCharCode(l);a&&(e.push(t.slice(i,n),encodeURIComponent(a)),i=n+o+1,a=""),o&&(n+=o,o=0)}return e.join("")+t.slice(i)}function W(t,e,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let l=0;return a;function a(f){return J(f)?(t.enter(n),u(f)):e(f)}function u(f){return J(f)&&l++<o?(t.consume(f),u):(t.exit(n),e(f))}}const Sx={tokenize:kx};function kx(t){const e=t.attempt(this.parser.constructs.contentInitial,i,o);let n;return e;function i(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),W(t,e,"linePrefix")}function o(u){return t.enter("paragraph"),l(u)}function l(u){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,a(u)}function a(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return G(u)?(t.consume(u),t.exit("chunkText"),l):(t.consume(u),a)}}const Ex={tokenize:bx},or={tokenize:Ax};function bx(t){const e=this,n=[];let i=0,o,l,a;return u;function u(k){if(i<n.length){const I=n[i];return e.containerState=I[1],t.attempt(I[0].continuation,f,c)(k)}return c(k)}function f(k){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&S();const I=e.events.length;let _=I,b;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){b=e.events[_][1].end;break}v(i);let L=I;for(;L<e.events.length;)e.events[L][1].end={...b},L++;return de(e.events,_+1,0,e.events.slice(I)),e.events.length=L,c(k)}return u(k)}function c(k){if(i===n.length){if(!o)return h(k);if(o.currentConstruct&&o.currentConstruct.concrete)return y(k);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(or,d,p)(k)}function d(k){return o&&S(),v(i),h(k)}function p(k){return e.parser.lazy[e.now().line]=i!==n.length,a=e.now().offset,y(k)}function h(k){return e.containerState={},t.attempt(or,g,y)(k)}function g(k){return i++,n.push([e.currentConstruct,e.containerState]),h(k)}function y(k){if(k===null){o&&S(),v(0),t.consume(k);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:l}),x(k)}function x(k){if(k===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(k);return}return G(k)?(t.consume(k),w(t.exit("chunkFlow")),i=0,e.interrupt=void 0,u):(t.consume(k),x)}function w(k,I){const _=e.sliceStream(k);if(I&&_.push(null),k.previous=l,l&&(l.next=k),l=k,o.defineSkip(k.start),o.write(_),e.parser.lazy[k.start.line]){let b=o.events.length;for(;b--;)if(o.events[b][1].start.offset<a&&(!o.events[b][1].end||o.events[b][1].end.offset>a))return;const L=e.events.length;let z=L,D,E;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){if(D){E=e.events[z][1].end;break}D=!0}for(v(i),b=L;b<e.events.length;)e.events[b][1].end={...E},b++;de(e.events,z+1,0,e.events.slice(L)),e.events.length=b}}function v(k){let I=n.length;for(;I-- >k;){const _=n[I];e.containerState=_[1],_[0].exit.call(e,t)}n.length=k}function S(){o.write([null]),l=void 0,o=void 0,e.containerState._closeFlow=void 0}}function Ax(t,e,n){return W(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Xe(t){if(t===null||Q(t)||Ve(t))return 1;if(Qt(t))return 2}function Xt(t,e,n){const i=[];let o=-1;for(;++o<t.length;){const l=t[o].resolveAll;l&&!i.includes(l)&&(e=l(e,n),i.push(l))}return e}const Bn={name:"attention",resolveAll:Ix,tokenize:_x};function Ix(t,e){let n=-1,i,o,l,a,u,f,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[i][1].end},h={...t[n][1].start};rr(p,-f),rr(h,f),a={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[i][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},l={type:f>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},o={type:f>1?"strong":"emphasis",start:{...a.start},end:{...u.end}},t[i][1].end={...a.start},t[n][1].start={...u.end},c=[],t[i][1].end.offset-t[i][1].start.offset&&(c=me(c,[["enter",t[i][1],e],["exit",t[i][1],e]])),c=me(c,[["enter",o,e],["enter",a,e],["exit",a,e],["enter",l,e]]),c=me(c,Xt(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),c=me(c,[["exit",l,e],["enter",u,e],["exit",u,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=me(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,de(t,i-1,n-i+3,c),n=i+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function _x(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=Xe(i);let l;return a;function a(f){return l=f,t.enter("attentionSequence"),u(f)}function u(f){if(f===l)return t.consume(f),u;const c=t.exit("attentionSequence"),d=Xe(f),p=!d||d===2&&o||n.includes(f),h=!o||o===2&&d||n.includes(i);return c._open=!!(l===42?p:p&&(o||!h)),c._close=!!(l===42?h:h&&(d||!p)),e(f)}}function rr(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Nx={name:"autolink",tokenize:Mx};function Mx(t,e,n){let i=0;return o;function o(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),l}function l(g){return le(g)?(t.consume(g),a):g===64?n(g):c(g)}function a(g){return g===43||g===45||g===46||re(g)?(i=1,u(g)):c(g)}function u(g){return g===58?(t.consume(g),i=0,f):(g===43||g===45||g===46||re(g))&&i++<32?(t.consume(g),u):(i=0,c(g))}function f(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Gt(g)?n(g):(t.consume(g),f)}function c(g){return g===64?(t.consume(g),d):Cx(g)?(t.consume(g),c):n(g)}function d(g){return re(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),i=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):h(g)}function h(g){if((g===45||re(g))&&i++<63){const y=g===45?h:p;return t.consume(g),y}return n(g)}}const wt={partial:!0,tokenize:Px};function Px(t,e,n){return i;function i(l){return J(l)?W(t,o,"linePrefix")(l):o(l)}function o(l){return l===null||G(l)?e(l):n(l)}}const Us={continuation:{tokenize:Dx},exit:Lx,name:"blockQuote",tokenize:Rx};function Rx(t,e,n){const i=this;return o;function o(a){if(a===62){const u=i.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),l}return n(a)}function l(a){return J(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function Dx(t,e,n){const i=this;return o;function o(a){return J(a)?W(t,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):l(a)}function l(a){return t.attempt(Us,e,n)(a)}}function Lx(t){t.exit("blockQuote")}const Vs={name:"characterEscape",tokenize:Fx};function Fx(t,e,n){return i;function i(l){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(l),t.exit("escapeMarker"),o}function o(l){return wx(l)?(t.enter("characterEscapeValue"),t.consume(l),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(l)}}const qs={name:"characterReference",tokenize:Ux};function Ux(t,e,n){const i=this;let o=0,l,a;return u;function u(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),l=31,a=re,d(p))}function c(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),l=6,a=Tx,d):(t.enter("characterReferenceValue"),l=7,a=qn,d(p))}function d(p){if(p===59&&o){const h=t.exit("characterReferenceValue");return a===re&&!ui(i.sliceSerialize(h))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(p)&&o++<l?(t.consume(p),d):n(p)}}const sr={partial:!0,tokenize:qx},lr={concrete:!0,name:"codeFenced",tokenize:Vx};function Vx(t,e,n){const i=this,o={partial:!0,tokenize:_};let l=0,a=0,u;return f;function f(b){return c(b)}function c(b){const L=i.events[i.events.length-1];return l=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,u=b,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(b)}function d(b){return b===u?(a++,t.consume(b),d):a<3?n(b):(t.exit("codeFencedFenceSequence"),J(b)?W(t,p,"whitespace")(b):p(b))}function p(b){return b===null||G(b)?(t.exit("codeFencedFence"),i.interrupt?e(b):t.check(sr,x,I)(b)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===null||G(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(b)):J(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),W(t,g,"whitespace")(b)):b===96&&b===u?n(b):(t.consume(b),h)}function g(b){return b===null||G(b)?p(b):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===null||G(b)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(b)):b===96&&b===u?n(b):(t.consume(b),y)}function x(b){return t.attempt(o,I,w)(b)}function w(b){return t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),v}function v(b){return l>0&&J(b)?W(t,S,"linePrefix",l+1)(b):S(b)}function S(b){return b===null||G(b)?t.check(sr,x,I)(b):(t.enter("codeFlowValue"),k(b))}function k(b){return b===null||G(b)?(t.exit("codeFlowValue"),S(b)):(t.consume(b),k)}function I(b){return t.exit("codeFenced"),e(b)}function _(b,L,z){let D=0;return E;function E(B){return b.enter("lineEnding"),b.consume(B),b.exit("lineEnding"),M}function M(B){return b.enter("codeFencedFence"),J(B)?W(b,R,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):R(B)}function R(B){return B===u?(b.enter("codeFencedFenceSequence"),U(B)):z(B)}function U(B){return B===u?(D++,b.consume(B),U):D>=a?(b.exit("codeFencedFenceSequence"),J(B)?W(b,V,"whitespace")(B):V(B)):z(B)}function V(B){return B===null||G(B)?(b.exit("codeFencedFence"),L(B)):z(B)}}}function qx(t,e,n){const i=this;return o;function o(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),l)}function l(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}const an={name:"codeIndented",tokenize:Gx},Bx={partial:!0,tokenize:zx};function Gx(t,e,n){const i=this;return o;function o(c){return t.enter("codeIndented"),W(t,l,"linePrefix",5)(c)}function l(c){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(c):n(c)}function a(c){return c===null?f(c):G(c)?t.attempt(Bx,a,f)(c):(t.enter("codeFlowValue"),u(c))}function u(c){return c===null||G(c)?(t.exit("codeFlowValue"),a(c)):(t.consume(c),u)}function f(c){return t.exit("codeIndented"),e(c)}}function zx(t,e,n){const i=this;return o;function o(a){return i.parser.lazy[i.now().line]?n(a):G(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):W(t,l,"linePrefix",5)(a)}function l(a){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):G(a)?o(a):n(a)}}const $x={name:"codeText",previous:Jx,resolve:Hx,tokenize:Yx};function Hx(t){let e=t.length-4,n=3,i,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)o===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(o=i):(i===e||t[i][1].type==="lineEnding")&&(t[o][1].type="codeTextData",i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),e-=i-o-2,i=o+2),o=void 0);return t}function Jx(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Yx(t,e,n){let i=0,o,l;return a;function a(p){return t.enter("codeText"),t.enter("codeTextSequence"),u(p)}function u(p){return p===96?(t.consume(p),i++,u):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(l=t.enter("codeTextSequence"),o=0,d(p)):G(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),c(p))}function c(p){return p===null||p===32||p===96||G(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),c)}function d(p){return p===96?(t.consume(p),o++,d):o===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(l.type="codeTextData",c(p))}}class Wx{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const o=n||0;this.setCursor(Math.trunc(e));const l=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&ft(this.left,i),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ft(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ft(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ft(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ft(this.left,n.reverse())}}}function ft(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Bs(t){const e={};let n=-1,i,o,l,a,u,f,c;const d=new Wx(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(i=d.get(n),n&&i[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,l=0,l<f.length&&f[l][1].type==="lineEndingBlank"&&(l+=2),l<f.length&&f[l][1].type==="content"))for(;++l<f.length&&f[l][1].type!=="content";)f[l][1].type==="chunkText"&&(f[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,Ox(d,n)),n=e[n],c=!0);else if(i[1]._container){for(l=n,o=void 0;l--;)if(a=d.get(l),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),a[1].type="lineEnding",o=l);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;o&&(i[1].end={...d.get(o)[1].start},u=d.slice(o,n),u.unshift(i),d.splice(o,n-o+1,u))}}return de(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function Ox(t,e){const n=t.get(e)[1],i=t.get(e)[2];let o=e-1;const l=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const u=a.events,f=[],c={};let d,p,h=-1,g=n,y=0,x=0;const w=[x];for(;g;){for(;t.get(++o)[1]!==g;);l.push(o),g._tokenizer||(d=i.sliceStream(g),g.next||d.push(null),p&&a.defineSkip(g.start),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++h<u.length;)u[h][0]==="exit"&&u[h-1][0]==="enter"&&u[h][1].type===u[h-1][1].type&&u[h][1].start.line!==u[h][1].end.line&&(x=h+1,w.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(a.events=[],g?(g._tokenizer=void 0,g.previous=void 0):w.pop(),h=w.length;h--;){const v=u.slice(w[h],w[h+1]),S=l.pop();f.push([S,S+v.length-1]),t.splice(S,2,v)}for(f.reverse(),h=-1;++h<f.length;)c[y+f[h][0]]=y+f[h][1],y+=f[h][1]-f[h][0]-1;return c}const Kx={resolve:Xx,tokenize:Zx},Qx={partial:!0,tokenize:jx};function Xx(t){return Bs(t),t}function Zx(t,e){let n;return i;function i(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(u)}function o(u){return u===null?l(u):G(u)?t.check(Qx,a,l)(u):(t.consume(u),o)}function l(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function a(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function jx(t,e,n){const i=this;return o;function o(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),W(t,l,"linePrefix")}function l(a){if(a===null||G(a))return n(a);const u=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):t.interrupt(i.parser.constructs.flow,n,e)(a)}}function Gs(t,e,n,i,o,l,a,u,f){const c=f||Number.POSITIVE_INFINITY;let d=0;return p;function p(v){return v===60?(t.enter(i),t.enter(o),t.enter(l),t.consume(v),t.exit(l),h):v===null||v===32||v===41||Gt(v)?n(v):(t.enter(i),t.enter(a),t.enter(u),t.enter("chunkString",{contentType:"string"}),x(v))}function h(v){return v===62?(t.enter(l),t.consume(v),t.exit(l),t.exit(o),t.exit(i),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===62?(t.exit("chunkString"),t.exit(u),h(v)):v===null||v===60||G(v)?n(v):(t.consume(v),v===92?y:g)}function y(v){return v===60||v===62||v===92?(t.consume(v),g):g(v)}function x(v){return!d&&(v===null||v===41||Q(v))?(t.exit("chunkString"),t.exit(u),t.exit(a),t.exit(i),e(v)):d<c&&v===40?(t.consume(v),d++,x):v===41?(t.consume(v),d--,x):v===null||v===32||v===40||Gt(v)?n(v):(t.consume(v),v===92?w:x)}function w(v){return v===40||v===41||v===92?(t.consume(v),x):x(v)}}function zs(t,e,n,i,o,l){const a=this;let u=0,f;return c;function c(g){return t.enter(i),t.enter(o),t.consume(g),t.exit(o),t.enter(l),d}function d(g){return u>999||g===null||g===91||g===93&&!f||g===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(g):g===93?(t.exit(l),t.enter(o),t.consume(g),t.exit(o),t.exit(i),e):G(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||G(g)||u++>999?(t.exit("chunkString"),d(g)):(t.consume(g),f||(f=!J(g)),g===92?h:p)}function h(g){return g===91||g===92||g===93?(t.consume(g),u++,p):p(g)}}function $s(t,e,n,i,o,l){let a;return u;function u(h){return h===34||h===39||h===40?(t.enter(i),t.enter(o),t.consume(h),t.exit(o),a=h===40?41:h,f):n(h)}function f(h){return h===a?(t.enter(o),t.consume(h),t.exit(o),t.exit(i),e):(t.enter(l),c(h))}function c(h){return h===a?(t.exit(l),f(a)):h===null?n(h):G(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),W(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===a||h===null||G(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?p:d)}function p(h){return h===a||h===92?(t.consume(h),d):d(h)}}function ht(t,e){let n;return i;function i(o){return G(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,i):J(o)?W(t,i,n?"linePrefix":"lineSuffix")(o):e(o)}}const e0={name:"definition",tokenize:n0},t0={partial:!0,tokenize:i0};function n0(t,e,n){const i=this;let o;return l;function l(g){return t.enter("definition"),a(g)}function a(g){return zs.call(i,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function u(g){return o=Ce(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),f):n(g)}function f(g){return Q(g)?ht(t,c)(g):c(g)}function c(g){return Gs(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(t0,p,p)(g)}function p(g){return J(g)?W(t,h,"whitespace")(g):h(g)}function h(g){return g===null||G(g)?(t.exit("definition"),i.parser.defined.push(o),e(g)):n(g)}}function i0(t,e,n){return i;function i(u){return Q(u)?ht(t,o)(u):n(u)}function o(u){return $s(t,l,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function l(u){return J(u)?W(t,a,"whitespace")(u):a(u)}function a(u){return u===null||G(u)?e(u):n(u)}}const o0={name:"hardBreakEscape",tokenize:r0};function r0(t,e,n){return i;function i(l){return t.enter("hardBreakEscape"),t.consume(l),o}function o(l){return G(l)?(t.exit("hardBreakEscape"),e(l)):n(l)}}const s0={name:"headingAtx",resolve:l0,tokenize:a0};function l0(t,e){let n=t.length-2,i=3,o,l;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},l={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},de(t,i,n-i+1,[["enter",o,e],["enter",l,e],["exit",l,e],["exit",o,e]])),t}function a0(t,e,n){let i=0;return o;function o(d){return t.enter("atxHeading"),l(d)}function l(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&i++<6?(t.consume(d),a):d===null||Q(d)?(t.exit("atxHeadingSequence"),u(d)):n(d)}function u(d){return d===35?(t.enter("atxHeadingSequence"),f(d)):d===null||G(d)?(t.exit("atxHeading"),e(d)):J(d)?W(t,u,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function f(d){return d===35?(t.consume(d),f):(t.exit("atxHeadingSequence"),u(d))}function c(d){return d===null||d===35||Q(d)?(t.exit("atxHeadingText"),u(d)):(t.consume(d),c)}}const u0=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ar=["pre","script","style","textarea"],c0={concrete:!0,name:"htmlFlow",resolveTo:p0,tokenize:m0},f0={partial:!0,tokenize:g0},d0={partial:!0,tokenize:h0};function p0(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function m0(t,e,n){const i=this;let o,l,a,u,f;return c;function c(T){return d(T)}function d(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),p}function p(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),l=!0,x):T===63?(t.consume(T),o=3,i.interrupt?e:C):le(T)?(t.consume(T),a=String.fromCharCode(T),w):n(T)}function h(T){return T===45?(t.consume(T),o=2,g):T===91?(t.consume(T),o=5,u=0,y):le(T)?(t.consume(T),o=4,i.interrupt?e:C):n(T)}function g(T){return T===45?(t.consume(T),i.interrupt?e:C):n(T)}function y(T){const xe="CDATA[";return T===xe.charCodeAt(u++)?(t.consume(T),u===xe.length?i.interrupt?e:R:y):n(T)}function x(T){return le(T)?(t.consume(T),a=String.fromCharCode(T),w):n(T)}function w(T){if(T===null||T===47||T===62||Q(T)){const xe=T===47,Re=a.toLowerCase();return!xe&&!l&&ar.includes(Re)?(o=1,i.interrupt?e(T):R(T)):u0.includes(a.toLowerCase())?(o=6,xe?(t.consume(T),v):i.interrupt?e(T):R(T)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(T):l?S(T):k(T))}return T===45||re(T)?(t.consume(T),a+=String.fromCharCode(T),w):n(T)}function v(T){return T===62?(t.consume(T),i.interrupt?e:R):n(T)}function S(T){return J(T)?(t.consume(T),S):E(T)}function k(T){return T===47?(t.consume(T),E):T===58||T===95||le(T)?(t.consume(T),I):J(T)?(t.consume(T),k):E(T)}function I(T){return T===45||T===46||T===58||T===95||re(T)?(t.consume(T),I):_(T)}function _(T){return T===61?(t.consume(T),b):J(T)?(t.consume(T),_):k(T)}function b(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),f=T,L):J(T)?(t.consume(T),b):z(T)}function L(T){return T===f?(t.consume(T),f=null,D):T===null||G(T)?n(T):(t.consume(T),L)}function z(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||Q(T)?_(T):(t.consume(T),z)}function D(T){return T===47||T===62||J(T)?k(T):n(T)}function E(T){return T===62?(t.consume(T),M):n(T)}function M(T){return T===null||G(T)?R(T):J(T)?(t.consume(T),M):n(T)}function R(T){return T===45&&o===2?(t.consume(T),ee):T===60&&o===1?(t.consume(T),ne):T===62&&o===4?(t.consume(T),ye):T===63&&o===3?(t.consume(T),C):T===93&&o===5?(t.consume(T),Se):G(T)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(f0,ke,U)(T)):T===null||G(T)?(t.exit("htmlFlowData"),U(T)):(t.consume(T),R)}function U(T){return t.check(d0,V,ke)(T)}function V(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),B}function B(T){return T===null||G(T)?U(T):(t.enter("htmlFlowData"),R(T))}function ee(T){return T===45?(t.consume(T),C):R(T)}function ne(T){return T===47?(t.consume(T),a="",ge):R(T)}function ge(T){if(T===62){const xe=a.toLowerCase();return ar.includes(xe)?(t.consume(T),ye):R(T)}return le(T)&&a.length<8?(t.consume(T),a+=String.fromCharCode(T),ge):R(T)}function Se(T){return T===93?(t.consume(T),C):R(T)}function C(T){return T===62?(t.consume(T),ye):T===45&&o===2?(t.consume(T),C):R(T)}function ye(T){return T===null||G(T)?(t.exit("htmlFlowData"),ke(T)):(t.consume(T),ye)}function ke(T){return t.exit("htmlFlow"),e(T)}}function h0(t,e,n){const i=this;return o;function o(a){return G(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),l):n(a)}function l(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}function g0(t,e,n){return i;function i(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(wt,e,n)}}const y0={name:"htmlText",tokenize:x0};function x0(t,e,n){const i=this;let o,l,a;return u;function u(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),f}function f(C){return C===33?(t.consume(C),c):C===47?(t.consume(C),_):C===63?(t.consume(C),k):le(C)?(t.consume(C),z):n(C)}function c(C){return C===45?(t.consume(C),d):C===91?(t.consume(C),l=0,y):le(C)?(t.consume(C),S):n(C)}function d(C){return C===45?(t.consume(C),g):n(C)}function p(C){return C===null?n(C):C===45?(t.consume(C),h):G(C)?(a=p,ne(C)):(t.consume(C),p)}function h(C){return C===45?(t.consume(C),g):p(C)}function g(C){return C===62?ee(C):C===45?h(C):p(C)}function y(C){const ye="CDATA[";return C===ye.charCodeAt(l++)?(t.consume(C),l===ye.length?x:y):n(C)}function x(C){return C===null?n(C):C===93?(t.consume(C),w):G(C)?(a=x,ne(C)):(t.consume(C),x)}function w(C){return C===93?(t.consume(C),v):x(C)}function v(C){return C===62?ee(C):C===93?(t.consume(C),v):x(C)}function S(C){return C===null||C===62?ee(C):G(C)?(a=S,ne(C)):(t.consume(C),S)}function k(C){return C===null?n(C):C===63?(t.consume(C),I):G(C)?(a=k,ne(C)):(t.consume(C),k)}function I(C){return C===62?ee(C):k(C)}function _(C){return le(C)?(t.consume(C),b):n(C)}function b(C){return C===45||re(C)?(t.consume(C),b):L(C)}function L(C){return G(C)?(a=L,ne(C)):J(C)?(t.consume(C),L):ee(C)}function z(C){return C===45||re(C)?(t.consume(C),z):C===47||C===62||Q(C)?D(C):n(C)}function D(C){return C===47?(t.consume(C),ee):C===58||C===95||le(C)?(t.consume(C),E):G(C)?(a=D,ne(C)):J(C)?(t.consume(C),D):ee(C)}function E(C){return C===45||C===46||C===58||C===95||re(C)?(t.consume(C),E):M(C)}function M(C){return C===61?(t.consume(C),R):G(C)?(a=M,ne(C)):J(C)?(t.consume(C),M):D(C)}function R(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),o=C,U):G(C)?(a=R,ne(C)):J(C)?(t.consume(C),R):(t.consume(C),V)}function U(C){return C===o?(t.consume(C),o=void 0,B):C===null?n(C):G(C)?(a=U,ne(C)):(t.consume(C),U)}function V(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||Q(C)?D(C):(t.consume(C),V)}function B(C){return C===47||C===62||Q(C)?D(C):n(C)}function ee(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function ne(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),ge}function ge(C){return J(C)?W(t,Se,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):Se(C)}function Se(C){return t.enter("htmlTextData"),a(C)}}const ci={name:"labelEnd",resolveAll:w0,resolveTo:S0,tokenize:k0},v0={tokenize:E0},C0={tokenize:b0},T0={tokenize:A0};function w0(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",e+=o}}return t.length!==n.length&&de(t,0,t.length,n),t}function S0(t,e){let n=t.length,i=0,o,l,a,u;for(;n--;)if(o=t[n][1],l){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(l=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(a=n);const f={type:t[l][1].type==="labelLink"?"link":"image",start:{...t[l][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[l][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[l+i+2][1].end},end:{...t[a-2][1].start}};return u=[["enter",f,e],["enter",c,e]],u=me(u,t.slice(l+1,l+i+3)),u=me(u,[["enter",d,e]]),u=me(u,Xt(e.parser.constructs.insideSpan.null,t.slice(l+i+4,a-3),e)),u=me(u,[["exit",d,e],t[a-2],t[a-1],["exit",c,e]]),u=me(u,t.slice(a+1)),u=me(u,[["exit",f,e]]),de(t,l,t.length,u),t}function k0(t,e,n){const i=this;let o=i.events.length,l,a;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){l=i.events[o][1];break}return u;function u(h){return l?l._inactive?p(h):(a=i.parser.defined.includes(Ce(i.sliceSerialize({start:l.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),f):n(h)}function f(h){return h===40?t.attempt(v0,d,a?d:p)(h):h===91?t.attempt(C0,d,a?c:p)(h):a?d(h):p(h)}function c(h){return t.attempt(T0,d,p)(h)}function d(h){return e(h)}function p(h){return l._balanced=!0,n(h)}}function E0(t,e,n){return i;function i(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),o}function o(p){return Q(p)?ht(t,l)(p):l(p)}function l(p){return p===41?d(p):Gs(t,a,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return Q(p)?ht(t,f)(p):d(p)}function u(p){return n(p)}function f(p){return p===34||p===39||p===40?$s(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function c(p){return Q(p)?ht(t,d)(p):d(p)}function d(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function b0(t,e,n){const i=this;return o;function o(u){return zs.call(i,t,l,a,"reference","referenceMarker","referenceString")(u)}function l(u){return i.parser.defined.includes(Ce(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function a(u){return n(u)}}function A0(t,e,n){return i;function i(l){return t.enter("reference"),t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),o}function o(l){return l===93?(t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),t.exit("reference"),e):n(l)}}const I0={name:"labelStartImage",resolveAll:ci.resolveAll,tokenize:_0};function _0(t,e,n){const i=this;return o;function o(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),l}function l(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),a):n(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):e(u)}}const N0={name:"labelStartLink",resolveAll:ci.resolveAll,tokenize:M0};function M0(t,e,n){const i=this;return o;function o(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),l}function l(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const un={name:"lineEnding",tokenize:P0};function P0(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),W(t,e,"linePrefix")}}const Ut={name:"thematicBreak",tokenize:R0};function R0(t,e,n){let i=0,o;return l;function l(c){return t.enter("thematicBreak"),a(c)}function a(c){return o=c,u(c)}function u(c){return c===o?(t.enter("thematicBreakSequence"),f(c)):i>=3&&(c===null||G(c))?(t.exit("thematicBreak"),e(c)):n(c)}function f(c){return c===o?(t.consume(c),i++,f):(t.exit("thematicBreakSequence"),J(c)?W(t,u,"whitespace")(c):u(c))}}const ae={continuation:{tokenize:U0},exit:q0,name:"list",tokenize:F0},D0={partial:!0,tokenize:B0},L0={partial:!0,tokenize:V0};function F0(t,e,n){const i=this,o=i.events[i.events.length-1];let l=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,a=0;return u;function u(g){const y=i.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!i.containerState.marker||g===i.containerState.marker:qn(g)){if(i.containerState.type||(i.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(Ut,n,c)(g):c(g);if(!i.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(g)}return n(g)}function f(g){return qn(g)&&++a<10?(t.consume(g),f):(!i.interrupt||a<2)&&(i.containerState.marker?g===i.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||g,t.check(wt,i.interrupt?n:d,t.attempt(D0,h,p))}function d(g){return i.containerState.initialBlankLine=!0,l++,h(g)}function p(g){return J(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),h):n(g)}function h(g){return i.containerState.size=l+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function U0(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(wt,o,l);function o(u){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,W(t,e,"listItemIndent",i.containerState.size+1)(u)}function l(u){return i.containerState.furtherBlankLines||!J(u)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(u)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(L0,e,a)(u))}function a(u){return i.containerState._closeFlow=!0,i.interrupt=void 0,W(t,t.attempt(ae,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function V0(t,e,n){const i=this;return W(t,o,"listItemIndent",i.containerState.size+1);function o(l){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(l):n(l)}}function q0(t){t.exit(this.containerState.type)}function B0(t,e,n){const i=this;return W(t,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(l){const a=i.events[i.events.length-1];return!J(l)&&a&&a[1].type==="listItemPrefixWhitespace"?e(l):n(l)}}const ur={name:"setextUnderline",resolveTo:G0,tokenize:z0};function G0(t,e){let n=t.length,i,o,l;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!l&&t[n][1].type==="definition"&&(l=n);const a={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",l?(t.splice(o,0,["enter",a,e]),t.splice(l+1,0,["exit",t[i][1],e]),t[i][1].end={...t[l][1].end}):t[i][1]=a,t.push(["exit",a,e]),t}function z0(t,e,n){const i=this;let o;return l;function l(c){let d=i.events.length,p;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){p=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(t.enter("setextHeadingLine"),o=c,a(c)):n(c)}function a(c){return t.enter("setextHeadingLineSequence"),u(c)}function u(c){return c===o?(t.consume(c),u):(t.exit("setextHeadingLineSequence"),J(c)?W(t,f,"lineSuffix")(c):f(c))}function f(c){return c===null||G(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const $0={tokenize:H0};function H0(t){const e=this,n=t.attempt(wt,i,t.attempt(this.parser.constructs.flowInitial,o,W(t,t.attempt(this.parser.constructs.flow,o,t.attempt(Kx,o)),"linePrefix")));return n;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEndingBlank"),t.consume(l),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const J0={resolveAll:Js()},Y0=Hs("string"),W0=Hs("text");function Hs(t){return{resolveAll:Js(t==="text"?O0:void 0),tokenize:e};function e(n){const i=this,o=this.parser.constructs[t],l=n.attempt(o,a,u);return a;function a(d){return c(d)?l(d):u(d)}function u(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),f}function f(d){return c(d)?(n.exit("data"),l(d)):(n.consume(d),f)}function c(d){if(d===null)return!0;const p=o[d];let h=-1;if(p)for(;++h<p.length;){const g=p[h];if(!g.previous||g.previous.call(i,i.previous))return!0}return!1}}}function Js(t){return e;function e(n,i){let o=-1,l;for(;++o<=n.length;)l===void 0?n[o]&&n[o][1].type==="data"&&(l=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==l+2&&(n[l][1].end=n[o-1][1].end,n.splice(l+2,o-l-2),o=l+2),l=void 0);return t?t(n,i):n}}function O0(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],o=e.sliceStream(i);let l=o.length,a=-1,u=0,f;for(;l--;){const c=o[l];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(c===-2)f=!0,u++;else if(c!==-1){l++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const c={type:n===t.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?a:i.start._bufferIndex+a,_index:i.start._index+l,line:i.end.line,column:i.end.column-u,offset:i.end.offset-u},end:{...i.end}};i.end={...c.start},i.start.offset===i.end.offset?Object.assign(i,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const K0={42:ae,43:ae,45:ae,48:ae,49:ae,50:ae,51:ae,52:ae,53:ae,54:ae,55:ae,56:ae,57:ae,62:Us},Q0={91:e0},X0={[-2]:an,[-1]:an,32:an},Z0={35:s0,42:Ut,45:[ur,Ut],60:c0,61:ur,95:Ut,96:lr,126:lr},j0={38:qs,92:Vs},ev={[-5]:un,[-4]:un,[-3]:un,33:I0,38:qs,42:Bn,60:[Nx,y0],91:N0,92:[o0,Vs],93:ci,95:Bn,96:$x},tv={null:[Bn,J0]},nv={null:[42,95]},iv={null:[]},ov=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nv,contentInitial:Q0,disable:iv,document:K0,flow:Z0,flowInitial:X0,insideSpan:tv,string:j0,text:ev},Symbol.toStringTag,{value:"Module"}));function rv(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},l=[];let a=[],u=[];const f={attempt:L(_),check:L(b),consume:S,enter:k,exit:I,interrupt:L(b,{interrupt:!0})},c={code:null,containerState:{},defineSkip:x,events:[],now:y,parser:t,previous:null,sliceSerialize:h,sliceStream:g,write:p};let d=e.tokenize.call(c,f);return e.resolveAll&&l.push(e),c;function p(M){return a=me(a,M),w(),a[a.length-1]!==null?[]:(z(e,0),c.events=Xt(l,c.events,c),c.events)}function h(M,R){return lv(g(M),R)}function g(M){return sv(a,M)}function y(){const{_bufferIndex:M,_index:R,line:U,column:V,offset:B}=i;return{_bufferIndex:M,_index:R,line:U,column:V,offset:B}}function x(M){o[M.line]=M.column,E()}function w(){let M;for(;i._index<a.length;){const R=a[i._index];if(typeof R=="string")for(M=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===M&&i._bufferIndex<R.length;)v(R.charCodeAt(i._bufferIndex));else v(R)}}function v(M){d=d(M)}function S(M){G(M)?(i.line++,i.column=1,i.offset+=M===-3?2:1,E()):M!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=M}function k(M,R){const U=R||{};return U.type=M,U.start=y(),c.events.push(["enter",U,c]),u.push(U),U}function I(M){const R=u.pop();return R.end=y(),c.events.push(["exit",R,c]),R}function _(M,R){z(M,R.from)}function b(M,R){R.restore()}function L(M,R){return U;function U(V,B,ee){let ne,ge,Se,C;return Array.isArray(V)?ke(V):"tokenize"in V?ke([V]):ye(V);function ye(ie){return ot;function ot(Ne){const Ge=Ne!==null&&ie[Ne],ze=Ne!==null&&ie.null,kt=[...Array.isArray(Ge)?Ge:Ge?[Ge]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return ke(kt)(Ne)}}function ke(ie){return ne=ie,ge=0,ie.length===0?ee:T(ie[ge])}function T(ie){return ot;function ot(Ne){return C=D(),Se=ie,ie.partial||(c.currentConstruct=ie),ie.name&&c.parser.constructs.disable.null.includes(ie.name)?Re():ie.tokenize.call(R?Object.assign(Object.create(c),R):c,f,xe,Re)(Ne)}}function xe(ie){return M(Se,C),B}function Re(ie){return C.restore(),++ge<ne.length?T(ne[ge]):ee}}}function z(M,R){M.resolveAll&&!l.includes(M)&&l.push(M),M.resolve&&de(c.events,R,c.events.length-R,M.resolve(c.events.slice(R),c)),M.resolveTo&&(c.events=M.resolveTo(c.events,c))}function D(){const M=y(),R=c.previous,U=c.currentConstruct,V=c.events.length,B=Array.from(u);return{from:V,restore:ee};function ee(){i=M,c.previous=R,c.currentConstruct=U,c.events.length=V,u=B,E()}}function E(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function sv(t,e){const n=e.start._index,i=e.start._bufferIndex,o=e.end._index,l=e.end._bufferIndex;let a;if(n===o)a=[t[n].slice(i,l)];else{if(a=t.slice(n,o),i>-1){const u=a[0];typeof u=="string"?a[0]=u.slice(i):a.shift()}l>0&&a.push(t[o].slice(0,l))}return a}function lv(t,e){let n=-1;const i=[];let o;for(;++n<t.length;){const l=t[n];let a;if(typeof l=="string")a=l;else switch(l){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&o)continue;a=" ";break}default:a=String.fromCharCode(l)}o=l===-2,i.push(a)}return i.join("")}function av(t){const i={constructs:Ls([ov,...(t||{}).extensions||[]]),content:o(Sx),defined:[],document:o(Ex),flow:o($0),lazy:{},string:o(Y0),text:o(W0)};return i;function o(l){return a;function a(u){return rv(i,l,u)}}}function uv(t){for(;!Bs(t););return t}const cr=/[\0\t\n\r]/g;function cv(){let t=1,e="",n=!0,i;return o;function o(l,a,u){const f=[];let c,d,p,h,g;for(l=e+(typeof l=="string"?l.toString():new TextDecoder(a||void 0).decode(l)),p=0,e="",n&&(l.charCodeAt(0)===65279&&p++,n=void 0);p<l.length;){if(cr.lastIndex=p,c=cr.exec(l),h=c&&c.index!==void 0?c.index:l.length,g=l.charCodeAt(h),!c){e=l.slice(p);break}if(g===10&&p===h&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),p<h&&(f.push(l.slice(p,h)),t+=h-p),g){case 0:{f.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,f.push(-2);t++<d;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:i=!0,t=1}p=h+1}return u&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const fv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dv(t){return t.replace(fv,pv)}function pv(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),l=o===120||o===88;return Fs(n.slice(l?2:1),l?16:10)}return ui(n)||t}const Ys={}.hasOwnProperty;function mv(t,e,n){return typeof e!="string"&&(n=e,e=void 0),hv(n)(uv(av(n).document().write(cv()(t,e,!0))))}function hv(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Si),autolinkProtocol:D,autolinkEmail:D,atxHeading:l(Ci),blockQuote:l(ze),characterEscape:D,characterReference:D,codeFenced:l(kt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:l(kt,a),codeText:l(bl,a),codeTextData:D,data:D,codeFlowValue:D,definition:l(Al),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:l(Il),hardBreakEscape:l(Ti),hardBreakTrailing:l(Ti),htmlFlow:l(wi,a),htmlFlowData:D,htmlText:l(wi,a),htmlTextData:D,image:l(_l),label:a,link:l(Si),listItem:l(Nl),listItemValue:h,listOrdered:l(ki,p),listUnordered:l(ki),paragraph:l(Ml),reference:T,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:l(Ci),strong:l(Pl),thematicBreak:l(Dl)},exit:{atxHeading:f(),atxHeadingSequence:_,autolink:f(),autolinkEmail:Ge,autolinkProtocol:Ne,blockQuote:f(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:Re,characterReferenceMarkerNumeric:Re,characterReferenceValue:ie,characterReference:ot,codeFenced:f(w),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:E,codeIndented:f(v),codeText:f(B),codeTextData:E,data:E,definition:f(),definitionDestinationString:I,definitionLabelString:S,definitionTitleString:k,emphasis:f(),hardBreakEscape:f(R),hardBreakTrailing:f(R),htmlFlow:f(U),htmlFlowData:E,htmlText:f(V),htmlTextData:E,image:f(ne),label:Se,labelText:ge,lineEnding:M,link:f(ee),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:xe,resourceDestinationString:C,resourceTitleString:ye,resource:ke,setextHeading:f(z),setextHeadingLineSequence:L,setextHeadingText:b,strong:f(),thematicBreak:f()}};Ws(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(A){let P={type:"root",children:[]};const $={stack:[P],tokenStack:[],config:e,enter:u,exit:c,buffer:a,resume:d,data:n},Y=[];let K=-1;for(;++K<A.length;)if(A[K][1].type==="listOrdered"||A[K][1].type==="listUnordered")if(A[K][0]==="enter")Y.push(K);else{const ve=Y.pop();K=o(A,ve,K)}for(K=-1;++K<A.length;){const ve=e[A[K][0]];Ys.call(ve,A[K][1].type)&&ve[A[K][1].type].call(Object.assign({sliceSerialize:A[K][2].sliceSerialize},$),A[K][1])}if($.tokenStack.length>0){const ve=$.tokenStack[$.tokenStack.length-1];(ve[1]||fr).call($,void 0,ve[0])}for(P.position={start:Me(A.length>0?A[0][1].start:{line:1,column:1,offset:0}),end:Me(A.length>0?A[A.length-2][1].end:{line:1,column:1,offset:0})},K=-1;++K<e.transforms.length;)P=e.transforms[K](P)||P;return P}function o(A,P,$){let Y=P-1,K=-1,ve=!1,De,Ee,rt,st;for(;++Y<=$;){const ce=A[Y];switch(ce[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ce[0]==="enter"?K++:K--,st=void 0;break}case"lineEndingBlank":{ce[0]==="enter"&&(De&&!st&&!K&&!rt&&(rt=Y),st=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:st=void 0}if(!K&&ce[0]==="enter"&&ce[1].type==="listItemPrefix"||K===-1&&ce[0]==="exit"&&(ce[1].type==="listUnordered"||ce[1].type==="listOrdered")){if(De){let $e=Y;for(Ee=void 0;$e--;){const be=A[$e];if(be[1].type==="lineEnding"||be[1].type==="lineEndingBlank"){if(be[0]==="exit")continue;Ee&&(A[Ee][1].type="lineEndingBlank",ve=!0),be[1].type="lineEnding",Ee=$e}else if(!(be[1].type==="linePrefix"||be[1].type==="blockQuotePrefix"||be[1].type==="blockQuotePrefixWhitespace"||be[1].type==="blockQuoteMarker"||be[1].type==="listItemIndent"))break}rt&&(!Ee||rt<Ee)&&(De._spread=!0),De.end=Object.assign({},Ee?A[Ee][1].start:ce[1].end),A.splice(Ee||Y,0,["exit",De,ce[2]]),Y++,$++}if(ce[1].type==="listItemPrefix"){const $e={type:"listItem",_spread:!1,start:Object.assign({},ce[1].start),end:void 0};De=$e,A.splice(Y,0,["enter",$e,ce[2]]),Y++,$++,rt=void 0,st=!0}}}return A[P][1]._spread=ve,$}function l(A,P){return $;function $(Y){u.call(this,A(Y),Y),P&&P.call(this,Y)}}function a(){this.stack.push({type:"fragment",children:[]})}function u(A,P,$){this.stack[this.stack.length-1].children.push(A),this.stack.push(A),this.tokenStack.push([P,$||void 0]),A.position={start:Me(P.start),end:void 0}}function f(A){return P;function P($){A&&A.call(this,$),c.call(this,$)}}function c(A,P){const $=this.stack.pop(),Y=this.tokenStack.pop();if(Y)Y[0].type!==A.type&&(P?P.call(this,A,Y[0]):(Y[1]||fr).call(this,A,Y[0]));else throw new Error("Cannot close `"+A.type+"` ("+mt({start:A.start,end:A.end})+"): itâ€™s not open");$.position.end=Me(A.end)}function d(){return ai(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function h(A){if(this.data.expectingFirstListItemValue){const P=this.stack[this.stack.length-2];P.start=Number.parseInt(this.sliceSerialize(A),10),this.data.expectingFirstListItemValue=void 0}}function g(){const A=this.resume(),P=this.stack[this.stack.length-1];P.lang=A}function y(){const A=this.resume(),P=this.stack[this.stack.length-1];P.meta=A}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const A=this.resume(),P=this.stack[this.stack.length-1];P.value=A.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const A=this.resume(),P=this.stack[this.stack.length-1];P.value=A.replace(/(\r?\n|\r)$/g,"")}function S(A){const P=this.resume(),$=this.stack[this.stack.length-1];$.label=P,$.identifier=Ce(this.sliceSerialize(A)).toLowerCase()}function k(){const A=this.resume(),P=this.stack[this.stack.length-1];P.title=A}function I(){const A=this.resume(),P=this.stack[this.stack.length-1];P.url=A}function _(A){const P=this.stack[this.stack.length-1];if(!P.depth){const $=this.sliceSerialize(A).length;P.depth=$}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function L(A){const P=this.stack[this.stack.length-1];P.depth=this.sliceSerialize(A).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function D(A){const $=this.stack[this.stack.length-1].children;let Y=$[$.length-1];(!Y||Y.type!=="text")&&(Y=Rl(),Y.position={start:Me(A.start),end:void 0},$.push(Y)),this.stack.push(Y)}function E(A){const P=this.stack.pop();P.value+=this.sliceSerialize(A),P.position.end=Me(A.end)}function M(A){const P=this.stack[this.stack.length-1];if(this.data.atHardBreak){const $=P.children[P.children.length-1];$.position.end=Me(A.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(P.type)&&(D.call(this,A),E.call(this,A))}function R(){this.data.atHardBreak=!0}function U(){const A=this.resume(),P=this.stack[this.stack.length-1];P.value=A}function V(){const A=this.resume(),P=this.stack[this.stack.length-1];P.value=A}function B(){const A=this.resume(),P=this.stack[this.stack.length-1];P.value=A}function ee(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=P,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function ne(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=P,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function ge(A){const P=this.sliceSerialize(A),$=this.stack[this.stack.length-2];$.label=dv(P),$.identifier=Ce(P).toLowerCase()}function Se(){const A=this.stack[this.stack.length-1],P=this.resume(),$=this.stack[this.stack.length-1];if(this.data.inReference=!0,$.type==="link"){const Y=A.children;$.children=Y}else $.alt=P}function C(){const A=this.resume(),P=this.stack[this.stack.length-1];P.url=A}function ye(){const A=this.resume(),P=this.stack[this.stack.length-1];P.title=A}function ke(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function xe(A){const P=this.resume(),$=this.stack[this.stack.length-1];$.label=P,$.identifier=Ce(this.sliceSerialize(A)).toLowerCase(),this.data.referenceType="full"}function Re(A){this.data.characterReferenceType=A.type}function ie(A){const P=this.sliceSerialize(A),$=this.data.characterReferenceType;let Y;$?(Y=Fs(P,$==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Y=ui(P);const K=this.stack[this.stack.length-1];K.value+=Y}function ot(A){const P=this.stack.pop();P.position.end=Me(A.end)}function Ne(A){E.call(this,A);const P=this.stack[this.stack.length-1];P.url=this.sliceSerialize(A)}function Ge(A){E.call(this,A);const P=this.stack[this.stack.length-1];P.url="mailto:"+this.sliceSerialize(A)}function ze(){return{type:"blockquote",children:[]}}function kt(){return{type:"code",lang:null,meta:null,value:""}}function bl(){return{type:"inlineCode",value:""}}function Al(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Il(){return{type:"emphasis",children:[]}}function Ci(){return{type:"heading",depth:0,children:[]}}function Ti(){return{type:"break"}}function wi(){return{type:"html",value:""}}function _l(){return{type:"image",title:null,url:"",alt:null}}function Si(){return{type:"link",title:null,url:"",children:[]}}function ki(A){return{type:"list",ordered:A.type==="listOrdered",start:null,spread:A._spread,children:[]}}function Nl(A){return{type:"listItem",spread:A._spread,checked:null,children:[]}}function Ml(){return{type:"paragraph",children:[]}}function Pl(){return{type:"strong",children:[]}}function Rl(){return{type:"text",value:""}}function Dl(){return{type:"thematicBreak"}}}function Me(t){return{line:t.line,column:t.column,offset:t.offset}}function Ws(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Ws(t,i):gv(t,i)}}function gv(t,e){let n;for(n in e)if(Ys.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function fr(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+mt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+mt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+mt({start:e.start,end:e.end})+") is still open")}function yv(t){const e=this;e.parser=n;function n(i){return mv(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function xv(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function vv(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Cv(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function Tv(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wv(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Sv(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),o=it(i.toLowerCase()),l=t.footnoteOrder.indexOf(i);let a,u=t.footnoteCounts.get(i);u===void 0?(u=0,t.footnoteOrder.push(i),a=t.footnoteOrder.length):a=l+1,u+=1,t.footnoteCounts.set(i,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,f);const c={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,c),t.applyData(e,c)}function kv(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ev(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Os(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const o=t.all(e),l=o[0];l&&l.type==="text"?l.value="["+l.value:o.unshift({type:"text",value:"["});const a=o[o.length-1];return a&&a.type==="text"?a.value+=i:o.push({type:"text",value:i}),o}function bv(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Os(t,e);const o={src:it(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"img",properties:o,children:[]};return t.patch(e,l),t.applyData(e,l)}function Av(t,e){const n={src:it(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function Iv(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function _v(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Os(t,e);const o={href:it(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"a",properties:o,children:t.all(e)};return t.patch(e,l),t.applyData(e,l)}function Nv(t,e){const n={href:it(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Mv(t,e,n){const i=t.all(e),o=n?Pv(n):Ks(e),l={},a=[];if(typeof e.checked=="boolean"){const d=i[0];let p;d&&d.type==="element"&&d.tagName==="p"?p=d:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let u=-1;for(;++u<i.length;){const d=i[u];(o||u!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!o?a.push(...d.children):a.push(d)}const f=i[i.length-1];f&&(o||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:l,children:a};return t.patch(e,c),t.applyData(e,c)}function Pv(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Ks(n[i])}return e}function Ks(t){const e=t.spread;return e??t.children.length>1}function Rv(t,e){const n={},i=t.all(e);let o=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++o<i.length;){const a=i[o];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const l={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,l),t.applyData(e,l)}function Dv(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Lv(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Fv(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Uv(t,e){const n=t.all(e),i=n.shift(),o=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],a),o.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=oi(e.children[1]),f=Is(e.children[e.children.length-1]);u&&f&&(a.position={start:u,end:f}),o.push(a)}const l={type:"element",tagName:"table",properties:{},children:t.wrap(o,!0)};return t.patch(e,l),t.applyData(e,l)}function Vv(t,e,n){const i=n?n.children:void 0,l=(i?i.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,u=a?a.length:e.children.length;let f=-1;const c=[];for(;++f<u;){const p=e.children[f],h={},g=a?a[f]:void 0;g&&(h.align=g);let y={type:"element",tagName:l,properties:h,children:[]};p&&(y.children=t.all(p),t.patch(p,y),y=t.applyData(p,y)),c.push(y)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function qv(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const dr=9,pr=32;function Bv(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),o=0;const l=[];for(;i;)l.push(mr(e.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(e);return l.push(mr(e.slice(o),o>0,!1)),l.join("")}function mr(t,e,n){let i=0,o=t.length;if(e){let l=t.codePointAt(i);for(;l===dr||l===pr;)i++,l=t.codePointAt(i)}if(n){let l=t.codePointAt(o-1);for(;l===dr||l===pr;)o--,l=t.codePointAt(o-1)}return o>i?t.slice(i,o):""}function Gv(t,e){const n={type:"text",value:Bv(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function zv(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const $v={blockquote:xv,break:vv,code:Cv,delete:Tv,emphasis:wv,footnoteReference:Sv,heading:kv,html:Ev,imageReference:bv,image:Av,inlineCode:Iv,linkReference:_v,link:Nv,listItem:Mv,list:Rv,paragraph:Dv,root:Lv,strong:Fv,table:Uv,tableCell:qv,tableRow:Vv,text:Gv,thematicBreak:zv,toml:It,yaml:It,definition:It,footnoteDefinition:It};function It(){}const Qs=-1,Zt=0,gt=1,zt=2,fi=3,di=4,pi=5,mi=6,Xs=7,Zs=8,hr=typeof self=="object"?self:globalThis,Hv=(t,e)=>{const n=(o,l)=>(t.set(l,o),o),i=o=>{if(t.has(o))return t.get(o);const[l,a]=e[o];switch(l){case Zt:case Qs:return n(a,o);case gt:{const u=n([],o);for(const f of a)u.push(i(f));return u}case zt:{const u=n({},o);for(const[f,c]of a)u[i(f)]=i(c);return u}case fi:return n(new Date(a),o);case di:{const{source:u,flags:f}=a;return n(new RegExp(u,f),o)}case pi:{const u=n(new Map,o);for(const[f,c]of a)u.set(i(f),i(c));return u}case mi:{const u=n(new Set,o);for(const f of a)u.add(i(f));return u}case Xs:{const{name:u,message:f}=a;return n(new hr[u](f),o)}case Zs:return n(BigInt(a),o);case"BigInt":return n(Object(BigInt(a)),o);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:u}=new Uint8Array(a);return n(new DataView(u),a)}}return n(new hr[l](a),o)};return i},gr=t=>Hv(new Map,t)(0),Je="",{toString:Jv}={},{keys:Yv}=Object,dt=t=>{const e=typeof t;if(e!=="object"||!t)return[Zt,e];const n=Jv.call(t).slice(8,-1);switch(n){case"Array":return[gt,Je];case"Object":return[zt,Je];case"Date":return[fi,Je];case"RegExp":return[di,Je];case"Map":return[pi,Je];case"Set":return[mi,Je];case"DataView":return[gt,n]}return n.includes("Array")?[gt,n]:n.includes("Error")?[Xs,n]:[zt,n]},_t=([t,e])=>t===Zt&&(e==="function"||e==="symbol"),Wv=(t,e,n,i)=>{const o=(a,u)=>{const f=i.push(a)-1;return n.set(u,f),f},l=a=>{if(n.has(a))return n.get(a);let[u,f]=dt(a);switch(u){case Zt:{let d=a;switch(f){case"bigint":u=Zs,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);d=null;break;case"undefined":return o([Qs],a)}return o([u,d],a)}case gt:{if(f){let h=a;return f==="DataView"?h=new Uint8Array(a.buffer):f==="ArrayBuffer"&&(h=new Uint8Array(a)),o([f,[...h]],a)}const d=[],p=o([u,d],a);for(const h of a)d.push(l(h));return p}case zt:{if(f)switch(f){case"BigInt":return o([f,a.toString()],a);case"Boolean":case"Number":case"String":return o([f,a.valueOf()],a)}if(e&&"toJSON"in a)return l(a.toJSON());const d=[],p=o([u,d],a);for(const h of Yv(a))(t||!_t(dt(a[h])))&&d.push([l(h),l(a[h])]);return p}case fi:return o([u,a.toISOString()],a);case di:{const{source:d,flags:p}=a;return o([u,{source:d,flags:p}],a)}case pi:{const d=[],p=o([u,d],a);for(const[h,g]of a)(t||!(_t(dt(h))||_t(dt(g))))&&d.push([l(h),l(g)]);return p}case mi:{const d=[],p=o([u,d],a);for(const h of a)(t||!_t(dt(h)))&&d.push(l(h));return p}}const{message:c}=a;return o([u,{name:f,message:c}],a)};return l},yr=(t,{json:e,lossy:n}={})=>{const i=[];return Wv(!(e||n),!!e,new Map,i)(t),i},$t=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?gr(yr(t,e)):structuredClone(t):(t,e)=>gr(yr(t,e));function Ov(t,e){const n=[{type:"text",value:"â†©"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Kv(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Qv(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Ov,i=t.options.footnoteBackLabel||Kv,o=t.options.footnoteLabel||"Footnotes",l=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[f]);if(!c)continue;const d=t.all(c),p=String(c.identifier).toUpperCase(),h=it(p.toLowerCase());let g=0;const y=[],x=t.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){y.length>0&&y.push({type:"text",value:" "});let S=typeof n=="string"?n:n(f,g);typeof S=="string"&&(S={type:"text",value:S}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,g),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const S=w.children[w.children.length-1];S&&S.type==="text"?S.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...y)}else d.push(...y);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(d,!0)};t.patch(c,v),u.push(v)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...$t(a),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const jt=function(t){if(t==null)return eC;if(typeof t=="function")return en(t);if(typeof t=="object")return Array.isArray(t)?Xv(t):Zv(t);if(typeof t=="string")return jv(t);throw new Error("Expected function, string, or object as test")};function Xv(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=jt(t[n]);return en(i);function i(...o){let l=-1;for(;++l<e.length;)if(e[l].apply(this,o))return!0;return!1}}function Zv(t){const e=t;return en(n);function n(i){const o=i;let l;for(l in t)if(o[l]!==e[l])return!1;return!0}}function jv(t){return en(e);function e(n){return n&&n.type===t}}function en(t){return e;function e(n,i,o){return!!(tC(n)&&t.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function eC(){return!0}function tC(t){return t!==null&&typeof t=="object"&&"type"in t}const js=[],nC=!0,Gn=!1,iC="skip";function el(t,e,n,i){let o;typeof e=="function"&&typeof n!="function"?(i=n,n=e):o=e;const l=jt(o),a=i?-1:1;u(t,void 0,[])();function u(f,c,d){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(f.type+(g?"<"+g+">":""))+")"})}return h;function h(){let g=js,y,x,w;if((!e||l(f,c,d[d.length-1]||void 0))&&(g=oC(n(f,d)),g[0]===Gn))return g;if("children"in f&&f.children){const v=f;if(v.children&&g[0]!==iC)for(x=(i?v.children.length:-1)+a,w=d.concat(v);x>-1&&x<v.children.length;){const S=v.children[x];if(y=u(S,x,w)(),y[0]===Gn)return y;x=typeof y[1]=="number"?y[1]:x+a}}return g}}}function oC(t){return Array.isArray(t)?t:typeof t=="number"?[nC,t]:t==null?js:[t]}function hi(t,e,n,i){let o,l,a;typeof e=="function"&&typeof n!="function"?(l=void 0,a=e,o=n):(l=e,a=n,o=i),el(t,l,u,o);function u(f,c){const d=c[c.length-1],p=d?d.children.indexOf(f):void 0;return a(f,p,d)}}const zn={}.hasOwnProperty,rC={};function sC(t,e){const n=e||rC,i=new Map,o=new Map,l=new Map,a={...$v,...n.handlers},u={all:c,applyData:aC,definitionById:i,footnoteById:o,footnoteCounts:l,footnoteOrder:[],handlers:a,one:f,options:n,patch:lC,wrap:cC};return hi(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const p=d.type==="definition"?i:o,h=String(d.identifier).toUpperCase();p.has(h)||p.set(h,d)}}),u;function f(d,p){const h=d.type,g=u.handlers[h];if(zn.call(u.handlers,h)&&g)return g(u,d,p);if(u.options.passThrough&&u.options.passThrough.includes(h)){if("children"in d){const{children:x,...w}=d,v=$t(w);return v.children=u.all(d),v}return $t(d)}return(u.options.unknownHandler||uC)(u,d,p)}function c(d){const p=[];if("children"in d){const h=d.children;let g=-1;for(;++g<h.length;){const y=u.one(h[g],d);if(y){if(g&&h[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=xr(y.value)),!Array.isArray(y)&&y.type==="element")){const x=y.children[0];x&&x.type==="text"&&(x.value=xr(x.value))}Array.isArray(y)?p.push(...y):p.push(y)}}}return p}}function lC(t,e){t.position&&(e.position=Ky(t))}function aC(t,e){let n=e;if(t&&t.data){const i=t.data.hName,o=t.data.hChildren,l=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&l&&Object.assign(n.properties,$t(l)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function uC(t,e){const n=e.data||{},i="value"in e&&!(zn.call(n,"hProperties")||zn.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function cC(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function xr(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function vr(t,e){const n=sC(t,e),i=n.one(t,void 0),o=Qv(n),l=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&l.children.push({type:"text",value:`
`},o),l}function fC(t,e){return t&&"run"in t?async function(n,i){const o=vr(n,{file:i,...e});await t.run(o,i)}:function(n,i){return vr(n,{file:i,...t||e})}}function Cr(t){if(t)throw t}var cn,Tr;function dC(){if(Tr)return cn;Tr=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},l=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var d=t.call(c,"constructor"),p=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!d&&!p)return!1;var h;for(h in c);return typeof h>"u"||t.call(c,h)},a=function(c,d){n&&d.name==="__proto__"?n(c,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):c[d.name]=d.newValue},u=function(c,d){if(d==="__proto__")if(t.call(c,d)){if(i)return i(c,d).value}else return;return c[d]};return cn=function f(){var c,d,p,h,g,y,x=arguments[0],w=1,v=arguments.length,S=!1;for(typeof x=="boolean"&&(S=x,x=arguments[1]||{},w=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});w<v;++w)if(c=arguments[w],c!=null)for(d in c)p=u(x,d),h=u(c,d),x!==h&&(S&&h&&(l(h)||(g=o(h)))?(g?(g=!1,y=p&&o(p)?p:[]):y=p&&l(p)?p:{},a(x,{name:d,newValue:f(S,y,h)})):typeof h<"u"&&a(x,{name:d,newValue:h}));return x},cn}var pC=dC();const fn=Ur(pC);function $n(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function mC(){const t=[],e={run:n,use:i};return e;function n(...o){let l=-1;const a=o.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...o);function u(f,...c){const d=t[++l];let p=-1;if(f){a(f);return}for(;++p<o.length;)(c[p]===null||c[p]===void 0)&&(c[p]=o[p]);o=c,d?hC(d,u)(...c):a(null,...c)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}function hC(t,e){let n;return i;function i(...a){const u=t.length>a.length;let f;u&&a.push(o);try{f=t.apply(this,a)}catch(c){const d=c;if(u&&n)throw d;return o(d)}u||(f&&f.then&&typeof f.then=="function"?f.then(l,o):f instanceof Error?o(f):l(f))}function o(a,...u){n||(n=!0,e(a,...u))}function l(a){o(null,a)}}const Te={basename:gC,dirname:yC,extname:xC,join:vC,sep:"/"};function gC(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');St(t);let n=0,i=-1,o=t.length,l;if(e===void 0||e.length===0||e.length>t.length){for(;o--;)if(t.codePointAt(o)===47){if(l){n=o+1;break}}else i<0&&(l=!0,i=o+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let a=-1,u=e.length-1;for(;o--;)if(t.codePointAt(o)===47){if(l){n=o+1;break}}else a<0&&(l=!0,a=o+1),u>-1&&(t.codePointAt(o)===e.codePointAt(u--)?u<0&&(i=o):(u=-1,i=a));return n===i?i=a:i<0&&(i=t.length),t.slice(n,i)}function yC(t){if(St(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function xC(t){St(t);let e=t.length,n=-1,i=0,o=-1,l=0,a;for(;e--;){const u=t.codePointAt(e);if(u===47){if(a){i=e+1;break}continue}n<0&&(a=!0,n=e+1),u===46?o<0?o=e:l!==1&&(l=1):o>-1&&(l=-1)}return o<0||n<0||l===0||l===1&&o===n-1&&o===i+1?"":t.slice(o,n)}function vC(...t){let e=-1,n;for(;++e<t.length;)St(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":CC(n)}function CC(t){St(t);const e=t.codePointAt(0)===47;let n=TC(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function TC(t,e){let n="",i=0,o=-1,l=0,a=-1,u,f;for(;++a<=t.length;){if(a<t.length)u=t.codePointAt(a);else{if(u===47)break;u=47}if(u===47){if(!(o===a-1||l===1))if(o!==a-1&&l===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",i=0):(n=n.slice(0,f),i=n.length-1-n.lastIndexOf("/")),o=a,l=0;continue}}else if(n.length>0){n="",i=0,o=a,l=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(o+1,a):n=t.slice(o+1,a),i=a-o-1;o=a,l=0}else u===46&&l>-1?l++:l=-1}return n}function St(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const wC={cwd:SC};function SC(){return"/"}function Hn(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function kC(t){if(typeof t=="string")t=new URL(t);else if(!Hn(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return EC(t)}function EC(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const dn=["history","path","basename","stem","extname","dirname"];class tl{constructor(e){let n;e?Hn(e)?n={path:e}:typeof e=="string"||bC(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":wC.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<dn.length;){const l=dn[i];l in n&&n[l]!==void 0&&n[l]!==null&&(this[l]=l==="history"?[...n[l]]:n[l])}let o;for(o in n)dn.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Te.basename(this.path):void 0}set basename(e){mn(e,"basename"),pn(e,"basename"),this.path=Te.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Te.dirname(this.path):void 0}set dirname(e){wr(this.basename,"dirname"),this.path=Te.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Te.extname(this.path):void 0}set extname(e){if(pn(e,"extname"),wr(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Te.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Hn(e)&&(e=kC(e)),mn(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Te.basename(this.path,this.extname):void 0}set stem(e){mn(e,"stem"),pn(e,"stem"),this.path=Te.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const o=this.message(e,n,i);throw o.fatal=!0,o}info(e,n,i){const o=this.message(e,n,i);return o.fatal=void 0,o}message(e,n,i){const o=new se(e,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function pn(t,e){if(t&&t.includes(Te.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Te.sep+"`")}function mn(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function wr(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function bC(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const AC=function(t){const i=this.constructor.prototype,o=i[t],l=function(){return o.apply(l,arguments)};return Object.setPrototypeOf(l,i),l},IC={}.hasOwnProperty;class gi extends AC{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mC()}copy(){const e=new gi;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(fn(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(yn("data",this.frozen),this.namespace[e]=n,this):IC.call(this.namespace,e)&&this.namespace[e]||void 0:e?(yn("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(e,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Nt(e),i=this.parser||this.Parser;return hn("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),hn("process",this.parser||this.Parser),gn("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(l,a){const u=Nt(e),f=i.parse(u);i.run(f,u,function(d,p,h){if(d||!p||!h)return c(d);const g=p,y=i.stringify(g,h);MC(y)?h.value=y:h.result=y,c(d,h)});function c(d,p){d||!p?a(d):l?l(p):n(void 0,p)}}}processSync(e){let n=!1,i;return this.freeze(),hn("processSync",this.parser||this.Parser),gn("processSync",this.compiler||this.Compiler),this.process(e,o),kr("processSync","process",n),i;function o(l,a){n=!0,Cr(l),i=a}}run(e,n,i){Sr(e),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?l(void 0,i):new Promise(l);function l(a,u){const f=Nt(n);o.run(e,f,c);function c(d,p,h){const g=p||e;d?u(d):a?a(g):i(void 0,g,h)}}}runSync(e,n){let i=!1,o;return this.run(e,n,l),kr("runSync","run",i),o;function l(a,u){Cr(a),o=u,i=!0}}stringify(e,n){this.freeze();const i=Nt(n),o=this.compiler||this.Compiler;return gn("stringify",o),Sr(e),o(e,i)}use(e,...n){const i=this.attachers,o=this.namespace;if(yn("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function l(c){if(typeof c=="function")f(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...p]=c;f(d,p)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(c.plugins),c.settings&&(o.settings=fn(!0,o.settings,c.settings))}function u(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const p=c[d];l(p)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function f(c,d){let p=-1,h=-1;for(;++p<i.length;)if(i[p][0]===c){h=p;break}if(h===-1)i.push([c,...d]);else if(d.length>0){let[g,...y]=d;const x=i[h][1];$n(x)&&$n(g)&&(g=fn(!0,x,g)),i[h]=[c,g,...y]}}}}const _C=new gi().freeze();function hn(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function gn(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function yn(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Sr(t){if(!$n(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function kr(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Nt(t){return NC(t)?t:new tl(t)}function NC(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function MC(t){return typeof t=="string"||PC(t)}function PC(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const RC="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Er=[],br={allowDangerousHtml:!0},DC=/^(https?|ircs?|mailto|xmpp)$/i,LC=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function FC(t){const e=UC(t),n=VC(t);return qC(e.runSync(e.parse(n),n),t)}function UC(t){const e=t.rehypePlugins||Er,n=t.remarkPlugins||Er,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...br}:br;return _C().use(yv).use(n).use(fC,i).use(e)}function VC(t){const e=t.children||"",n=new tl;return typeof e=="string"&&(n.value=e),n}function qC(t,e){const n=e.allowedElements,i=e.allowElement,o=e.components,l=e.disallowedElements,a=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||BC;for(const d of LC)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+RC+d.id,void 0);return hi(t,c),ex(t,{Fragment:m.Fragment,components:o,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function c(d,p,h){if(d.type==="raw"&&h&&typeof p=="number")return a?h.children.splice(p,1):h.children[p]={type:"text",value:d.value},p;if(d.type==="element"){let g;for(g in ln)if(Object.hasOwn(ln,g)&&Object.hasOwn(d.properties,g)){const y=d.properties[g],x=ln[g];(x===null||x.includes(d.tagName))&&(d.properties[g]=f(String(y||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):l?l.includes(d.tagName):!1;if(!g&&i&&typeof p=="number"&&(g=!i(d,p,h)),g&&h&&typeof p=="number")return u&&d.children?h.children.splice(p,1,...d.children):h.children.splice(p,1),p}}}function BC(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),o=t.indexOf("/");return e===-1||o!==-1&&e>o||n!==-1&&e>n||i!==-1&&e>i||DC.test(t.slice(0,e))?t:""}function Ar(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(e);for(;o!==-1;)i++,o=n.indexOf(e,o+e.length);return i}function GC(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function zC(t,e,n){const o=jt((n||{}).ignore||[]),l=$C(e);let a=-1;for(;++a<l.length;)el(t,"text",u);function u(c,d){let p=-1,h;for(;++p<d.length;){const g=d[p],y=h?h.children:void 0;if(o(g,y?y.indexOf(g):void 0,h))return;h=g}if(h)return f(c,d)}function f(c,d){const p=d[d.length-1],h=l[a][0],g=l[a][1];let y=0;const w=p.children.indexOf(c);let v=!1,S=[];h.lastIndex=0;let k=h.exec(c.value);for(;k;){const I=k.index,_={index:k.index,input:k.input,stack:[...d,c]};let b=g(...k,_);if(typeof b=="string"&&(b=b.length>0?{type:"text",value:b}:void 0),b===!1?h.lastIndex=I+1:(y!==I&&S.push({type:"text",value:c.value.slice(y,I)}),Array.isArray(b)?S.push(...b):b&&S.push(b),y=I+k[0].length,v=!0),!h.global)break;k=h.exec(c.value)}return v?(y<c.value.length&&S.push({type:"text",value:c.value.slice(y)}),p.children.splice(w,1,...S)):S=[c],w+S.length}}function $C(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const o=n[i];e.push([HC(o[0]),JC(o[1])])}return e}function HC(t){return typeof t=="string"?new RegExp(GC(t),"g"):t}function JC(t){return typeof t=="function"?t:function(){return t}}const xn="phrasing",vn=["autolink","link","image","label"];function YC(){return{transforms:[jC],enter:{literalAutolink:OC,literalAutolinkEmail:Cn,literalAutolinkHttp:Cn,literalAutolinkWww:Cn},exit:{literalAutolink:ZC,literalAutolinkEmail:XC,literalAutolinkHttp:KC,literalAutolinkWww:QC}}}function WC(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xn,notInConstruct:vn},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xn,notInConstruct:vn},{character:":",before:"[ps]",after:"\\/",inConstruct:xn,notInConstruct:vn}]}}function OC(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Cn(t){this.config.enter.autolinkProtocol.call(this,t)}function KC(t){this.config.exit.autolinkProtocol.call(this,t)}function QC(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function XC(t){this.config.exit.autolinkEmail.call(this,t)}function ZC(t){this.exit(t)}function jC(t){zC(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,eT],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),tT]],{ignore:["link","linkReference"]})}function eT(t,e,n,i,o){let l="";if(!nl(o)||(/^w/i.test(e)&&(n=e+n,e="",l="http://"),!nT(n)))return!1;const a=iT(n+i);if(!a[0])return!1;const u={type:"link",title:null,url:l+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[u,{type:"text",value:a[1]}]:u}function tT(t,e,n,i){return!nl(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function nT(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function iT(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const o=Ar(t,"(");let l=Ar(t,")");for(;i!==-1&&o>l;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),l++;return[t,n]}function nl(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ve(n)||Qt(n))&&(!e||n!==47)}il.peek=dT;function oT(){this.buffer()}function rT(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function sT(){this.buffer()}function lT(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function aT(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ce(this.sliceSerialize(t)).toLowerCase(),n.label=e}function uT(t){this.exit(t)}function cT(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ce(this.sliceSerialize(t)).toLowerCase(),n.label=e}function fT(t){this.exit(t)}function dT(){return"["}function il(t,e,n,i){const o=n.createTracker(i);let l=o.move("[^");const a=n.enter("footnoteReference"),u=n.enter("reference");return l+=o.move(n.safe(n.associationId(t),{after:"]",before:l})),u(),a(),l+=o.move("]"),l}function pT(){return{enter:{gfmFootnoteCallString:oT,gfmFootnoteCall:rT,gfmFootnoteDefinitionLabelString:sT,gfmFootnoteDefinition:lT},exit:{gfmFootnoteCallString:aT,gfmFootnoteCall:uT,gfmFootnoteDefinitionLabelString:cT,gfmFootnoteDefinition:fT}}}function mT(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:il},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,o,l,a){const u=l.createTracker(a);let f=u.move("[^");const c=l.enter("footnoteDefinition"),d=l.enter("label");return f+=u.move(l.safe(l.associationId(i),{before:f,after:"]"})),d(),f+=u.move("]:"),i.children&&i.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+l.indentLines(l.containerFlow(i,u.current()),e?ol:hT))),c(),f}}function hT(t,e,n){return e===0?t:ol(t,e,n)}function ol(t,e,n){return(n?"":"    ")+t}const gT=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];rl.peek=TT;function yT(){return{canContainEols:["delete"],enter:{strikethrough:vT},exit:{strikethrough:CT}}}function xT(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gT}],handlers:{delete:rl}}}function vT(t){this.enter({type:"delete",children:[]},t)}function CT(t){this.exit(t)}function rl(t,e,n,i){const o=n.createTracker(i),l=n.enter("strikethrough");let a=o.move("~~");return a+=n.containerPhrasing(t,{...o.current(),before:a,after:"~"}),a+=o.move("~~"),l(),a}function TT(){return"~"}function wT(t){return t.length}function ST(t,e){const n=e||{},i=(n.align||[]).concat(),o=n.stringLength||wT,l=[],a=[],u=[],f=[];let c=0,d=-1;for(;++d<t.length;){const x=[],w=[];let v=-1;for(t[d].length>c&&(c=t[d].length);++v<t[d].length;){const S=kT(t[d][v]);if(n.alignDelimiters!==!1){const k=o(S);w[v]=k,(f[v]===void 0||k>f[v])&&(f[v]=k)}x.push(S)}a[d]=x,u[d]=w}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<c;)l[p]=Ir(i[p]);else{const x=Ir(i);for(;++p<c;)l[p]=x}p=-1;const h=[],g=[];for(;++p<c;){const x=l[p];let w="",v="";x===99?(w=":",v=":"):x===108?w=":":x===114&&(v=":");let S=n.alignDelimiters===!1?1:Math.max(1,f[p]-w.length-v.length);const k=w+"-".repeat(S)+v;n.alignDelimiters!==!1&&(S=w.length+S+v.length,S>f[p]&&(f[p]=S),g[p]=S),h[p]=k}a.splice(1,0,h),u.splice(1,0,g),d=-1;const y=[];for(;++d<a.length;){const x=a[d],w=u[d];p=-1;const v=[];for(;++p<c;){const S=x[p]||"";let k="",I="";if(n.alignDelimiters!==!1){const _=f[p]-(w[p]||0),b=l[p];b===114?k=" ".repeat(_):b===99?_%2?(k=" ".repeat(_/2+.5),I=" ".repeat(_/2-.5)):(k=" ".repeat(_/2),I=k):I=" ".repeat(_)}n.delimiterStart!==!1&&!p&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||p)&&v.push(" "),n.alignDelimiters!==!1&&v.push(k),v.push(S),n.alignDelimiters!==!1&&v.push(I),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||p!==c-1)&&v.push("|")}y.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return y.join(`
`)}function kT(t){return t==null?"":String(t)}function Ir(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function ET(t,e,n,i){const o=n.enter("blockquote"),l=n.createTracker(i);l.move("> "),l.shift(2);const a=n.indentLines(n.containerFlow(t,l.current()),bT);return o(),a}function bT(t,e,n){return">"+(n?"":" ")+t}function AT(t,e){return _r(t,e.inConstruct,!0)&&!_r(t,e.notInConstruct,!1)}function _r(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function Nr(t,e,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&AT(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function IT(t,e){const n=String(t);let i=n.indexOf(e),o=i,l=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++l>a&&(a=l):l=1,o=i+e.length,i=n.indexOf(e,o);return a}function _T(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function NT(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function MT(t,e,n,i){const o=NT(n),l=t.value||"",a=o==="`"?"GraveAccent":"Tilde";if(_T(t,n)){const p=n.enter("codeIndented"),h=n.indentLines(l,PT);return p(),h}const u=n.createTracker(i),f=o.repeat(Math.max(IT(l,o)+1,3)),c=n.enter("codeFenced");let d=u.move(f);if(t.lang){const p=n.enter(`codeFencedLang${a}`);d+=u.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...u.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${a}`);d+=u.move(" "),d+=u.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...u.current()})),p()}return d+=u.move(`
`),l&&(d+=u.move(l+`
`)),d+=u.move(f),c(),d}function PT(t,e,n){return(n?"":"    ")+t}function yi(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function RT(t,e,n,i){const o=yi(n),l=o==='"'?"Quote":"Apostrophe",a=n.enter("definition");let u=n.enter("label");const f=n.createTracker(i);let c=f.move("[");return c+=f.move(n.safe(n.associationId(t),{before:c,after:"]",...f.current()})),c+=f.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),c+=f.move("<"),c+=f.move(n.safe(t.url,{before:c,after:">",...f.current()})),c+=f.move(">")):(u=n.enter("destinationRaw"),c+=f.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...f.current()}))),u(),t.title&&(u=n.enter(`title${l}`),c+=f.move(" "+o),c+=f.move(n.safe(t.title,{before:c,after:o,...f.current()})),c+=f.move(o),u()),a(),c}function DT(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function vt(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ht(t,e,n){const i=Xe(t),o=Xe(e);return i===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}sl.peek=LT;function sl(t,e,n,i){const o=DT(n),l=n.enter("emphasis"),a=n.createTracker(i),u=a.move(o);let f=a.move(n.containerPhrasing(t,{after:o,before:u,...a.current()}));const c=f.charCodeAt(0),d=Ht(i.before.charCodeAt(i.before.length-1),c,o);d.inside&&(f=vt(c)+f.slice(1));const p=f.charCodeAt(f.length-1),h=Ht(i.after.charCodeAt(0),p,o);h.inside&&(f=f.slice(0,-1)+vt(p));const g=a.move(o);return l(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},u+f+g}function LT(t,e,n){return n.options.emphasis||"*"}function FT(t,e){let n=!1;return hi(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Gn}),!!((!t.depth||t.depth<3)&&ai(t)&&(e.options.setext||n))}function UT(t,e,n,i){const o=Math.max(Math.min(6,t.depth||1),1),l=n.createTracker(i);if(FT(t,n)){const d=n.enter("headingSetext"),p=n.enter("phrasing"),h=n.containerPhrasing(t,{...l.current(),before:`
`,after:`
`});return p(),d(),h+`
`+(o===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(o),u=n.enter("headingAtx"),f=n.enter("phrasing");l.move(a+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(c)&&(c=vt(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),f(),u(),c}ll.peek=VT;function ll(t){return t.value||""}function VT(){return"<"}al.peek=qT;function al(t,e,n,i){const o=yi(n),l=o==='"'?"Quote":"Apostrophe",a=n.enter("image");let u=n.enter("label");const f=n.createTracker(i);let c=f.move("![");return c+=f.move(n.safe(t.alt,{before:c,after:"]",...f.current()})),c+=f.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),c+=f.move("<"),c+=f.move(n.safe(t.url,{before:c,after:">",...f.current()})),c+=f.move(">")):(u=n.enter("destinationRaw"),c+=f.move(n.safe(t.url,{before:c,after:t.title?" ":")",...f.current()}))),u(),t.title&&(u=n.enter(`title${l}`),c+=f.move(" "+o),c+=f.move(n.safe(t.title,{before:c,after:o,...f.current()})),c+=f.move(o),u()),c+=f.move(")"),a(),c}function qT(){return"!"}ul.peek=BT;function ul(t,e,n,i){const o=t.referenceType,l=n.enter("imageReference");let a=n.enter("label");const u=n.createTracker(i);let f=u.move("![");const c=n.safe(t.alt,{before:f,after:"]",...u.current()});f+=u.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return a(),n.stack=d,l(),o==="full"||!c||c!==p?f+=u.move(p+"]"):o==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function BT(){return"!"}cl.peek=GT;function cl(t,e,n){let i=t.value||"",o="`",l=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++l<n.unsafe.length;){const a=n.unsafe[l],u=n.compilePattern(a);let f;if(a.atBreak)for(;f=u.exec(i);){let c=f.index;i.charCodeAt(c)===10&&i.charCodeAt(c-1)===13&&c--,i=i.slice(0,c)+" "+i.slice(f.index+1)}}return o+i+o}function GT(){return"`"}function fl(t,e){const n=ai(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}dl.peek=zT;function dl(t,e,n,i){const o=yi(n),l=o==='"'?"Quote":"Apostrophe",a=n.createTracker(i);let u,f;if(fl(t,n)){const d=n.stack;n.stack=[],u=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(t,{before:p,after:">",...a.current()})),p+=a.move(">"),u(),n.stack=d,p}u=n.enter("link"),f=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(t,{before:c,after:"](",...a.current()})),c+=a.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(f=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":")",...a.current()}))),f(),t.title&&(f=n.enter(`title${l}`),c+=a.move(" "+o),c+=a.move(n.safe(t.title,{before:c,after:o,...a.current()})),c+=a.move(o),f()),c+=a.move(")"),u(),c}function zT(t,e,n){return fl(t,n)?"<":"["}pl.peek=$T;function pl(t,e,n,i){const o=t.referenceType,l=n.enter("linkReference");let a=n.enter("label");const u=n.createTracker(i);let f=u.move("[");const c=n.containerPhrasing(t,{before:f,after:"]",...u.current()});f+=u.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...u.current()});return a(),n.stack=d,l(),o==="full"||!c||c!==p?f+=u.move(p+"]"):o==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function $T(){return"["}function xi(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function HT(t){const e=xi(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function JT(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ml(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function YT(t,e,n,i){const o=n.enter("list"),l=n.bulletCurrent;let a=t.ordered?JT(n):xi(n);const u=t.ordered?a==="."?")":".":HT(n);let f=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),ml(n)===a&&d){let p=-1;for(;++p<t.children.length;){const h=t.children[p];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(a=u),n.bulletCurrent=a;const c=n.containerFlow(t,i);return n.bulletLastUsed=a,n.bulletCurrent=l,o(),c}function WT(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function OT(t,e,n,i){const o=WT(n);let l=n.bulletCurrent||xi(n);e&&e.type==="list"&&e.ordered&&(l=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+l);let a=l.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const u=n.createTracker(i);u.move(l+" ".repeat(a-l.length)),u.shift(a);const f=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,u.current()),d);return f(),c;function d(p,h,g){return h?(g?"":" ".repeat(a))+p:(g?l:l+" ".repeat(a-l.length))+p}}function KT(t,e,n,i){const o=n.enter("paragraph"),l=n.enter("phrasing"),a=n.containerPhrasing(t,i);return l(),o(),a}const QT=jt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function XT(t,e,n,i){return(t.children.some(function(a){return QT(a)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function ZT(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}hl.peek=jT;function hl(t,e,n,i){const o=ZT(n),l=n.enter("strong"),a=n.createTracker(i),u=a.move(o+o);let f=a.move(n.containerPhrasing(t,{after:o,before:u,...a.current()}));const c=f.charCodeAt(0),d=Ht(i.before.charCodeAt(i.before.length-1),c,o);d.inside&&(f=vt(c)+f.slice(1));const p=f.charCodeAt(f.length-1),h=Ht(i.after.charCodeAt(0),p,o);h.inside&&(f=f.slice(0,-1)+vt(p));const g=a.move(o+o);return l(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},u+f+g}function jT(t,e,n){return n.options.strong||"*"}function ew(t,e,n,i){return n.safe(t.value,i)}function tw(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function nw(t,e,n){const i=(ml(n)+(n.options.ruleSpaces?" ":"")).repeat(tw(n));return n.options.ruleSpaces?i.slice(0,-1):i}const gl={blockquote:ET,break:Nr,code:MT,definition:RT,emphasis:sl,hardBreak:Nr,heading:UT,html:ll,image:al,imageReference:ul,inlineCode:cl,link:dl,linkReference:pl,list:YT,listItem:OT,paragraph:KT,root:XT,strong:hl,text:ew,thematicBreak:nw};function iw(){return{enter:{table:ow,tableData:Mr,tableHeader:Mr,tableRow:sw},exit:{codeText:lw,table:rw,tableData:Tn,tableHeader:Tn,tableRow:Tn}}}function ow(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function rw(t){this.exit(t),this.data.inTable=void 0}function sw(t){this.enter({type:"tableRow",children:[]},t)}function Tn(t){this.exit(t)}function Mr(t){this.enter({type:"tableCell",children:[]},t)}function lw(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,aw));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function aw(t,e){return e==="|"?e:t}function uw(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,o=e.stringLength,l=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:f,tableRow:u}};function a(g,y,x,w){return c(d(g,x,w),g.align)}function u(g,y,x,w){const v=p(g,x,w),S=c([v]);return S.slice(0,S.indexOf(`
`))}function f(g,y,x,w){const v=x.enter("tableCell"),S=x.enter("phrasing"),k=x.containerPhrasing(g,{...w,before:l,after:l});return S(),v(),k}function c(g,y){return ST(g,{align:y,alignDelimiters:i,padding:n,stringLength:o})}function d(g,y,x){const w=g.children;let v=-1;const S=[],k=y.enter("table");for(;++v<w.length;)S[v]=p(w[v],y,x);return k(),S}function p(g,y,x){const w=g.children;let v=-1;const S=[],k=y.enter("tableRow");for(;++v<w.length;)S[v]=f(w[v],g,y,x);return k(),S}function h(g,y,x){let w=gl.inlineCode(g,y,x);return x.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function cw(){return{exit:{taskListCheckValueChecked:Pr,taskListCheckValueUnchecked:Pr,paragraph:dw}}}function fw(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:pw}}}function Pr(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function dw(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=e.children;let l=-1,a;for(;++l<o.length;){const u=o[l];if(u.type==="paragraph"){a=u;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function pw(t,e,n,i){const o=t.children[0],l=typeof t.checked=="boolean"&&o&&o.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",u=n.createTracker(i);l&&u.move(a);let f=gl.listItem(t,e,n,{...i,...u.current()});return l&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),f;function c(d){return d+a}}function mw(){return[YC(),pT(),yT(),iw(),cw()]}function hw(t){return{extensions:[WC(),mT(t),xT(),uw(t),fw()]}}const gw={tokenize:ww,partial:!0},yl={tokenize:Sw,partial:!0},xl={tokenize:kw,partial:!0},vl={tokenize:Ew,partial:!0},yw={tokenize:bw,partial:!0},Cl={name:"wwwAutolink",tokenize:Cw,previous:wl},Tl={name:"protocolAutolink",tokenize:Tw,previous:Sl},_e={name:"emailAutolink",tokenize:vw,previous:kl},we={};function xw(){return{text:we}}let Le=48;for(;Le<123;)we[Le]=_e,Le++,Le===58?Le=65:Le===91&&(Le=97);we[43]=_e;we[45]=_e;we[46]=_e;we[95]=_e;we[72]=[_e,Tl];we[104]=[_e,Tl];we[87]=[_e,Cl];we[119]=[_e,Cl];function vw(t,e,n){const i=this;let o,l;return a;function a(p){return!Jn(p)||!kl.call(i,i.previous)||vi(i.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(p))}function u(p){return Jn(p)?(t.consume(p),u):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(yw,d,c)(p):p===45||p===95||re(p)?(l=!0,t.consume(p),f):d(p)}function c(p){return t.consume(p),o=!0,f}function d(p){return l&&o&&le(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function Cw(t,e,n){const i=this;return o;function o(a){return a!==87&&a!==119||!wl.call(i,i.previous)||vi(i.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(gw,t.attempt(yl,t.attempt(xl,l),n),n)(a))}function l(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function Tw(t,e,n){const i=this;let o="",l=!1;return a;function a(p){return(p===72||p===104)&&Sl.call(i,i.previous)&&!vi(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),o+=String.fromCodePoint(p),t.consume(p),u):n(p)}function u(p){if(le(p)&&o.length<5)return o+=String.fromCodePoint(p),t.consume(p),u;if(p===58){const h=o.toLowerCase();if(h==="http"||h==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),l?c:(l=!0,f)):n(p)}function c(p){return p===null||Gt(p)||Q(p)||Ve(p)||Qt(p)?n(p):t.attempt(yl,t.attempt(xl,d),n)(p)}function d(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function ww(t,e,n){let i=0;return o;function o(a){return(a===87||a===119)&&i<3?(i++,t.consume(a),o):a===46&&i===3?(t.consume(a),l):n(a)}function l(a){return a===null?n(a):e(a)}}function Sw(t,e,n){let i,o,l;return a;function a(c){return c===46||c===95?t.check(vl,f,u)(c):c===null||Q(c)||Ve(c)||c!==45&&Qt(c)?f(c):(l=!0,t.consume(c),a)}function u(c){return c===95?i=!0:(o=i,i=void 0),t.consume(c),a}function f(c){return o||i||!l?n(c):e(c)}}function kw(t,e){let n=0,i=0;return o;function o(a){return a===40?(n++,t.consume(a),o):a===41&&i<n?l(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(vl,e,l)(a):a===null||Q(a)||Ve(a)?e(a):(t.consume(a),o)}function l(a){return a===41&&i++,t.consume(a),o}}function Ew(t,e,n){return i;function i(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),i):u===38?(t.consume(u),l):u===93?(t.consume(u),o):u===60||u===null||Q(u)||Ve(u)?e(u):n(u)}function o(u){return u===null||u===40||u===91||Q(u)||Ve(u)?e(u):i(u)}function l(u){return le(u)?a(u):n(u)}function a(u){return u===59?(t.consume(u),i):le(u)?(t.consume(u),a):n(u)}}function bw(t,e,n){return i;function i(l){return t.consume(l),o}function o(l){return re(l)?n(l):e(l)}}function wl(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Q(t)}function Sl(t){return!le(t)}function kl(t){return!(t===47||Jn(t))}function Jn(t){return t===43||t===45||t===46||t===95||re(t)}function vi(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Aw={tokenize:Lw,partial:!0};function Iw(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Pw,continuation:{tokenize:Rw},exit:Dw}},text:{91:{name:"gfmFootnoteCall",tokenize:Mw},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:_w,resolveTo:Nw}}}}function _w(t,e,n){const i=this;let o=i.events.length;const l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;o--;){const f=i.events[o][1];if(f.type==="labelImage"){a=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!a||!a._balanced)return n(f);const c=Ce(i.sliceSerialize({start:a.end,end:i.now()}));return c.codePointAt(0)!==94||!l.includes(c.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function Nw(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},u=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",o,e],["exit",o,e],["enter",l,e],["enter",a,e],["exit",a,e],["exit",l,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...u),t}function Mw(t,e,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l=0,a;return u;function u(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(p){if(l>999||p===93&&!a||p===null||p===91||Q(p))return n(p);if(p===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return o.includes(Ce(i.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Q(p)||(a=!0),l++,t.consume(p),p===92?d:c}function d(p){return p===91||p===92||p===93?(t.consume(p),l++,c):c(p)}}function Pw(t,e,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l,a=0,u;return f;function f(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(y)}function d(y){if(a>999||y===93&&!u||y===null||y===91||Q(y))return n(y);if(y===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return l=Ce(i.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Q(y)||(u=!0),a++,t.consume(y),y===92?p:d}function p(y){return y===91||y===92||y===93?(t.consume(y),a++,d):d(y)}function h(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),o.includes(l)||o.push(l),W(t,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return e(y)}}function Rw(t,e,n){return t.check(wt,e,t.attempt(Aw,e,n))}function Dw(t){t.exit("gfmFootnoteDefinition")}function Lw(t,e,n){const i=this;return W(t,o,"gfmFootnoteDefinitionIndent",5);function o(l){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(l):n(l)}}function Fw(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:l,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(a,u){let f=-1;for(;++f<a.length;)if(a[f][0]==="enter"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._close){let c=f;for(;c--;)if(a[c][0]==="exit"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._open&&a[f][1].end.offset-a[f][1].start.offset===a[c][1].end.offset-a[c][1].start.offset){a[f][1].type="strikethroughSequence",a[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[c][1].start),end:Object.assign({},a[f][1].end)},p={type:"strikethroughText",start:Object.assign({},a[c][1].end),end:Object.assign({},a[f][1].start)},h=[["enter",d,u],["enter",a[c][1],u],["exit",a[c][1],u],["enter",p,u]],g=u.parser.constructs.insideSpan.null;g&&de(h,h.length,0,Xt(g,a.slice(c+1,f),u)),de(h,h.length,0,[["exit",p,u],["enter",a[f][1],u],["exit",a[f][1],u],["exit",d,u]]),de(a,c-1,f-c+3,h),f=c+h.length-2;break}}for(f=-1;++f<a.length;)a[f][1].type==="strikethroughSequenceTemporary"&&(a[f][1].type="data");return a}function l(a,u,f){const c=this.previous,d=this.events;let p=0;return h;function h(y){return c===126&&d[d.length-1][1].type!=="characterEscape"?f(y):(a.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const x=Xe(c);if(y===126)return p>1?f(y):(a.consume(y),p++,g);if(p<2&&!n)return f(y);const w=a.exit("strikethroughSequenceTemporary"),v=Xe(y);return w._open=!v||v===2&&!!x,w._close=!x||x===2&&!!v,u(y)}}}class Uw{constructor(){this.map=[]}add(e,n,i){Vw(this,e,n,i)}consume(e){if(this.map.sort(function(l,a){return l[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let o=i.pop();for(;o;){for(const l of o)e.push(l);o=i.pop()}this.map.length=0}}function Vw(t,e,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<t.map.length;){if(t.map[o][0]===e){t.map[o][1]+=n,t.map[o][2].push(...i);return}o+=1}t.map.push([e,n,i])}}function qw(t,e){let n=!1;const i=[];for(;e<t.length;){const o=t[e];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const l=i.length-1;i[l]=i[l]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function Bw(){return{flow:{null:{name:"table",tokenize:Gw,resolveAll:zw}}}}function Gw(t,e,n){const i=this;let o=0,l=0,a;return u;function u(E){let M=i.events.length-1;for(;M>-1;){const V=i.events[M][1].type;if(V==="lineEnding"||V==="linePrefix")M--;else break}const R=M>-1?i.events[M][1].type:null,U=R==="tableHead"||R==="tableRow"?b:f;return U===b&&i.parser.lazy[i.now().line]?n(E):U(E)}function f(E){return t.enter("tableHead"),t.enter("tableRow"),c(E)}function c(E){return E===124||(a=!0,l+=1),d(E)}function d(E){return E===null?n(E):G(E)?l>1?(l=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),g):n(E):J(E)?W(t,d,"whitespace")(E):(l+=1,a&&(a=!1,o+=1),E===124?(t.enter("tableCellDivider"),t.consume(E),t.exit("tableCellDivider"),a=!0,d):(t.enter("data"),p(E)))}function p(E){return E===null||E===124||Q(E)?(t.exit("data"),d(E)):(t.consume(E),E===92?h:p)}function h(E){return E===92||E===124?(t.consume(E),p):p(E)}function g(E){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(E):(t.enter("tableDelimiterRow"),a=!1,J(E)?W(t,y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):y(E))}function y(E){return E===45||E===58?w(E):E===124?(a=!0,t.enter("tableCellDivider"),t.consume(E),t.exit("tableCellDivider"),x):_(E)}function x(E){return J(E)?W(t,w,"whitespace")(E):w(E)}function w(E){return E===58?(l+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(E),t.exit("tableDelimiterMarker"),v):E===45?(l+=1,v(E)):E===null||G(E)?I(E):_(E)}function v(E){return E===45?(t.enter("tableDelimiterFiller"),S(E)):_(E)}function S(E){return E===45?(t.consume(E),S):E===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(E),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(E))}function k(E){return J(E)?W(t,I,"whitespace")(E):I(E)}function I(E){return E===124?y(E):E===null||G(E)?!a||o!==l?_(E):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(E)):_(E)}function _(E){return n(E)}function b(E){return t.enter("tableRow"),L(E)}function L(E){return E===124?(t.enter("tableCellDivider"),t.consume(E),t.exit("tableCellDivider"),L):E===null||G(E)?(t.exit("tableRow"),e(E)):J(E)?W(t,L,"whitespace")(E):(t.enter("data"),z(E))}function z(E){return E===null||E===124||Q(E)?(t.exit("data"),L(E)):(t.consume(E),E===92?D:z)}function D(E){return E===92||E===124?(t.consume(E),z):z(E)}}function zw(t,e){let n=-1,i=!0,o=0,l=[0,0,0,0],a=[0,0,0,0],u=!1,f=0,c,d,p;const h=new Uw;for(;++n<t.length;){const g=t[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(u=!1,f!==0&&(Rr(h,e,f,c,d),d=void 0,f=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},h.add(n,0,[["enter",c,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(i=!0,p=void 0,l=[0,0,0,0],a=[0,n+1,0,0],u&&(u=!1,d={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},h.add(n,0,[["enter",d,e]])),o=y.type==="tableDelimiterRow"?2:d?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(l[1]!==0&&(a[0]=a[1],p=Mt(h,e,l,o,void 0,p),l=[0,0,0,0]),a[2]=n)):y.type==="tableCellDivider"&&(i?i=!1:(l[1]!==0&&(a[0]=a[1],p=Mt(h,e,l,o,void 0,p)),l=a,a=[l[1],n,0,0])):y.type==="tableHead"?(u=!0,f=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(f=n,l[1]!==0?(a[0]=a[1],p=Mt(h,e,l,o,n,p)):a[1]!==0&&(p=Mt(h,e,a,o,n,p)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(a[3]=n)}for(f!==0&&Rr(h,e,f,c,d),h.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=qw(e.events,n))}return t}function Mt(t,e,n,i,o,l){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(l.end=Object.assign({},Ye(e.events,n[0])),t.add(n[0],0,[["exit",l,e]]));const f=Ye(e.events,n[1]);if(l={type:a,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",l,e]]),n[2]!==0){const c=Ye(e.events,n[2]),d=Ye(e.events,n[3]),p={type:u,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",p,e]]),i!==2){const h=e.events[n[2]],g=e.events[n[3]];if(h[1].end=Object.assign({},g[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,x=n[3]-n[2]-1;t.add(y,x,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return o!==void 0&&(l.end=Object.assign({},Ye(e.events,o)),t.add(o,0,[["exit",l,e]]),l=void 0),l}function Rr(t,e,n,i,o){const l=[],a=Ye(e.events,n);o&&(o.end=Object.assign({},a),l.push(["exit",o,e])),i.end=Object.assign({},a),l.push(["exit",i,e]),t.add(n+1,0,l)}function Ye(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const $w={name:"tasklistCheck",tokenize:Jw};function Hw(){return{text:{91:$w}}}function Jw(t,e,n){const i=this;return o;function o(f){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),l)}function l(f){return Q(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),a):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),a):n(f)}function a(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(f)}function u(f){return G(f)?e(f):J(f)?t.check({tokenize:Yw},e,n)(f):n(f)}}function Yw(t,e,n){return W(t,i,"whitespace");function i(o){return o===null?n(o):e(o)}}function Ww(t){return Ls([xw(),Iw(),Fw(t),Bw(),Hw()])}const Ow={};function Kw(t){const e=this,n=t||Ow,i=e.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),l=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(Ww(n)),l.push(mw()),a.push(hw(n))}const El=({content:t})=>m.jsx("div",{className:"prose prose-invert prose-blue max-w-none",children:m.jsx(FC,{remarkPlugins:[Kw],components:{h1:({children:e})=>m.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4 pb-2 border-b border-gray-600 text-blue-300",children:e}),h2:({children:e})=>m.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-3 text-blue-400",children:e}),h3:({children:e})=>m.jsx("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-100",children:e}),p:({children:e})=>m.jsx("p",{className:"my-3 leading-relaxed text-gray-300",children:e}),ul:({children:e})=>m.jsx("ul",{className:"my-3 ml-6 space-y-2",children:e}),li:({children:e})=>m.jsx("li",{className:"text-gray-300",children:e}),strong:({children:e})=>m.jsx("strong",{className:"font-bold text-gray-100",children:e}),em:({children:e})=>m.jsx("em",{className:"italic text-gray-200",children:e})},children:t})}),Dr={start:{id:"start",scenario:"You're driving home when you see flashing lights in your rearview mirror. The police are pulling you over. What's your first move?",options:[{text:"Continue driving until I find a safe, well-lit area to pull over",consequence:"Good thinking! Safety first. Signal your intention and pull over when safe.",nextStep:"pull_over",isCorrect:!0},{text:"Stop immediately wherever I am",consequence:"While you should pull over promptly, prioritize safety. Find a safe spot if possible.",nextStep:"pull_over"},{text:"Keep driving to avoid the stop",consequence:"This could escalate the situation and lead to more serious charges.",nextStep:"escalation"}]},pull_over:{id:"pull_over",scenario:"You've safely pulled over. The officer approaches your window. What should you do first?",options:[{text:"Roll down the window, keep hands visible on the steering wheel",consequence:"Excellent! This shows cooperation and keeps the officer at ease.",nextStep:"officer_questions",isCorrect:!0},{text:"Get out of the car to talk to the officer",consequence:"Staying in the car is generally safer unless instructed otherwise.",nextStep:"officer_questions"},{text:"Start recording on my phone immediately",consequence:"While you have the right to record, focus on safety and cooperation first.",nextStep:"officer_questions"}]},officer_questions:{id:"officer_questions",scenario:"The officer asks: 'Do you know why I pulled you over?' How do you respond?",options:[{text:"I'm not sure, officer. Can you tell me?",consequence:"Good response! You haven't admitted to anything while remaining polite.",nextStep:"license_registration",isCorrect:!0},{text:"Yes, I was probably speeding",consequence:"You've just admitted to a traffic violation. Avoid self-incrimination.",nextStep:"license_registration"},{text:"I don't have to answer that",consequence:"While legally true, this could escalate tensions. Consider a more diplomatic approach.",nextStep:"license_registration"}]},license_registration:{id:"license_registration",scenario:"The officer asks for your license and registration. What's your approach?",options:[{text:"Inform the officer before reaching for documents: 'My license is in my wallet in my back pocket'",consequence:"Perfect! Always inform officers before making movements to avoid misunderstandings.",nextStep:"search_request",isCorrect:!0},{text:"Quickly reach for the glove compartment without saying anything",consequence:"Sudden movements can make officers nervous. Always communicate your actions.",nextStep:"search_request"},{text:"Ask if I'm required to provide these documents",consequence:"While you are required to provide license and registration, this could seem uncooperative.",nextStep:"search_request"}]},search_request:{id:"search_request",scenario:"The officer says: 'Mind if I take a look in your trunk?' How do you respond?",options:[{text:"I do not consent to any searches",consequence:"Excellent! You've clearly asserted your Fourth Amendment rights.",nextStep:"end",isCorrect:!0},{text:"Sure, go ahead",consequence:"You've consented to a search. Once given, consent can be difficult to withdraw.",nextStep:"end"},{text:"Do you have a warrant?",consequence:"Good question! While you can ask this, a simple 'I do not consent' is clearer.",nextStep:"end"}]},escalation:{id:"escalation",scenario:"By not pulling over, you've created a more serious situation. The officer may now suspect you're evading. This is not recommended.",options:[{text:"Pull over immediately and cooperate fully",consequence:"Better late than never. Pull over safely and follow all instructions.",nextStep:"pull_over"}]},end:{id:"end",scenario:"Simulation complete! Remember: Stay calm, be polite, know your rights, and prioritize safety.",options:[]}},Qw=({onBack:t})=>{const[e,n]=F.useState("start"),[i,o]=F.useState([]),l=f=>{o([...i,{step:Dr[e].scenario,choice:f.text,consequence:f.consequence}]),f.nextStep&&n(f.nextStep)},a=()=>{n("start"),o([])},u=Dr[e];return m.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors",children:[m.jsx(Fe,{}),"Back to simulators"]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-300 mb-4",children:"Traffic Stop Simulation"}),e!=="end"&&m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:m.jsx("p",{className:"text-gray-200 text-lg",children:u.scenario})}),m.jsx("div",{className:"space-y-3",children:u.options.map((f,c)=>m.jsx("button",{onClick:()=>l(f),className:"w-full text-left p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-200",children:f.text}),m.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]})},c))})]}),e==="end"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-green-400 mb-4",children:"Simulation Complete!"}),m.jsx("div",{className:"space-y-4 mb-6",children:i.map((f,c)=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Step ",c+1]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Scenario:"})," ",f.step]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Your choice:"})," ",f.choice]}),m.jsxs("p",{className:"text-blue-300",children:[m.jsx("strong",{children:"Result:"})," ",f.consequence]})]},c))}),m.jsx("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Try Again"})]})]})]})},Lr={start:{id:"start",scenario:"You're at work when ICE agents enter the building. Your manager announces there's a raid. What's your immediate response?",options:[{text:"Stay calm and don't run or create panic",consequence:"Excellent! Running can create suspicion and escalate the situation.",nextStep:"agent_approach",isCorrect:!0},{text:"Try to leave the building immediately",consequence:"Attempting to leave during a raid could be seen as suspicious behavior.",nextStep:"agent_approach"},{text:"Hide in the bathroom or storage room",consequence:"Hiding might draw more attention and could be interpreted as having something to conceal.",nextStep:"agent_approach"}]},agent_approach:{id:"agent_approach",scenario:"An ICE agent approaches you and asks for your name. How do you respond?",options:[{text:"Provide your name only, nothing more",consequence:"Good! You're only required to provide your name in most situations.",nextStep:"documentation_request",isCorrect:!0},{text:"Give them your full name and explain your immigration status",consequence:"You have the right to remain silent beyond providing your name.",nextStep:"documentation_request"},{text:"Refuse to say anything at all",consequence:"While you have the right to remain silent, providing your name is generally required.",nextStep:"documentation_request"}]},documentation_request:{id:"documentation_request",scenario:"The agent asks to see your work authorization documents. What do you do?",options:[{text:"Ask if you are being detained or if you are free to go",consequence:"Smart! This clarifies your status and your rights in the situation.",nextStep:"detention_status",isCorrect:!0},{text:"Immediately show all your documents",consequence:"While cooperation might seem helpful, you have rights regarding document requests.",nextStep:"detention_status"},{text:"Say you don't have any documents with you",consequence:"This could complicate your situation. Focus on clarifying your status first.",nextStep:"detention_status"}]},detention_status:{id:"detention_status",scenario:"The agent says you need to come with them for questioning. How do you respond?",options:[{text:"Ask to see a warrant and state you want to speak with a lawyer",consequence:"Perfect! You have the right to see a warrant and legal representation.",nextStep:"legal_rights",isCorrect:!0},{text:"Go with them without asking questions",consequence:"You have the right to understand why you're being detained and to legal counsel.",nextStep:"legal_rights"},{text:"Physically resist being taken",consequence:"Physical resistance can lead to additional charges. Stay calm and assert your rights verbally.",nextStep:"legal_rights"}]},legal_rights:{id:"legal_rights",scenario:"You assert your rights to see a warrant and speak with a lawyer. The agent seems frustrated. What now?",options:[{text:"Remain silent and continue requesting legal counsel",consequence:"Excellent! You have the right to remain silent and request an attorney.",nextStep:"end",isCorrect:!0},{text:"Try to explain your situation to change their mind",consequence:"Anything you say can be used against you. It's best to wait for your attorney.",nextStep:"end"},{text:"Sign any documents they present",consequence:"Never sign documents without understanding them or having legal counsel review them.",nextStep:"end"}]},end:{id:"end",scenario:"Remember: You have rights regardless of immigration status. Stay calm, ask for a lawyer, and don't sign anything without legal counsel.",options:[]}},Xw=({onBack:t})=>{const[e,n]=F.useState("start"),[i,o]=F.useState([]),l=f=>{o([...i,{step:Lr[e].scenario,choice:f.text,consequence:f.consequence}]),f.nextStep&&n(f.nextStep)},a=()=>{n("start"),o([])},u=Lr[e];return m.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors",children:[m.jsx(Fe,{}),"Back to simulators"]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-300 mb-4",children:"Workplace Raid Response"}),e!=="end"&&m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:m.jsx("p",{className:"text-gray-200 text-lg",children:u.scenario})}),m.jsx("div",{className:"space-y-3",children:u.options.map((f,c)=>m.jsx("button",{onClick:()=>l(f),className:"w-full text-left p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-200",children:f.text}),m.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]})},c))})]}),e==="end"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-green-400 mb-4",children:"Simulation Complete!"}),m.jsx("div",{className:"space-y-4 mb-6",children:i.map((f,c)=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Step ",c+1]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Scenario:"})," ",f.step]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Your choice:"})," ",f.choice]}),m.jsxs("p",{className:"text-blue-300",children:[m.jsx("strong",{children:"Result:"})," ",f.consequence]})]},c))}),m.jsx("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Try Again"})]})]})]})},Fr={start:{id:"start",scenario:"There's a knock at your door. You look through the peephole and see people who appear to be law enforcement. What's your first step?",options:[{text:"Don't open the door immediately, ask who they are and what they want",consequence:"Good! You have no obligation to open your door without knowing who is there and why.",nextStep:"identify_officers",isCorrect:!0},{text:"Open the door to see what they want",consequence:"Opening the door gives officers visual access to your home and potentially weakens your privacy rights.",nextStep:"identify_officers"},{text:"Ignore the knock and stay quiet",consequence:"While you can choose not to respond, it's often better to communicate through the door.",nextStep:"identify_officers"}]},identify_officers:{id:"identify_officers",scenario:"They say they're police officers investigating a complaint. They want to come in and talk. How do you respond?",options:[{text:"Ask to see a warrant through the door or window",consequence:"Perfect! Officers generally need a warrant to enter your home without permission.",nextStep:"warrant_check",isCorrect:!0},{text:"Let them in to avoid seeming uncooperative",consequence:"Once you allow entry, you may have given up important constitutional protections.",nextStep:"warrant_check"},{text:"Tell them to come back later",consequence:"This might work, but asking for a warrant is more specific and legally protective.",nextStep:"warrant_check"}]},warrant_check:{id:"warrant_check",scenario:"They say they don't have a warrant but claim they have probable cause. They insist on entering. What do you do?",options:[{text:"Clearly state: 'I do not consent to any searches or entry without a warrant'",consequence:"Excellent! You've clearly asserted your Fourth Amendment rights.",nextStep:"assert_rights",isCorrect:!0},{text:"Step outside to talk to them, closing the door behind you",consequence:"This can be a reasonable compromise, but ensure you don't accidentally give consent.",nextStep:"assert_rights"},{text:"Allow them to enter since they seem insistent",consequence:"Consenting to entry waives your right to challenge the search later.",nextStep:"assert_rights"}]},assert_rights:{id:"assert_rights",scenario:"They become more insistent and mention they could get a warrant easily. They ask if you have something to hide. How do you respond?",options:[{text:"I have nothing to hide, but I know my rights and require a warrant for entry",consequence:"Perfect balance of asserting rights while remaining polite and non-confrontational.",nextStep:"legal_counsel",isCorrect:!0},{text:"Start arguing about constitutional rights",consequence:"While you're correct, being confrontational can escalate the situation.",nextStep:"legal_counsel"},{text:"Give up and let them in",consequence:"You've waived your rights by giving consent to search.",nextStep:"legal_counsel"}]},legal_counsel:{id:"legal_counsel",scenario:"They continue to pressure you. What's your next step?",options:[{text:"Ask if you're being detained and request to speak with an attorney",consequence:"Excellent! These are your fundamental rights in any law enforcement encounter.",nextStep:"end",isCorrect:!0},{text:"Try to negotiate or compromise",consequence:"Negotiating your constitutional rights isn't advisable. Stick to clear assertions.",nextStep:"end"},{text:"Call a friend for advice while they're at the door",consequence:"While calling an attorney is good, focus on asserting your rights clearly first.",nextStep:"end"}]},end:{id:"end",scenario:"Remember: Your home has the strongest privacy protections. Never consent to searches without a warrant, stay calm, and ask for legal counsel.",options:[]}},Zw=({onBack:t})=>{const[e,n]=F.useState("start"),[i,o]=F.useState([]),l=f=>{o([...i,{step:Fr[e].scenario,choice:f.text,consequence:f.consequence}]),f.nextStep&&n(f.nextStep)},a=()=>{n("start"),o([])},u=Fr[e];return m.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors",children:[m.jsx(Fe,{}),"Back to simulators"]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-300 mb-4",children:"Home Visit Encounter"}),e!=="end"&&m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:m.jsx("p",{className:"text-gray-200 text-lg",children:u.scenario})}),m.jsx("div",{className:"space-y-3",children:u.options.map((f,c)=>m.jsx("button",{onClick:()=>l(f),className:"w-full text-left p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-200",children:f.text}),m.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]})},c))})]}),e==="end"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-green-400 mb-4",children:"Simulation Complete!"}),m.jsx("div",{className:"space-y-4 mb-6",children:i.map((f,c)=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Step ",c+1]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Scenario:"})," ",f.step]}),m.jsxs("p",{className:"text-gray-200 mb-2",children:[m.jsx("strong",{children:"Your choice:"})," ",f.choice]}),m.jsxs("p",{className:"text-blue-300",children:[m.jsx("strong",{children:"Result:"})," ",f.consequence]})]},c))}),m.jsx("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Try Again"})]})]})]})},pe=[{id:1,question:"During a traffic stop, when can police search your car without a warrant?",options:["Anytime they want","Only if they have probable cause to believe there's evidence of a crime","Only if you give them permission","Never without a warrant"],correctAnswer:1,explanation:"Police can search your car without a warrant if they have probable cause to believe it contains evidence of a crime. This is known as the 'automobile exception' to the warrant requirement."},{id:2,question:"Do you have to answer questions from law enforcement at your home?",options:["Yes, always","No, you can remain silent except to provide your name","Only if they have a warrant","Only if you're being arrested"],correctAnswer:1,explanation:"You have the right to remain silent and don't have to answer questions beyond providing your name. You can speak through the door or step outside and close the door behind you."},{id:3,question:"What should you do if ICE agents come to your workplace?",options:["Run away immediately","Stay calm and don't run - running can create suspicion","Hide in the bathroom","Immediately show all your documents"],correctAnswer:1,explanation:"Staying calm and not running is crucial. Running can create suspicion and escalate the situation. You have rights regardless of your immigration status."},{id:4,question:"Can you record police officers during an encounter?",options:["No, it's illegal","Yes, in public spaces where you have a legal right to be","Only if you ask permission first","Only if you're not the one being questioned"],correctAnswer:1,explanation:"You have the right to record police officers performing their duties in public spaces, as long as you don't interfere with their work."},{id:5,question:"What should you say if police ask to search your home?",options:["Let them in to be cooperative","I do not consent to any searches without a warrant","Ask them to come back later","Only allow them to search the living room"],correctAnswer:1,explanation:"Clearly stating 'I do not consent to any searches without a warrant' protects your Fourth Amendment rights. Be polite but firm."},{id:6,question:"During a traffic stop, when can you ask if you're free to go?",options:["Only after getting a ticket","After the officer has your documents, you can ask 'Am I free to go?'","Never - you have to wait for them to dismiss you","Only if you're being arrested"],correctAnswer:1,explanation:"After providing required documents, you can politely ask 'Am I free to go?' If yes, you may leave. If no, you are being detained."},{id:7,question:"What information must you provide during a traffic stop?",options:["Everything they ask for","Only your driver's license, registration, and insurance","Your entire travel history","Nothing - you can remain completely silent"],correctAnswer:1,explanation:"You must provide your driver's license, vehicle registration, and proof of insurance. Beyond that, you have the right to remain silent."},{id:8,question:"If you're arrested, what's the most important thing to remember?",options:["Answer all questions truthfully","Ask for a lawyer and remain silent","Try to explain your side of the story","Sign any documents they give you"],correctAnswer:1,explanation:"The most important thing is to ask for a lawyer and exercise your right to remain silent. Don't sign anything without legal counsel."}],jw=({onBack:t})=>{const[e,n]=F.useState(0),[i,o]=F.useState(null),[l,a]=F.useState(!1),[u,f]=F.useState(0),[c,d]=F.useState([]),p=x=>{o(x),a(!0);const w=x===pe[e].correctAnswer;w&&f(u+1),d([...c,{question:pe[e].question,selected:x,correct:pe[e].correctAnswer,correctAnswer:w}])},h=()=>{e<pe.length-1&&(n(e+1),o(null),a(!1))},g=()=>{n(0),o(null),a(!1),f(0),d([])},y=pe[e];return m.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors",children:[m.jsx(Fe,{}),"Back to simulators"]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-300 mb-4",children:"Know Your Rights Quiz"}),e<pe.length?m.jsxs("div",{children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("span",{className:"text-sm text-gray-400",children:["Question ",e+1," of ",pe.length]}),m.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${(e+1)/pe.length*100}%`}})})]}),m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:y.question}),m.jsx("div",{className:"space-y-3",children:y.options.map((x,w)=>m.jsx("button",{onClick:()=>!l&&p(w),disabled:l,className:`w-full text-left p-4 rounded-lg transition-colors ${l?w===y.correctAnswer?"bg-green-700 text-white":w===i&&w!==y.correctAnswer?"bg-red-700 text-white":"bg-gray-600 text-gray-400":"bg-gray-700 hover:bg-gray-600 text-gray-200"}`,children:x},w))})]}),l&&m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[m.jsx("p",{className:`font-semibold mb-2 ${i===y.correctAnswer?"text-green-400":"text-red-400"}`,children:i===y.correctAnswer?"Correct!":"Incorrect"}),m.jsx("p",{className:"text-gray-300 text-sm",children:y.explanation})]}),l&&m.jsx("button",{onClick:h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:e<pe.length-1?"Next Question":"See Results"})]}):m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-green-400 mb-4",children:"Quiz Complete!"}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("p",{className:"text-3xl font-bold text-blue-300 mb-2",children:[u,"/",pe.length]}),m.jsx("p",{className:"text-gray-300",children:u===pe.length?"Perfect score! You know your rights well!":u>=pe.length*.75?"Great job! You have a good understanding of your rights.":"Good effort! Review the material to improve your knowledge."})]}),m.jsx("div",{className:"space-y-4 mb-6",children:c.map((x,w)=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Question ",w+1]}),m.jsx("p",{className:"text-gray-200 mb-2",children:x.question}),m.jsx("p",{className:`text-sm ${x.correctAnswer?"text-green-400":"text-red-400"}`,children:x.correctAnswer?"âœ“ Correct":"âœ— Incorrect"})]},w))}),m.jsx("button",{onClick:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Take Quiz Again"})]})]})]})},aS=()=>{const[t,e]=F.useState(null),[n,i]=F.useState("topics"),[o,l]=F.useState(null),a=y=>{e(y),i("content")},u=()=>{e(null),i("topics")},f=y=>{l(y),i("simulation")},c=()=>{l(null),i("topics")},d=F.useMemo(()=>t?Ey[t]||"Could not find information for the selected topic.":null,[t]),p=()=>{switch(o){case"traffic_stop_sim":return m.jsx(Qw,{onBack:c});case"workplace_raid_sim":return m.jsx(Xw,{onBack:c});case"home_visit_sim":return m.jsx(Zw,{onBack:c});case"rights_quiz":return m.jsx(jw,{onBack:c});default:return null}},h=()=>m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-center text-blue-300 mb-8",children:"Know Your Rights"}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-center text-purple-400 mb-6",children:"Educational Topics"}),m.jsx("p",{className:"text-lg text-center text-gray-300 mb-8",children:"Learn about your rights in different situations"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:jl.map(y=>m.jsx("button",{onClick:()=>a(y.id),className:"bg-indigo-900/50 hover:bg-indigo-800/60 text-gray-200 rounded-lg p-6 shadow-lg transition-all duration-300 ease-in-out transform hover:-translate-y-1 border border-indigo-700",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"text-purple-400 mr-4 flex-shrink-0",children:y.icon}),m.jsx("span",{className:"text-lg font-semibold text-left",children:y.title})]})},y.id))})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl font-bold text-center text-purple-400",children:"Scenario Simulator"}),m.jsx("p",{className:"mt-4 text-lg text-center text-gray-300",children:"Practice how to respond in real-life situations."}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-10",children:ea.map(y=>m.jsx("button",{onClick:()=>f(y.id),className:"bg-indigo-900/50 hover:bg-indigo-800/60 text-gray-200 rounded-lg p-6 shadow-lg transition-all duration-300 ease-in-out transform hover:-translate-y-1 border border-indigo-700",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"text-purple-400 mr-4 flex-shrink-0",children:y.icon}),m.jsx("span",{className:"text-lg font-semibold text-left",children:y.title})]})},y.id))})]})]}),g=()=>m.jsxs("div",{children:[m.jsxs("button",{onClick:u,className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors",children:[m.jsx(Fe,{}),"Back to topics"]}),d?m.jsx("div",{className:"bg-gray-800 p-6 rounded-lg",children:m.jsx(El,{content:d})}):m.jsx("div",{className:"bg-red-900 border border-red-500 text-red-200 px-4 py-3 rounded-lg",role:"alert",children:"Could not find information for the selected topic."})]});return m.jsxs("div",{className:"max-w-4xl mx-auto",children:[n==="topics"&&m.jsx(h,{}),n==="content"&&m.jsx(g,{}),n==="simulation"&&p()]})},wn=({icon:t,label:e,onClick:n})=>m.jsxs("button",{onClick:n,className:"bg-gray-700 hover:bg-gray-600 text-white rounded-lg p-4 shadow-md transition-all duration-300 ease-in-out transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75","aria-label":`Start Recording: ${e}`,children:[m.jsx("div",{className:"w-full h-16 flex items-center justify-center",children:t}),m.jsx("span",{className:"block text-center text-sm font-semibold mt-2",children:e})]}),eS=({mediaType:t,onClose:e,onSave:n,autoStart:i=!1})=>{const[o,l]=F.useState(i&&(t==="audio"||t==="video")),[a,u]=F.useState(!1),[f,c]=F.useState(0),d=F.useRef(null);F.useEffect(()=>(o?d.current=window.setInterval(()=>{c(S=>S+1)},1e3):d.current&&clearInterval(d.current),()=>{d.current&&clearInterval(d.current)}),[o]);const p=()=>{t==="video"||t==="audio"?o?(l(!1),u(!0)):(c(0),l(!0)):u(!0)},h=()=>{const S={video:"Video Evidence",audio:"Audio Evidence",photo:"Photo Evidence"},k={id:new Date().toISOString(),mediaType:t,timestamp:new Date().toISOString(),incidentType:i?"Emergency Audio Recording":S[t],notes:""};n(k)},g=()=>{u(!1),c(0),i?e():l(!1)},y=S=>{const k=Math.floor(S/60).toString().padStart(2,"0"),I=(S%60).toString().padStart(2,"0");return`${k}:${I}`},x=()=>m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4 flex justify-around items-center",children:[m.jsx("button",{onClick:e,className:"text-white text-lg font-semibold px-4 py-2 rounded-lg hover:bg-white/10",children:"Cancel"}),m.jsx("button",{onClick:p,className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-colors","aria-label":o?"Stop recording":`Capture ${t}`,children:(t==="video"||t==="audio")&&o?m.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-md"}):m.jsx("div",{className:"w-16 h-16 bg-white rounded-full transition-transform active:scale-90"})}),m.jsxs("div",{className:"w-24",children:[" "," "]})]}),w=()=>m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 p-4 flex justify-around items-center",children:[m.jsx("button",{onClick:g,className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"Discard"}),m.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-10 rounded-lg transition-colors",children:"Save"})]}),v=()=>a?m.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-black",children:[m.jsx("p",{className:"text-2xl text-white font-semibold",children:"Preview"}),m.jsxs("div",{className:"my-6 text-gray-300",children:[t==="video"&&m.jsx(Jt,{className:"w-24 h-24"}),t==="photo"&&m.jsx(Yt,{className:"w-24 h-24"}),t==="audio"&&m.jsx(yt,{className:"w-24 h-24"})]}),(t==="video"||t==="audio")&&m.jsx("p",{className:"text-white text-lg",children:`Duration: ${y(f)}`})]}):t==="audio"?m.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-800",children:[m.jsx(yt,{className:`w-32 h-32 text-blue-400 ${o?"animate-pulse":""}`}),o&&m.jsx("p",{className:"text-white text-4xl font-mono mt-8",children:y(f)}),m.jsx("p",{className:"text-gray-300 mt-4 text-xl",children:o?"Recording Audio...":"Ready to record audio"})]}):m.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-black text-white text-2xl",children:[m.jsx("p",{className:"opacity-50",children:"Camera Feed Placeholder"}),o&&m.jsxs("div",{className:"absolute top-4 left-4 bg-red-600/80 text-white px-3 py-1 rounded-lg flex items-center gap-2 backdrop-blur-sm",children:[m.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),m.jsx("span",{className:"font-mono",children:y(f)})]})]});return m.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",role:"dialog","aria-modal":"true",children:[m.jsx("div",{className:"flex-1 relative",children:m.jsx(v,{})}),a?m.jsx(w,{}):m.jsx(x,{})]})},tS=({evidence:t,onClose:e,onDelete:n,onUpdate:i})=>{const[o,l]=F.useState(!1),[a,u]=F.useState(t.incidentType),[f,c]=F.useState(t.notes||""),[d,p]=F.useState(!1);F.useEffect(()=>{u(t.incidentType),c(t.notes||""),l(!1),p(!1)},[t]);const h=()=>{i(t.id,{incidentType:a,notes:f}),l(!1)},g=()=>{u(t.incidentType),c(t.notes||""),l(!1)},y=()=>{n(t.id)},x=v=>{switch(t.mediaType){case"video":return m.jsx(Jt,{className:v});case"audio":return m.jsx(yt,{className:v});case"photo":return m.jsx(Yt,{className:v});default:return null}},w=v=>new Date(v).toLocaleString(void 0,{dateStyle:"full",timeStyle:"long"});return m.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:"Evidence Details"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:"Ã—"})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-700/50 rounded-lg",children:[x("w-12 h-12 text-blue-300 flex-shrink-0"),m.jsxs("div",{children:[m.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[t.mediaType," Recording"]}),m.jsx("p",{className:"font-semibold text-gray-200",children:w(t.timestamp)})]})]}),m.jsxs("div",{className:"bg-black/20 w-full aspect-video rounded-lg flex items-center justify-center text-gray-500",children:[x("w-24 h-24"),m.jsx("p",{className:"absolute text-white/80 text-lg font-semibold",children:"Media Preview Placeholder"})]}),m.jsx("div",{children:o?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"incidentType",className:"block text-sm font-medium text-gray-300 mb-1",children:"Title"}),m.jsx("input",{type:"text",id:"incidentType",value:a,onChange:v=>u(v.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),m.jsx("textarea",{id:"notes",value:f,onChange:v=>c(v.target.value),rows:4,placeholder:"Add any relevant details...",className:"w-full bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{children:m.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[a,m.jsx("button",{onClick:()=>l(!0),className:"text-blue-400 hover:text-blue-300","aria-label":"Edit details",children:m.jsx(Ol,{className:"w-5 h-5"})})]})}),f?m.jsx("p",{className:"text-gray-300 whitespace-pre-wrap bg-gray-900/50 p-3 rounded-md",children:f}):m.jsx("p",{className:"text-gray-500 italic",children:"No notes added."})]})})]}),m.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:o?m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:g,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Cancel"}),m.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Save Changes"})]}):d?m.jsxs("div",{className:"bg-red-900/50 border border-red-500 p-3 rounded-lg text-center",children:[m.jsx("p",{className:"text-red-300 mb-3",children:"Are you sure you want to permanently delete this item?"}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx("button",{onClick:()=>p(!1),className:"bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg",children:"Cancel"}),m.jsx("button",{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Delete"})]})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 text-red-500 hover:text-red-400 font-semibold px-3 py-2 rounded-lg hover:bg-red-900/20 transition-colors",children:[m.jsx(Br,{}),"Delete Evidence"]}),m.jsx("button",{onClick:e,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Close"})]})})]})})},uS=({evidence:t,onAddEvidence:e,onDeleteEvidence:n,onUpdateEvidence:i})=>{const[o,l]=F.useState({isOpen:!1,mediaType:null}),[a,u]=F.useState(null),f=g=>{l({isOpen:!0,mediaType:g})},c=()=>{l({isOpen:!1,mediaType:null})},d=g=>{e(g),c()},p=g=>{n(g),u(null)},h=({type:g})=>{const x={video:{title:"Video Recording Rights",tips:["You can record police in public spaces","Keep a safe distance","Don't interfere with police duties","Announce you're recording for safety","Save to cloud immediately if possible"],legal:"Recording police is protected by First Amendment in public spaces"},audio:{title:"Audio Recording Laws",tips:["Check your state's consent laws","One-party consent: You can record if you're part of conversation","Two-party consent: All parties must agree","Be aware of federal vs state laws"],legal:"Laws vary by state - use the toolkit to check your state's rules"},photo:{title:"Photography Rights",tips:["You can photograph anything visible from public space","Police can't demand to see your photos without warrant","Private property owners can set rules","Be respectful but know your rights"],legal:"Photography in public is protected First Amendment activity"}}[g];return m.jsxs("div",{className:"bg-blue-900/20 border border-blue-500 rounded-lg p-4 mb-4",children:[m.jsx("h4",{className:"text-blue-400 font-bold mb-2",children:x.title}),m.jsx("ul",{className:"text-sm text-gray-300 space-y-1",children:x.tips.map((w,v)=>m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-blue-400 mr-2",children:"ðŸ’¡"}),w]},v))}),m.jsx("p",{className:"text-xs text-blue-300 mt-2 italic",children:x.legal})]})};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Document"}),m.jsx("p",{className:"mt-1 text-gray-400",children:"Securely record evidence and manage your case files."})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[m.jsx("h2",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Recording Guidelines"}),m.jsx(h,{type:"video"}),m.jsx(h,{type:"audio"}),m.jsx(h,{type:"photo"}),m.jsx("h2",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Start Recording"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsx(wn,{icon:m.jsx(Jt,{className:"w-10 h-10 mx-auto"}),label:"Record Video",onClick:()=>f("video")}),m.jsx(wn,{icon:m.jsx(yt,{className:"w-10 h-10 mx-auto"}),label:"Record Audio",onClick:()=>f("audio")}),m.jsx(wn,{icon:m.jsx(Yt,{className:"w-10 h-10 mx-auto"}),label:"Take Photo",onClick:()=>f("photo")})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[m.jsx("h2",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Recent Evidence"}),t.length>0?m.jsx("ul",{className:"space-y-3",children:t.map(g=>m.jsx(xs,{evidence:g,onSelect:()=>u(g)},g.id))}):m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx("p",{children:"No evidence recorded yet."}),m.jsx("p",{className:"text-sm",children:"Your recordings will appear here."})]})]})]}),o.isOpen&&o.mediaType&&m.jsx(eS,{mediaType:o.mediaType,onClose:c,onSave:d}),a&&m.jsx(tS,{evidence:a,onClose:()=>u(null),onDelete:p,onUpdate:i})]})},nS=[{category:"Emergency Legal Help",items:[{name:"National Lawyers Guild",phone:"1-212-679-5100",website:"nlg.org",description:"Legal support for activists and protesters"},{name:"ACLU National",phone:"1-212-549-2500",website:"aclu.org",description:"Civil liberties legal assistance"},{name:"National Police Accountability Project",phone:"1-504-827-4956",website:"nlg-npap.org",description:"Police misconduct legal help"}]},{category:"Immigration Resources",items:[{name:"Immigration Hotline",phone:"1-844-363-1423",website:"immigrationadvocates.org",description:"24/7 immigration legal help"},{name:"United We Dream",phone:"1-855-448-3923",website:"unitedwedream.org",description:"Immigrant youth support"},{name:"National Immigration Law Center",phone:"1-213-639-3900",website:"nilc.org",description:"Immigration law resources"}]},{category:"Bail & Support Funds",items:[{name:"National Bail Fund Network",phone:"1-800-898-0692",website:"nationalbailout.org",description:"Directory of local bail funds"},{name:"The Bail Project",phone:"1-310-940-4186",website:"bailproject.org",description:"Free bail assistance"},{name:"Community Justice Exchange",website:"communityjusticeexchange.org",description:"Bail and court support resources"}]},{category:"Mental Health & Crisis",items:[{name:"Crisis Text Line",phone:"Text HOME to 741741",website:"crisistextline.org",description:"24/7 crisis support via text"},{name:"National Suicide Prevention Lifeline",phone:"988",website:"988lifeline.org",description:"24/7 crisis support"},{name:"Black Emotional and Mental Health Collective",website:"beam.community",description:"Black mental health resources"}]}],iS=`# Firewatch App Guide

Welcome to Firewatch! This guide explains all the features available to help you stay informed, document encounters, and protect your rights.

## The Dashboard (Home Screen)

Your central hub for quick actions and status updates.

* **Panic Button:** The large red button at the top. Pressing it opens the Emergency Modal, giving you two critical options.
* **Emergency Broadcast & Record:** Press and hold this button to simultaneously send a pre-written SMS alert with your location to your designated Emergency Contacts and start a covert audio recording.
* **Covert Record:** Press and hold this to start a discreet audio recording without sending an alert.
* **Quick Action Buttons:**
  * **Quick Record:** Jumps you to the Document screen to start recording.
  * **Legal Hotline:** Dials the ACLU's general number. You must confirm before the call is placed.
  * **Share Location:** Uses your device's native share feature to send a Google Maps link of your current location.
* **Area Status:** Shows a color-coded threat level (Red, Yellow, Green) based on the latest verified community alerts. This gives you an at-a-glance sense of local activity.
* **Dashboard Toolkit:** A set of four powerful mini-apps for on-the-spot information.

## Dashboard Toolkit Explained

* **Know Your Script:** Cycles through key legal phrases (e.g., "I do not consent to a search."). Use the "Copy" button to put the phrase on your clipboard.
* **State Recording Law:** Enter any U.S. state to see if it's a "One-Party" or "Two-Party" consent state for recording audio. This is crucial for understanding your rights when filming.
* **Incident Checklist:** An interactive checklist of important steps to take during or after an incident (e.g., getting badge numbers). Your progress is saved as you check items off.
* **Legal Jargon Buster:** Enter a complex legal term (like "probable cause" or "exculpatory evidence") and get a simple, plain-language definition.

## Alerts Screen

This screen provides real-time intelligence.

* **Live Area Scan:** This is the primary feature.
  * **Scan My Area:** Uses your device's GPS to perform an AI-powered search of recent news and social media for civil rights-related events in your immediate vicinity.
  * **Manual Scan:** You can also type in any city, state, or zip code to scan a different location. This is useful for checking on family or planning travel.
  * The scan provides a summary and a list of source links.
* **Community Verified Alerts:** A feed of curated, high-priority alerts that have been vetted by the community.

## Know Your Rights Screen

An educational resource to prepare you for potential encounters.

* **Topics:** Select a scenario (like "Traffic Stop" or "Home Visit") to read a detailed guide on your rights and recommended actions in that situation.
* **Scenario Simulator:** (Coming Soon!) Interactive modules that let you practice responding to various situations.

## Document Screen

Your secure evidence locker.

* **Recording:** Use the buttons to launch the recorder for video, audio, or photos. The recorder is a placeholder and simulates the recording process.
* **Evidence List:** All your saved recordings appear here. Tap any item to view its details.
* **Evidence Details:** In the detail view, you can:
  * **Edit:** Change the title and add detailed notes to your evidence.
  * **Delete:** Permanently and securely delete evidence after a confirmation. All data is stored locally on your device for privacy.

## Guide Screen

This screen contains this App Guide and other essential resources.

* **App Documentation:** The guide you are reading right now.
* **Resource Categories:** Find lists of external organizations that can help, such as:
  * National Legal Organizations
  * Immigration Resources
  * Bail & Community Funds

## Settings Screen

Customize the app to your needs.

* **Fallback Location:** Set a default city/state/zip. The Live Area Scan will use this location if you deny GPS permissions or if it can't get a location lock.
* **Emergency Contacts:** Add, edit, or remove the phone numbers of people you want to alert when you use the Emergency Broadcast feature. This is the most important setting to configure!

Remember: This app is a tool to empower you with information. It is not a substitute for legal advice. Always try to consult with a qualified attorney for legal matters.`,cS=()=>{const[t,e]=F.useState("index");return t==="docs"?m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("button",{onClick:()=>e("index"),className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors font-semibold",children:[m.jsx(Fe,{}),"Back to Guide"]}),m.jsx("div",{className:"bg-gray-800 p-6 rounded-lg",children:m.jsx(El,{content:iS})})]}):t==="resources"?m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("button",{onClick:()=>e("index"),className:"flex items-center gap-2 mb-6 text-blue-400 hover:text-blue-300 transition-colors font-semibold",children:[m.jsx(Fe,{}),"Back to Guide"]}),m.jsx("div",{className:"space-y-6",children:nS.map(n=>m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:n.category}),m.jsx("div",{className:"space-y-4",children:n.items.map((i,o)=>m.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[m.jsx("h4",{className:"font-semibold text-white",children:i.name}),m.jsx("p",{className:"text-sm text-gray-300 mb-2",children:i.description}),i.phone&&m.jsxs("a",{href:`tel:${i.phone}`,className:"inline-flex items-center gap-1 text-blue-400 hover:text-blue-300 text-sm mr-4",children:[m.jsx(zl,{className:"w-4 h-4"}),i.phone]}),i.website&&m.jsxs("a",{href:`https://${i.website}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:text-blue-300 text-sm",children:[m.jsx(Xl,{className:"w-4 h-4"}),i.website]})]},o))})]},n.category))})]}):m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-100 mb-8",children:"Firewatch Guide & Resources"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("button",{onClick:()=>e("docs"),className:"bg-gray-800 p-6 rounded-lg hover:bg-gray-700 transition-colors text-left",children:[m.jsx(Kl,{className:"w-12 h-12 text-blue-400 mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"App Documentation"}),m.jsx("p",{className:"text-gray-400",children:"Complete guide to all Firewatch features and how to use them effectively."})]}),m.jsxs("button",{onClick:()=>e("resources"),className:"bg-gray-800 p-6 rounded-lg hover:bg-gray-700 transition-colors text-left",children:[m.jsx(qr,{className:"w-12 h-12 text-green-400 mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Emergency Resources"}),m.jsx("p",{className:"text-gray-400",children:"Legal hotlines, support organizations, and emergency contacts."})]})]}),m.jsxs("div",{className:"mt-8 bg-gray-800 rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:"âš ï¸ Important Legal Notice"}),m.jsx("p",{className:"text-gray-300",children:"This app provides information and tools for educational purposes. It is not a substitute for professional legal advice. Always consult with a qualified attorney for legal matters. Laws vary by jurisdiction and may change over time."})]})]})},fS=()=>{const{settings:t,saveSettings:e}=ti(),[n,i]=F.useState(t.fallbackLocation),[o,l]=F.useState(t.emergencyContacts),[a,u]=F.useState(t.geminiApiKey||""),[f,c]=F.useState(t.geminiModel||"gemini-2.0-flash-exp"),[d,p]=F.useState(""),h=[{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash"},{value:"gemini-2.5-pro",label:"Gemini 2.5 Pro"}],g=S=>{i({...n,[S.target.name]:S.target.value})},y=(S,k,I)=>{const _=[...o];_[S]={..._[S],[k]:I},l(_)},x=()=>{o.length<5&&l([...o,{name:"",phone:""}])},w=S=>{const k=o.filter((I,_)=>_!==S);l(k)},v=S=>{S.preventDefault();const k=o.filter(I=>I.name.trim()!==""&&I.phone.trim()!=="");e({fallbackLocation:n,emergencyContacts:k,geminiApiKey:a.trim(),geminiModel:f}),p("Settings saved successfully!"),setTimeout(()=>p(""),3e3)};return m.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-center text-blue-400",children:"Settings"}),m.jsx("p",{className:"mt-4 text-lg text-center text-gray-300",children:"Manage your preferences and emergency information."})]}),m.jsxs("form",{onSubmit:v,className:"space-y-8",children:[m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-2",children:"Language"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"To view this app in another language, use your browser's built-in translation feature. In most browsers, you can right-click the page and select 'Translate'."})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-2",children:"Fallback Location"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"This location will be used for area scans if the app cannot access your device's GPS."}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[m.jsxs("div",{className:"sm:col-span-2",children:[m.jsx("label",{htmlFor:"city",className:"block mb-2 text-sm font-medium text-gray-300",children:"City"}),m.jsx("input",{type:"text",id:"city",name:"city",value:n.city,onChange:g,className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"state",className:"block mb-2 text-sm font-medium text-gray-300",children:"State"}),m.jsx("input",{type:"text",id:"state",name:"state",value:n.state,onChange:g,className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"})]}),m.jsxs("div",{className:"sm:col-span-2",children:[m.jsx("label",{htmlFor:"zip",className:"block mb-2 text-sm font-medium text-gray-300",children:"Zip Code"}),m.jsx("input",{type:"text",id:"zip",name:"zip",value:n.zip,onChange:g,inputMode:"numeric",className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"})]})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-2",children:"AI Configuration"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Configure your own Gemini API key and model for AI-powered features like area scanning and legal assistance."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"gemini-api-key",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gemini API Key"}),m.jsx("input",{type:"password",id:"gemini-api-key",value:a,onChange:S=>u(S.target.value),placeholder:"Enter your Gemini API key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"}),m.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"ðŸ”’ Your API key is stored securely in your browser's local storage only. It never leaves your device and cannot be accessed by anyone else, including the app developers."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"gemini-model",className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model"}),m.jsx("select",{id:"gemini-model",value:f,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:h.map(S=>m.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-2",children:"Emergency Contacts"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"These contacts will be notified when you activate the emergency broadcast."}),m.jsxs("div",{className:"space-y-4",children:[o.map((S,k)=>m.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 p-3 bg-gray-900/50 rounded-lg",children:[m.jsx("input",{type:"text",placeholder:"Name",value:S.name,onChange:I=>y(k,"name",I.target.value),className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0}),m.jsx("input",{type:"tel",placeholder:"Phone Number",value:S.phone,onChange:I=>y(k,"phone",I.target.value),className:"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0}),m.jsx("button",{type:"button",onClick:()=>w(k),className:"p-2 text-gray-400 hover:text-red-500 transition-colors rounded-full hover:bg-gray-700 flex-shrink-0","aria-label":"Remove contact",children:m.jsx(Br,{className:"w-6 h-6"})})]},k)),o.length<5&&m.jsx("button",{type:"button",onClick:x,className:"w-full text-blue-400 hover:text-blue-300 border-2 border-dashed border-gray-600 hover:border-gray-500 rounded-lg p-3 transition-colors",children:"+ Add Contact"})]})]}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-400 mb-2",children:"About"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Firewatch is an open-source project. You can find the source code on GitHub."}),m.jsxs("a",{href:"https://github.com/severian42/Firewatch",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 flex items-center gap-2",children:[m.jsx(Ql,{className:"w-5 h-5"}),"Firewatch GitHub Repository"]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Privacy & Security"}),m.jsx("div",{className:"space-y-4 text-sm text-gray-600",children:m.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[m.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"ðŸ”’ Your Data Stays Private"}),m.jsxs("ul",{className:"space-y-1 text-blue-800",children:[m.jsx("li",{children:"â€¢ All API keys are stored locally in your browser's storage only"}),m.jsx("li",{children:"â€¢ No data is sent to external servers except your direct API calls to Google"}),m.jsx("li",{children:"â€¢ App developers cannot access your API key or any personal information"}),m.jsx("li",{children:"â€¢ All recordings and evidence remain on your device unless you choose to share them"})]})]})})]}),m.jsxs("div",{className:"flex justify-center items-center gap-4",children:[m.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"Save Settings"}),d&&m.jsx("p",{className:"text-green-400 transition-opacity duration-300",children:d})]})]})]})};export{lS as A,eS as C,uS as D,Ql as G,sS as H,aS as K,rS as N,Sn as S,ti as a,fS as b,cS as c,m as j,F as r,yy as u};
